{"version":3,"sources":["Util.js","Geocoder.js","TooltipText.jsx","TooltipIcon.jsx","Helpers.js","FormComponents.jsx","AddOverlayForm.jsx","AddOverlay.js","ExportLayersToJSONButton.jsx","ManageOverlays.jsx","MapLabelsToggle.js","SettingsForm.jsx","Settings.js","FullscreenToggle.js","HideViewbarToggle.js","UtilityBar.js","Item.js","AddLayerItemForm.jsx","AddLayerItem.js","DeleteLayersItem.jsx","ScrollButton.js","ViewBar.js","Modal.jsx","Tooltip.jsx","VectorGrid.js","WFSLayer.jsx","EsriTiledMapLayer.js","EsriDynamicMapLayer.js","EsriFeatureLayer.js","EsriImageLayer.js","Leaflet.loading/Control.Loading.js","LeafletLoadingControl.jsx","MapWrapper.js","RowContainer.js","MapsContainer.js","LayersInfoDemo.js","App.js","registerServiceWorker.js","index.js"],"names":["findWithAttr","array","attr","value","i","length","deleteArrayofKeys","object","moveWithinArray","from","to","splice","isMobile","test","navigator","userAgent","Geocoder","props","library","add","faSearch","Config","window","sideby","mapboxToken","that","this","map","L","geocoderObj","Control","Mapbox","geocoderSearchPlaceholderText","addTo","on","e","transmitGeocode","container","getContainer","document","getElementById","appendChild","geocode","id","className","viewbarVisible","Component","TooltipText","TooltipIcon","faInfoCircle","tooltipName","icon","getThumbnailByLayerType","layerProps","thumbnail_path","layerType","layer_type","url","default_thumb","process","indexOf","layers","slice","ConditionalLayerFields","useFormikContext","values","layer_fields","WFSLayer","WMSTileLayer","WMTSTileLayer","field_name","htmlFor","name","type","LayerTypeRadioGroup","touched","setFieldValue","React","useEffect","newType","submittedUrl","Object","entries","TileLayer","EsriImageLayer","EsriFeatureLayer","EsriTiledMapLayer","forEach","lyrTypeRE","guessLayerTypeByUrl","EsriDynamicMapLayer","AddLayerInitialValues","display_name","format","typeNS","typeName","geometryField","maxFeatures","arcgis","layer","tilematrixSet","AddLayerValidationSchema","Yup","matches","required","is_basemap","AddOverlayForm","initialValues","validationSchema","onSubmit","setSubmitting","addOverlay","closeModal","LayerUrl","as","component","onClick","AddOverlay","faPlusSquare","bind","modalType","modalContent","onBlur","openModal","size","ExportLayersToJSONButton","faCopy","state","showLayers","clipboard","ClipboardJS","setState","rows","cols","readOnly","JSON","stringify","ManageOverlays","faLayerGroup","faTimesCircle","currentOverlays","overlays","o","deleteOverlay","noSubmit","MapLabelsToggle","onChange","toggleLabels","defaultChecked","labelLayerOn","SettingsForm","formik","useFormik","mapLabels","v","alert","handleSubmit","viewbarLayers","ExportLayers","Settings","faCog","faExpand","faCompress","FullscreenToggle","toggleFullscreen","isFullscreenEnabled","faArrowDown","faArrowUp","HideViewbarToggle","toggleViewbarVisibility","UtilityBar","numberOfLayersOn","deleteModeActive","toggleDeleteMode","invalidateMapSizes","faCircle","faTrash","Item","infoClick","resolveThumbnail","rebuildTooltip","startsWith","stopPropagation","maxLayers","isToggledOn","data","onItemClick","deleteLayer","maxLayersWarning","replace","dispName","style","backgroundImage","color","AddLayerItemForm","addLayer","AddNewLayer","AddLayerItem","faMap","faPlus","transform","DeleteLayersItem","faTrashAlt","faAngleLeft","faAngleRight","ScrollButton","direction","arrow","ViewBar","handleItemClick","handleScrollButtonClick","scrollTo","onWheel","easeInOutQuad","newState","cloneDeep","lyr","index","scrollDirection","prevProps","prevState","newLayer","push","elem","scrollSize","deltaMode","deltaY","scrollLeft","duration","start","clientWidth","documentElement","moveSize","Math","max","change","currentTime","animateScroll","val","setTimeout","t","b","c","d","items","onScroll","scrollleft","item","ReactModal","setAppElement","Modal","formatContent","afterOpenModal","handleCloseModal","ref","createRef","getParent","querySelector","content","closeTimeoutMS","isOpen","onAfterOpen","onRequestClose","parentSelector","contentLabel","Tooltip","resetRebuildTooltip","ReactTooltip","rebuild","effect","place","multiline","withLeaflet","VectorGridDefault","el","WFS","getOptions","contextValue","leaflet","layerContainer","popupContainer","fromProps","toProps","leafletElement","setUrl","Path","tiledMapLayer","GridLayer","propTypes","PropTypes","string","isRequired","options","dynamicMapLayer","MapLayer","featureLayer","zIndex","imageMapLayer","console","error","warn","Loading","extend","delayIndicator","position","separate","zoomControl","spinjs","spin","lines","width","radius","rotate","top","initialize","setOptions","_dataLoaders","onAdd","Spinner","_addLayerListeners","_addMapListeners","zoomsliderControl","classes","_container","DomUtil","addClass","_getLastControlButton","create","_indicatorContainer","_indicator","_spinner","onRemove","_removeLayerListeners","_removeMapListeners","removeFrom","removeChild","_map","prototype","call","addLoader","delayIndicatorTimeout","log","updateIndicator","removeLoader","isLoading","clearTimeout","_showIndicator","_hideIndicator","_countLoaders","key","hasOwnProperty","Zoom","removeClass","Zoomslider","_ui","zoomOut","children","button","offsetWidth","offsetHeight","_handleLoading","getEventId","_handleBaseLayerChange","eachLayer","Canvas","_handleLoad","_leaflet_id","target","_layerAdd","loading","load","exception","_layerRemove","off","baselayerchange","dataloading","dataload","layerremove","Map","addInitHook","loadingControl","addControl","LeafletLoadingControl","opts","MapControl","faGripVertical","Handle","provided","dragHandleProps","MapWrapper","context","labelLayerUrl","DEFAULT_VIEWPORT","center","mapDefaultCenter","zoom","mapDefaultZoom","viewport","syncMaps","unsyncMaps","moveend","onViewportChanged","passUpRef","onResize","onGeocodeClick","bboxStringToLatLngBoundsArray","checkLayerBounds","layerOptionBlacklist","mapRef","visibleIndex","ref_id","deleteRef","a","start_bounds","split","clearGeocode","layer_components","Overlays","Overlay","transparent","pane","Layer","draggableProps","innerRef","minZoom","mapMinZoom","bounds","maxZoom","numberLayers","isDragging","zoomControlAdded","preferCanvas","left","fadeColor","shadow","geocodeResult","Marker","forwardRef","RowContainer","maps","draggableId","snapshot","layerIndex","droppableProps","placeholder","MapsContainer","onDragEnd","setMapRef","handleGeocode","mapRefs","manageZoomControls","DOMNode","draggedLayer","destination","currentLayerIndex","destinationIndex","allLayers","currentRow","source","droppableId","destRow","filter","row","allTurnedOnLayers","updateLayerDisplayIndexesAndRows","removeControl","invalidateSize","unsync","j","isSynced","sync","syncCursor","randomMap","bbox","_northEast","lat","_southWest","fitBounds","setView","prevLyrs","lyrs","array1","array2","arraysAreEqual","compareArrays","isEqual","toString","toggleInvalidateMapSizes","numberRows","Set","row1Layers","sort","row2Layers","row3Layers","LayersInfoNYC","LayersInfoStillwater","App","calculateDisplayIndexes","calculateRowLayers","toggleModal","OverlaysInfo","location","hash","LayersInfo","siteTitle","welcomeText","themeBackgroundColor","title","globalStyle","setProperty","themeHeaderColor","themeHeaderFontFamily","themeScrollButtonHoverColor","themeScrollButtonColor","shortid","generate","sortVal","new_layer","isOverlay","interactive","visibleLayers","hide","obj","currentTarget","dataset","overlayId","display","matchIndex","foundIdx","found","newStateLayers","newViewbarLayers","concat","newNumberOfLayersOn","modalOptions","bool","forceUpdate","current_val","curr","newLayers","lyrIndex","enabled","modalIsOpen","modalSubmit","mapCenter","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","cssVars","ReactGA","gaTrackingId","pageview","pathname","search","ReactDOM","render","URL","origin","addEventListener","fetch","response","status","headers","get","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.bfebd065.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\n/*\r\n*  Takes an array of objects and returns the index \r\n*  of the member with the supplied attribute value.\r\n*  If not found, returns -1.\r\n*/\r\nexport function findWithAttr(array, attr, value) {\r\n    for(var i = 0; i < array.length; i += 1) {\r\n        if(array[i][attr] === value) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n  }\r\n\r\n/*\r\n  Takes an object and an array of strings representing \r\n  keys in the object. Deletes the keys and returns the\r\n  modified object.\r\n*/\r\nexport function deleteArrayofKeys(object, array) {\r\n  for(var i = 0; i < array.length; i += 1) {\r\n    delete object[array[i]]\r\n  }\r\n  return object\r\n}\r\n\r\n/*\r\n*\tMoves items within an array. From and to arguments\r\n*   Represent the index numbers. Returns nothing, as \r\n*   it modifies the array in place.\r\n*/\r\nexport function moveWithinArray(array, from, to) {\r\n    array.splice(to, 0, array.splice(from, 1)[0]);\r\n  }\r\n\r\nexport function compareArrays(array1, array2) {\r\n\tvar arraysAreEqual = true;\r\n\tfor (var i = array1.length; i--;){\r\n\t\tif (array1[i] !== array2[i]) {\r\n\t\t\tarraysAreEqual = false;\r\n\t\t}\r\n\t}\r\n\treturn arraysAreEqual;\r\n}\r\n\r\nexport function fetchJson(url) {\r\n  return axios.get(url);\r\n}\r\n\r\n//disable eslint to avoid useless escape warning. Not worth testing which escapes can be removed.\r\n// eslint-disable-next-line\r\nexport const RegexURL = /^((https?|ftp):)?\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[\\{\\}!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[\\{\\}!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[\\{\\}!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[\\{\\}!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(\\#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[\\{\\}!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i;\r\n\r\nexport const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\r\n","import React, { Component } from 'react';\r\nimport { library } from '@fortawesome/fontawesome-svg-core';\r\nimport { faSearch  } from '@fortawesome/free-solid-svg-icons';\r\nimport L from 'leaflet';\r\nimport 'leaflet-control-geocoder';\r\nimport { isMobile } from './Util';\r\nimport './Geocoder/images/geocoder.png';\r\nimport './Geocoder/images/throbber.gif';\r\nimport './Geocoder/Control.Geocoder.css';\r\nimport './Geocoder.css';\r\n\r\n\r\nclass Geocoder extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    library.add(faSearch);\r\n    this.Config = window.sideby.Config;\r\n\r\n    this.mapboxToken = this.Config.mapboxToken;\r\n  }\r\n \r\n  componentDidMount(){\r\n    //console.log('Geocoder mounted');\r\n    let that = this;\r\n    this.map = L.map('hidden-geocoder-map');\r\n    this.geocoderObj = new L.Control.Geocoder(\r\n      {\r\n        'geocoder': new L.Control.Geocoder.Mapbox(\r\n          this.mapboxToken,\r\n          //By uncommenting geocodingQueryParams below, you can restrict geocoding results\r\n          //to a specific region using country and bbox. By default it is a world-wide geocoder.\r\n          // {\r\n          //   'geocodingQueryParams': {\r\n          //     'country': 'US',\r\n          //     'bbox':'-97.35122680664064,35.9357645138553, -96.75178527832033,36.324530335021876'\r\n          //   }\r\n          // }\r\n        ),\r\n        'collapsed': true,\r\n        'placeholder': this.Config.geocoderSearchPlaceholderText,\r\n        'suggestMinLength': 3,\r\n        'queryMinLength': 1,\r\n        'defaultMarkGeocode': false\r\n      });\r\n    this.geocoderObj.addTo(this.map);\r\n    this.geocoderObj.on('markgeocode', e => that.transmitGeocode(e));\r\n    let container = this.geocoderObj.getContainer();\r\n    window.document.getElementById('Geocoder').appendChild(container);\r\n  }\r\n\r\n  transmitGeocode(geocode){\r\n    this.props.transmitGeocode(geocode);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id='Geocoder' className={this.props.viewbarVisible ? 'Geocoder' : 'Geocoder Viewbar-hidden'}\r\n          data-tip='Search for an address/place' \r\n          data-for='modal' \r\n          data-event='mouseover'\r\n          data-delay-show='900'\r\n          data-event-off='mouseout'\r\n          data-place='top'\r\n          data-tip-disable={isMobile} \r\n      >\r\n        <div id='hidden-geocoder-map'>\r\n        </div>\r\n        \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Geocoder;\r\n\r\n","export const TooltipText = {\r\n      \"AddNewLayer\": \"Beep boop boop\",\r\n      \"LayerUrl\": \"Enter the URL to the layer you want to add here. See the help for more guidance.\",\r\n      \"TileLayer\": \"An XYZ style layer.<br/>For example https://maps.nyc.gov/xyz/1.0.0/carto/label/{z}/{x}/{y}.png8\",\r\n      \"WMSTileLayer\": \"A link to an OGC WMS server. You will need to specify an extra layers parameter. See the help for more information\",\r\n      \"WMTSTileLayer\": \"A link to an OGC WMTS layer. Very similar to WMS, except that it is pre-tiled.\",\r\n      \"EsriDynamicMapLayer\": \"An Esri map service that is drawn dynamically on the server.\",\r\n      \"EsriFeatureLayer\": \"A vector layer coming from ArcGIS Online or ArcGIS Server.<br/>For example, https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/USA_States_Generalized/FeatureServer/0\",\r\n      \"EsriImageLayer\": \"An Esri image service.\",\r\n      \"EsriTiledMapLayer\": \"An Esri map service consisting of a static tile cache.\",\r\n      \"ThumbnailPath\": \"Enter a path to a thumbnail picture to use for the layer. It can be a full URL or the filename of an image stored in /public/assets/images.\",\r\n      \"DisplayName\": \"The name to use for this layer.\",\r\n      \"ExportLayers\": \"Use this option to extract the JSON representation of the layers in your current view. You can use that text in the application's LayersInfo.js file.\"\r\n  }\r\n\r\nexport { TooltipText as default};","import React, { Component } from 'react';\r\nimport { library } from '@fortawesome/fontawesome-svg-core';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faInfoCircle } from '@fortawesome/free-solid-svg-icons';\r\n\r\nclass TooltipIcon extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    library.add(faInfoCircle);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <FontAwesomeIcon \r\n            data-tip={this.props.tooltipName} \r\n            data-for='modal' \r\n            data-event='click'\r\n            icon='info-circle' />\r\n    );\r\n  }\r\n}\r\n\r\nexport default TooltipIcon;\r\n","\r\nexport function getThumbnailByLayerType(layerProps){\r\n\r\n    var layerType = layerProps.layer_type;\r\n    var url = layerProps.url;\r\n    var default_thumb = process.env.PUBLIC_URL + \r\n                        '/assets/images/default.jpg';\r\n    var thumbnail_path;\r\n\r\n    switch (layerType) {\r\n\r\n      case 'EsriDynamicMapLayer':\r\n      case 'EsriImageLayer':\r\n      case 'EsriTiledMapLayer':\r\n           thumbnail_path = url + '/info/thumbnail/thumbnail.png';\r\n\r\n        break;\r\n\r\n      case 'WMSTileLayer':\r\n\r\n        if (url.indexOf('geoserver') >= 0){\r\n\r\n          //for more on wms reflector see https://docs.geoserver.org/latest/en/user/tutorials/wmsreflector.html\r\n          thumbnail_path = url + \r\n                           '/reflect?height=200&width=300&layers=' + \r\n                           layerProps.layers;\r\n        }\r\n\r\n        break;\r\n      //case 'TileLayer':\r\n      //case 'WFSLayer':    \r\n\r\n      case 'WMTSTileLayer':\r\n\r\n        if (url.indexOf('MapServer/WMTS') >= 0){\r\n          //this.thumbnail_path = this.props.url.slice(0, this.props.url.indexOf('/WMTS')) + '/info/thumbnail/thumbnail.png';\r\n          thumbnail_path = url.slice(0, url.indexOf('/WMTS')) + \r\n                           '/info/thumbnail/thumbnail.png';\r\n        }\r\n    \r\n        break;\r\n\r\n      default:\r\n        thumbnail_path = default_thumb;\r\n        break;\r\n    }\r\n\r\n    if (!thumbnail_path) {\r\n      thumbnail_path = default_thumb;\r\n    }\r\n\r\n    return thumbnail_path;\r\n\r\n    // if (!this.thumbnail_path) {\r\n    //   this.guessLayerTypeByUrl(this.props.url);\r\n    // }\r\n  }\r\n\r\n\r\nexport function guessLayerTypeByUrl(url){\r\n  let typeREs = {\r\n        TileLayer: /.*\\{z\\}.*\\{x\\}.*\\{y\\}.*/,\r\n        WFSLayer: /.*wfs.*/i,\r\n        WMSTileLayer: /.*wms.*/i,\r\n        WMTSTileLayer: /.*wmts.*/i,\r\n        EsriImageLayer: /.*ImageServer.*/,\r\n        EsriFeatureLayer: /.*FeatureServer.*/, //though an individ layer from esri dynam map service can also act as a feature layer...\r\n        EsriTiledMapLayer: /.*MapServer[/ ]*$/, \r\n  };\r\n  let submittedUrl = url;\r\n  let newType = null;\r\n   \r\n  Object.entries(typeREs).forEach((lyrTypeRE) => {\r\n    if (lyrTypeRE[1].test(submittedUrl)) {\r\n      newType = lyrTypeRE[0];\r\n    }\r\n  });\r\n\r\n  return newType;\r\n}\r\n","import React from 'react';\r\nimport { Field, useFormikContext } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport { guessLayerTypeByUrl } from './Helpers';\r\nimport {RegexURL} from './Util';\r\nimport TooltipText from './TooltipText';\r\nimport TooltipIcon from './TooltipIcon';\r\n\r\nexport const ConditionalLayerFields = (props) => {\r\n    \r\n    const layerTypeFields = {\r\n        WFSLayer: ['typeNS', 'typeName', 'geometryField', 'maxFeatures', 'arcgis'],\r\n        WMSTileLayer: ['layers'],\r\n        WMTSTileLayer: ['layer', 'tilematrixSet']\r\n      }\r\n    \r\n    const { values } = useFormikContext();\r\n    let layer_type = values.layer_type;\r\n    let layer_fields = layerTypeFields[layer_type];\r\n    \r\n    if (!layer_type || !layer_fields) {return null}\r\n\r\n    return (\r\n      <div className='conditionalLayerFields'>\r\n      <h4 className='conditionalLayerFieldsHeader'>\r\n        {layer_type}: Additional Field{layer_fields.length > 1 ? 's' : ''}\r\n      </h4>\r\n      <div>\r\n        <>\r\n          {layer_fields.map(function(field_name) {\r\n            return (\r\n              <div key={layer_type+'_'+field_name} \r\n                   className='conditionalLayerField inputGroup'>\r\n                <label className='textInputLabel' htmlFor={field_name}>\r\n                    {field_name}&nbsp;\r\n                    <Field name={field_name} type=\"text\"/>\r\n                </label>\r\n              </div>\r\n            )\r\n          })}\r\n        </>\r\n      </div>\r\n      </div>\r\n\r\n    ) \r\n}\r\n\r\nexport const LayerTypeRadioGroup = props => {\r\n const {\r\n    values: {url},\r\n    touched,\r\n    setFieldValue,\r\n  } = useFormikContext();\r\n\r\n  //const [field, meta] = useField(props);\r\n\r\n  React.useEffect(() => {\r\n    let newType = guessLayerTypeByUrl(url);\r\n    setFieldValue(props.name, newType);\r\n    \r\n  }, [url, touched.url, setFieldValue, props.name]);\r\n\r\n  return (\r\n    <div className='radioGroup'>\r\n          <label className='radioGroupLabel'>Type of Layer</label>\r\n\r\n          <div className='inputGroup'>\r\n            <Field id='typeTileLayer'\r\n                   name='layer_type'\r\n                   type='radio'\r\n                   value='TileLayer'/>\r\n            <label className='radioGroupLabel' \r\n                   htmlFor='typeTileLayer'>\r\n                XYZ Tile Layer\r\n            </label>\r\n            <TooltipIcon tooltipName={TooltipText.TileLayer}/>\r\n          </div>\r\n\r\n          <div className='inputGroup'>\r\n            <Field id='typeWFSLayer' \r\n                   name='layer_type' \r\n                   type='radio' \r\n                   value='WFSLayer'/>\r\n            <label className='radioGroupLabel' \r\n                   htmlFor='typeWFSLayer'>\r\n                WFS Layer\r\n            </label>\r\n            <TooltipIcon tooltipName={TooltipText.WFSLayer}/>\r\n          </div>\r\n\r\n          <div className='inputGroup'>\r\n            <Field id='typeWMSTileLayer' \r\n                   name='layer_type' \r\n                   type='radio' \r\n                   value='WMSTileLayer'/>\r\n            <label className='radioGroupLabel' \r\n                   htmlFor='typeWMSTileLayer'>\r\n                WMS Layer\r\n            </label>\r\n            <TooltipIcon tooltipName={TooltipText.WMSTileLayer}/>\r\n          </div>\r\n\r\n          <div className='inputGroup'>\r\n            <Field id='typeWMTSTileLayer'\r\n                   name='layer_type'\r\n                   type='radio'\r\n                   value='WMTSTileLayer'/>\r\n            <label className='radioGroupLabel' \r\n                   htmlFor='typeWMTSTileLayer'>\r\n                WMTS Tile Layer\r\n            </label>\r\n            <TooltipIcon tooltipName={TooltipText.WMTSTileLayer}/>\r\n          </div>\r\n\r\n          <div className='inputGroup'>\r\n            <Field id='typeEsriTiledMapLayer'\r\n                   name='layer_type'\r\n                   type='radio'\r\n                   value='EsriTiledMapLayer'/>\r\n            <label className='radioGroupLabel' \r\n                   htmlFor='typeEsriTiledMapLayer'>\r\n                Esri Tiled Map Layer\r\n            </label>\r\n            <TooltipIcon tooltipName={TooltipText.EsriTiledMapLayer}/>\r\n          </div>\r\n\r\n          <div className='inputGroup'>\r\n            <Field id='typeEsriDynamicMapLayer'\r\n                   name='layer_type'\r\n                   type='radio'\r\n                   value='EsriDynamicMapLayer'/>\r\n            <label className='radioGroupLabel' \r\n                   htmlFor='typeEsriDynamicMapLayer'>\r\n                Esri Dynamic Map Layer\r\n            </label>\r\n            <TooltipIcon tooltipName={TooltipText.EsriDynamicMapLayer}/>\r\n          </div>\r\n\r\n          <div className='inputGroup'>\r\n            <Field id='typeEsriFeatureLayer'\r\n                   name='layer_type'\r\n                   type='radio'\r\n                   value='EsriFeatureLayer'/>\r\n            <label className='radioGroupLabel'\r\n                   htmlFor='typeEsriFeatureLayer'>\r\n                Esri Feature Layer\r\n            </label>\r\n            <TooltipIcon tooltipName={TooltipText.EsriFeatureLayer}/>\r\n          </div>\r\n          \r\n          <div className='inputGroup'>\r\n            <Field id='typeEsriImageLayer'\r\n                   name='layer_type'\r\n                   type='radio'\r\n                   value='EsriImageLayer'/>\r\n            <label className='radioGroupLabel'\r\n                   htmlFor='typeEsriImageLayer'>\r\n                Esri Image Layer\r\n            </label>\r\n            <TooltipIcon tooltipName={TooltipText.EsriImageLayer}/>\r\n          </div>\r\n        </div>\r\n  )\r\n}\r\n\r\nexport const AddLayerInitialValues = {\r\n    url: '',\r\n    layer_type: '',\r\n    display_name: '',\r\n    thumbnail_path: '',\r\n    layers: '',\r\n    format: 'image/jpeg',\r\n    typeNS: '',\r\n    typeName: '',\r\n    geometryField: '',\r\n    maxFeatures: '',\r\n    arcgis: '',\r\n    layer: '',\r\n    tilematrixSet: ''        \r\n}\r\n\r\nexport const AddLayerValidationSchema = Yup.object({\r\n    url: Yup.string()\r\n      .matches(RegexURL, 'Needs to be a valid URL.')\r\n      .required('Required'),\r\n    layer_type: Yup.string()\r\n      .required('Required'),\r\n    display_name: Yup.string()\r\n      .required('Required'),\r\n    thumbnail_path: Yup.string(),\r\n    layers: Yup.string(),\r\n    format: Yup.string(),\r\n    typeNS: Yup.string(),\r\n    typeName: Yup.string(),\r\n    geometryField: Yup.string(),\r\n    maxFeatures: Yup.string(),\r\n    arcgis: Yup.boolean(),\r\n    layer: Yup.string(),\r\n    tilematrixSet: Yup.string(),\r\n    is_basemap: Yup.boolean()\r\n});\r\n\r\nexport default LayerTypeRadioGroup;","import React from 'react';\r\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\r\nimport TooltipText from './TooltipText';\r\nimport TooltipIcon from './TooltipIcon';\r\nimport {ConditionalLayerFields, LayerTypeRadioGroup,\r\n        AddLayerInitialValues, AddLayerValidationSchema} from './FormComponents';\r\nimport './FormComponents.css';\r\n\r\nexport const AddOverlayForm = (props) => {\r\n  return (\r\n    <Formik\r\n      initialValues={AddLayerInitialValues}\r\n      \r\n      validationSchema={AddLayerValidationSchema}\r\n\r\n      onSubmit={(values, { setSubmitting  }) => {\r\n        props.addOverlay(values);\r\n        props.closeModal();\r\n      }}\r\n\r\n    >\r\n\r\n      <Form>\r\n      <h3 className='modalHeader'>Add New Overlay</h3>\r\n        <label className='textInputLabel' htmlFor='url'>Url&nbsp;</label>\r\n        <TooltipIcon tooltipName={TooltipText.LayerUrl}/>\r\n\r\n        <div className='inputGroup'>\r\n          <Field as='textarea' name='url' />\r\n          <ErrorMessage className='error' component='div' name='url' />\r\n        </div>\r\n\r\n        <LayerTypeRadioGroup name='layer_type' />\r\n   \r\n        <ConditionalLayerFields />\r\n        \r\n        <div className='inputGroup'>\r\n            <label className='textInputLabel' htmlFor='display_name'>Display Name</label>\r\n            <Field name='display_name' type='text' />\r\n            <ErrorMessage className='error' component='div' name='display_name' />\r\n        </div>\r\n\r\n        <div className='inputGroup'>\r\n          <Field id='is_basemap' name='is_basemap' type='checkbox' />\r\n          <label className='radioGroupLabel' htmlFor='is_basemap'>Place layer beneath others rather than on top.</label>\r\n        </div>\r\n\r\n        <button type='submit'>OK</button>\r\n        <button type='button' onClick={props.closeModal}>Cancel</button>\r\n      </Form>\r\n    </Formik>\r\n  );\r\n};\r\n\r\nexport default AddOverlayForm;","import React, { Component } from 'react';\r\nimport { library } from '@fortawesome/fontawesome-svg-core';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlusSquare  } from '@fortawesome/free-solid-svg-icons';\r\nimport { isMobile } from './Util';\r\nimport AddOverlayForm from './AddOverlayForm';\r\n\r\n\r\nclass AddOverlay extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.Config = window.sideby.Config;\r\n    library.add(faPlusSquare);\r\n    this.onClick = this.onClick.bind(this);\r\n    this.modalType = 'AddOverlay';\r\n  }\r\n  \r\n  onClick(e) {\r\n    let modalContent = <AddOverlayForm onBlur={this.onBlur} {...this.props} />\r\n    this.props.openModal(this.modalType, modalContent);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <button className='add-overlay'\r\n            onClick={this.onClick} \r\n            name=\"Add Overlay\"\r\n            id='add-overlay'\r\n            data-tip='Add an overlay layer' \r\n            data-for='modal' \r\n            data-event='mouseover'\r\n            data-delay-show='900'\r\n            data-place='top'\r\n            data-event-off='mouseout'\r\n            data-tip-disable={isMobile} \r\n            >\r\n            <FontAwesomeIcon icon='plus-square' size=\"2x\"/>\r\n        </button>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AddOverlay;\r\n","import React, { Component } from 'react';\r\nimport ClipboardJS from 'clipboard'; // https://github.com/zenorocha/clipboard.js/issues/535\r\nimport './FormComponents.css';\r\nimport { library } from '@fortawesome/fontawesome-svg-core';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faCopy } from '@fortawesome/free-solid-svg-icons';\r\n\r\nclass ExportLayersToJSONButton extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    library.add(faCopy);\r\n    this.onClick = this.onClick.bind(this);\r\n    this.state = {\r\n      showLayers: false\r\n    }\r\n    this.clipboard = new ClipboardJS('.copyButton', {\r\n      container: document.getElementById('modalContainer')\r\n    });\r\n\r\n  }\r\n\r\n  onClick() {\r\n    this.setState({showLayers:!this.state.showLayers});\r\n    \r\n  }\r\n  render() {\r\n    return (\r\n      <div className='exportLayersGroup'>\r\n          <button name='exportLayersButton' \r\n                 type='button'\r\n                 id='exportLayersButton' \r\n                 onClick={this.onClick}>        \r\n                 Export Layers\r\n          </button>\r\n          <br/>\r\n          {this.state.showLayers && \r\n            <>\r\n            <textarea className='clipboardText' \r\n              id='clipboardText' \r\n              rows='10' \r\n              cols='50' \r\n              readOnly \r\n              value={JSON.stringify(this.props.layers, null, 2)}>\r\n            </textarea>\r\n            <button className='copyButton' \r\n              data-clipboard-target='#clipboardText'\r\n              type='button'>\r\n              <FontAwesomeIcon icon='copy'/>\r\n            </button>\r\n            </>\r\n          }\r\n          \r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ExportLayersToJSONButton;\r\n","import React, { Component } from 'react';\r\nimport { library } from '@fortawesome/fontawesome-svg-core';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faLayerGroup, faTimesCircle} from '@fortawesome/free-solid-svg-icons';\r\nimport ExportLayersToJSONButton from './ExportLayersToJSONButton';\r\n\r\n\r\nclass ManageOverlays extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    library.add(faLayerGroup);\r\n    library.add(faTimesCircle);\r\n    this.onClick = this.onClick.bind(this);\r\n  }\r\n \r\n  onClick(e) {\r\n    let currentOverlays = this.props.overlays;\r\n    let modalContent =  \r\n      <>\r\n          <table className='table'>\r\n            <caption> Current Overlays</caption>\r\n                <thead>\r\n                    \r\n                    <tr>\r\n                        <th>Name</th>\r\n                        <th>Remove</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {currentOverlays.map((o, i) => \r\n\r\n                    <tr id={o.id} key={o.id}>\r\n                        <td>{o.display_name}</td>\r\n                        <td>\r\n                            <button data-overlay-id={o.id} onClick={this.props.deleteOverlay}>\r\n                                <FontAwesomeIcon icon='times-circle' size='2x' />\r\n                            </button>\r\n                        </td>\r\n                    </tr>\r\n\r\n                        )}\r\n                </tbody>\r\n            </table>\r\n            <ExportLayersToJSONButton layers={currentOverlays} />\r\n            <br/>\r\n            <button type='button' onClick={this.props.closeModal}>OK</button>\r\n      </>\r\n\r\n    this.props.openModal('ManageOverlays', modalContent, {noSubmit: true});\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <button className='ManageOverlays-button' \r\n            onClick={this.onClick}\r\n            name='Manage Overlays'\r\n            id='ManageOverlays-button'\r\n            data-tip='Manage current overlays' \r\n            data-for='modal' \r\n            data-event='mouseover'\r\n            data-delay-show='900'\r\n            data-event-off='mouseout'\r\n            data-place='top'\r\n            >\r\n          <div className='icon-label'>\r\n             <FontAwesomeIcon icon='layer-group' size='2x'/>\r\n          </div>\r\n\r\n        </button>\r\n      );\r\n  }\r\n}\r\n\r\nexport default ManageOverlays;\r\n","import React, { Component } from 'react';\r\nimport './Checkbox.css';\r\n\r\nclass MapLabelsToggle extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChange = this.onChange.bind(this);\r\n  }\r\n\r\n  onChange() {\r\n    this.props.toggleLabels();\r\n  }\r\n  render() {\r\n    return (\r\n      <div className='inputGroup'>\r\n          <input defaultChecked={this.props.labelLayerOn} \r\n                 name='labelsCheckbox' \r\n                 id='labelsCheckbox' \r\n                 type='checkbox' \r\n                 onChange={this.onChange}>        \r\n          </input>\r\n          <label htmlFor='labelsCheckbox'>Map&nbsp;Labels</label>\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MapLabelsToggle;\r\n","import React from 'react';\r\nimport ExportLayersToJSONButton from './ExportLayersToJSONButton';\r\nimport MapLabelsToggle from './MapLabelsToggle';\r\nimport TooltipText from './TooltipText';\r\nimport TooltipIcon from './TooltipIcon';\r\nimport { useFormik } from 'formik';\r\n\r\nexport const SettingsForm = (props) => {\r\n  // Pass the useFormik() hook initial form values and a submit function that will\r\n  // be called when the form is submitted\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      mapLabels: true\r\n    },\r\n    onSubmit: values => {\r\n        props.closeModal();\r\n    },\r\n    onChange: v => {alert(v)}\r\n  });\r\n  return (\r\n    <form onSubmit={formik.handleSubmit}>\r\n      <MapLabelsToggle labelLayerOn={props.labelLayerOn}\r\n          toggleLabels={props.toggleLabels} />\r\n      <div className='inputGroup'>\r\n        <ExportLayersToJSONButton layers={props.viewbarLayers} />\r\n        <TooltipIcon tooltipName={TooltipText.ExportLayers}/>\r\n      </div>\r\n      <button type='submit'>OK</button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default SettingsForm","import React, { Component } from 'react';\r\nimport { library } from '@fortawesome/fontawesome-svg-core';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faCog } from '@fortawesome/free-solid-svg-icons';\r\nimport { isMobile } from './Util';\r\nimport SettingsForm from './SettingsForm';\r\n\r\n\r\nclass Settings extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    library.add(faCog);\r\n    this.onClick = this.onClick.bind(this);\r\n  }\r\n \r\n  onClick(e) {\r\n    let modalContent = <SettingsForm {...this.props} />\r\n    this.props.openModal('Settings', modalContent, {noSubmit: true});\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <button className='settings-button' \r\n            onClick={this.onClick}\r\n            name='Settings'\r\n            data-tip='Settings' \r\n            data-for='modal' \r\n            data-event='mouseover'\r\n            data-delay-show='900'\r\n            data-place='top'\r\n            data-event-off='mouseout'\r\n            data-tip-disable={isMobile} \r\n            id='settings-button'>\r\n          <div className='icon-label'>\r\n             <FontAwesomeIcon icon='cog' size='2x'/>\r\n          </div>\r\n        </button>\r\n      );\r\n  }\r\n}\r\n\r\nexport default Settings;\r\n","import React, { Component } from 'react';\r\nimport { library } from '@fortawesome/fontawesome-svg-core';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { isMobile } from './Util';\r\nimport { faExpand, faCompress } from '@fortawesome/free-solid-svg-icons';\r\n\r\nlibrary.add(faExpand);\r\nlibrary.add(faCompress);\r\n\r\nclass FullscreenToggle extends Component {\r\n\r\n  render() {\r\n    return (\r\n        <button onClick={() => this.props.toggleFullscreen()}\r\n          name='Toggle Fullscreen Mode'\r\n          data-tip={this.props.isFullscreenEnabled ? 'Exit Fullscreen Mode' : 'Enter Fullscreen Mode'} \r\n          data-for='modal' \r\n          data-event='mouseover'\r\n          data-delay-show='800'\r\n          data-place='top'\r\n          data-tip-disable={isMobile} \r\n          data-event-off='mouseout'>\r\n          \r\n          <FontAwesomeIcon \r\n              icon={this.props.isFullscreenEnabled ? 'compress' : 'expand'} \r\n              size='2x'\r\n              />\r\n        </button>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nexport default FullscreenToggle;\r\n","import React, { Component } from 'react';\r\nimport { library } from '@fortawesome/fontawesome-svg-core';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faArrowDown, faArrowUp } from '@fortawesome/free-solid-svg-icons';\r\nimport { isMobile } from './Util';\r\n\r\n\r\nlibrary.add(faArrowDown);\r\nlibrary.add(faArrowUp);\r\n\r\nclass HideViewbarToggle extends Component {\r\n\r\n  render() {\r\n    return (\r\n        <button onClick={() => this.props.toggleViewbarVisibility()}\r\n          name='Hide view bar'\r\n           data-tip={this.props.viewbarVisible ? 'Hide Layer Selector' : 'Show Layer Selector'} \r\n            data-for='modal' \r\n            data-event='mouseover'\r\n            data-delay-show='800'\r\n            data-event-off='mouseout'\r\n            data-place='top'\r\n            data-tip-disable={isMobile} \r\n          >\r\n          <FontAwesomeIcon \r\n              icon={this.props.viewbarVisible ? 'arrow-down' : 'arrow-up'}\r\n              size='2x'\r\n              />\r\n        </button>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nexport default HideViewbarToggle;\r\n","import React, { Component } from 'react';\r\nimport Geocoder from './Geocoder';\r\nimport AddOverlay from './AddOverlay';\r\nimport ManageOverlays from './ManageOverlays';\r\nimport Settings from './Settings';\r\nimport FullscreenToggle from './FullscreenToggle';\r\nimport HideViewbarToggle from './HideViewbarToggle';\r\nimport './UtilityBar.css';\r\nimport './UtilityBarButton.css';\r\n\r\n\r\nclass UtilityBar extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.transmitGeocode = this.transmitGeocode.bind(this);\r\n  }\r\n \r\n  componentDidMount(){\r\n  }\r\n\r\n  transmitGeocode(geocode){\r\n    this.props.transmitGeocode(geocode);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id='UtilityBar' className={'UtilityBar'}>\r\n        <Geocoder transmitGeocode={this.transmitGeocode}\r\n                  viewbarVisible={this.props.viewbarVisible}\r\n                   />\r\n                   \r\n        <AddOverlay \r\n            numberOfLayersOn={this.props.numberOfLayersOn} \r\n            addOverlay={this.props.addOverlay}\r\n            openModal={this.props.openModal} \r\n            closeModal={this.props.closeModal}\r\n            />\r\n\r\n        {this.props.overlays.length > 0 &&\r\n          <ManageOverlays \r\n              overlays={this.props.overlays}\r\n              openModal={this.props.openModal}\r\n              closeModal={this.props.closeModal} \r\n              deleteOverlay={this.props.deleteOverlay}\r\n              />\r\n          }\r\n        <FullscreenToggle toggleFullscreen={this.props.toggleFullscreen} \r\n                          isFullscreenEnabled={this.props.isFullscreenEnabled} \r\n                          />\r\n        <Settings \r\n            openModal={this.props.openModal}\r\n            closeModal={this.props.closeModal}\r\n            labelLayerOn={this.props.labelLayerOn}\r\n            toggleLabels={this.props.toggleLabels}\r\n            viewbarLayers={this.props.viewbarLayers}\r\n            deleteModeActive={this.props.deleteModeActive}\r\n            toggleDeleteMode={this.props.toggleDeleteMode}\r\n            />\r\n\r\n        <HideViewbarToggle toggleViewbarVisibility={this.props.toggleViewbarVisibility}\r\n                           viewbarVisible={this.props.viewbarVisible}\r\n                           invalidateMapSizes={this.props.invalidateMapSizes} />\r\n        \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UtilityBar;\r\n\r\n","import React, { Component } from 'react';\r\n//import Config from './Config';\r\nimport { library } from '@fortawesome/fontawesome-svg-core';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faInfoCircle, faCircle, faTrash } from '@fortawesome/free-solid-svg-icons';\r\nimport { getThumbnailByLayerType } from './Helpers';\r\nimport { isMobile } from './Util';\r\nimport './Item.css';\r\n\r\nlibrary.add(faInfoCircle);\r\nlibrary.add(faCircle);\r\nlibrary.add(faTrash);\r\n\r\nclass Item extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.Config = window.sideby.Config;\r\n    this.onClick = this.onClick.bind(this);\r\n    this.infoClick = this.infoClick.bind(this);\r\n    this.resolveThumbnail.bind(this);\r\n    this.state = {};\r\n\r\n  }\r\n \r\n  componentDidMount(state,props){\r\n    this.props.rebuildTooltip();\r\n    this.resolveThumbnail();\r\n  }\r\n\r\n  resolveThumbnail() {\r\n\r\n    var local_path = process.env.PUBLIC_URL + '/assets/layer_thumbnails/';\r\n    \r\n    if (this.props.thumbnail_path){\r\n    \r\n      if (this.props.thumbnail_path.startsWith('http')){\r\n    \r\n        this.setState({thumbnail_path: this.props.thumbnail_path});\r\n    \r\n      }\r\n    \r\n      else {\r\n        this.setState({thumbnail_path: local_path + \r\n                                       this.props.thumbnail_path});\r\n    \r\n      }  \r\n      return;\r\n    }\r\n\r\n    if (this.props.layer_type){\r\n      this.setState({thumbnail_path: getThumbnailByLayerType(this.props)});\r\n      return;\r\n    }\r\n  }\r\n\r\n  infoClick(e) {\r\n    e.stopPropagation();\r\n    alert('info click');\r\n  }\r\n\r\n  onClick(e) {\r\n\r\n    let numLyrs = this.props.numberOfLayersOn;\r\n\r\n    if (numLyrs === this.Config.maxLayers) {\r\n      if (!this.props.isToggledOn){\r\n        this.props.openModal('maxLayers', \r\n          this.Config.maxLayersWarning.replace('{maxLayers}', \r\n          this.Config.maxLayers), \r\n          {noSubmit: true}\r\n        );\r\n        return\r\n      }\r\n    }\r\n\r\n    if (this.props.deleteModeActive){\r\n      \r\n      if (this.props.isToggledOn){\r\n      \r\n        let data = {...this.props};\r\n        data.isToggledOn = !this.props.isToggledOn;\r\n        delete data.deleteModeActive;      \r\n        delete data.onItemClick;\r\n        \r\n        this.props.onItemClick(data);\r\n\r\n      } \r\n\r\n      this.props.deleteLayer(this.props.id);\r\n      return;\r\n    }\r\n\r\n\r\n    let data = {...this.props};\r\n    data.isToggledOn = !this.props.isToggledOn;\r\n    delete data.deleteModeActive;      \r\n    delete data.onItemClick;\r\n    delete data.numberOfLayersOn;\r\n    \r\n    this.props.onItemClick(data);\r\n\r\n  }\r\n\r\n  render() {\r\n    let dispName = this.props.display_name;\r\n    \r\n     // All of the data- attribs in the button element are for ReactTooltip purposes \r\n    return (\r\n\r\n      <button className={this.props.isToggledOn ? 'item on': 'item off'} \r\n          onClick={this.onClick} \r\n          style={{backgroundImage: 'url(\"' + this.state.thumbnail_path + '\")'}}\r\n          id={this.props.id}\r\n          data-tip={this.props.display_name} \r\n          data-place='top'\r\n          data-for='modal' \r\n          data-event='mouseover'\r\n          data-delay-show='900'\r\n          data-event-off='mouseout'\r\n          data-clickable='false'\r\n          data-tip-disable={isMobile}\r\n          >\r\n          <div className={this.props.deleteModeActive ? 'deleteModeOn' : 'deleteModeOff'}>\r\n            <FontAwesomeIcon icon='trash' color='red' size='5x'  />\r\n          </div>\r\n        \r\n\r\n        <div className={dispName.length >= 10 ? 'label long-title' : 'label'}>\r\n          {dispName.length > 20 ? dispName.slice(0, 20)+'...' : dispName}\r\n        </div>\r\n\r\n       {/* \r\n        <span onClick={this.infoClick} \r\n              className='layerInfoButton fa-layers fa-fw'\r\n              data-tip='View Layer Information'\r\n              data-place='top'\r\n              data-for='modal' \r\n              data-event='mouseover'\r\n              data-delay-show='900'\r\n              data-clickable='false'\r\n              data-event-off='mouseout'>\r\n          <FontAwesomeIcon icon='circle' color='var(--label-color)' transform='grow-6'  />\r\n          <FontAwesomeIcon \r\n              icon='info-circle'\r\n              color='#2b2b2b'\r\n              transform='grow-6'\r\n              />\r\n          </span>\r\n        */}\r\n\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Item;\r\n","import React from 'react';\r\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\r\nimport TooltipText from './TooltipText';\r\nimport TooltipIcon from './TooltipIcon';\r\nimport {ConditionalLayerFields, LayerTypeRadioGroup,\r\n        AddLayerInitialValues, AddLayerValidationSchema} from './FormComponents';\r\n\r\nimport './FormComponents.css';\r\n\r\n\r\nexport const AddLayerItemForm = (props) => {\r\n\r\n  return (\r\n    <Formik\r\n      initialValues={AddLayerInitialValues}\r\n      \r\n      validationSchema={AddLayerValidationSchema}   \r\n\r\n      onSubmit={(values, { setSubmitting  }) => {\r\n        props.addLayer(values);\r\n        props.closeModal();\r\n      }}\r\n    >\r\n\r\n      <Form>\r\n        <h3 className='modalHeader'>\r\n          Add New Layer&nbsp;\r\n          <TooltipIcon tooltipName={TooltipText.AddNewLayer}/>\r\n        </h3>\r\n        <label className='textInputLabel' \r\n               htmlFor='url'>\r\n            Url&nbsp;\r\n        </label>\r\n        <TooltipIcon tooltipName={TooltipText.LayerUrl}/>\r\n        <div className='inputGroup'>\r\n          <Field as='textarea' name='url' />\r\n        </div>\r\n       \r\n       <LayerTypeRadioGroup name='layer_type' />\r\n       \r\n       <ConditionalLayerFields name='brrr' />\r\n      \r\n        <div className='inputGroup'>\r\n            <label className='textInputLabel' \r\n                   htmlFor='display_name'>\r\n                Display Name\r\n            </label>\r\n            <Field name='display_name' type='text' />\r\n            <ErrorMessage className='error' \r\n                          component='div' \r\n                          name='display_name' />\r\n        </div>\r\n\r\n        <div className='inputGroup'>\r\n            <label className='textInputLabel' \r\n                   htmlFor='thumbnail_path'>\r\n                Thumbnail location (optional)\r\n            </label>\r\n            <Field name='thumbnail_path' type='text' />\r\n            <ErrorMessage className='error' \r\n                          component='div' \r\n                          name='thumbnail_path' />\r\n        </div>\r\n\r\n        <div className='inputGroup'>\r\n            <label className='textInputLabel' \r\n                   htmlFor='format'>\r\n                Image Format (optional)\r\n            </label>\r\n            <Field name='format' type='text' />\r\n            <ErrorMessage className='error' \r\n                          component='div' \r\n                          name='format' />\r\n        </div>\r\n\r\n        <br/>\r\n        <button type='submit'>OK</button>\r\n        <button type='button' onClick={props.closeModal}>Cancel</button>\r\n      </Form>\r\n\r\n    </Formik>\r\n\r\n  );\r\n};\r\n\r\n\r\nexport default AddLayerItemForm;","import React from 'react';\r\nimport { library } from '@fortawesome/fontawesome-svg-core';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faMap, faPlus} from '@fortawesome/free-solid-svg-icons';\r\nimport AddLayerItemForm from './AddLayerItemForm';\r\nimport { isMobile } from './Util';\r\nimport Item from './Item';\r\n\r\nclass AddLayerItem extends Item {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.Config = window.sideby.Config;\r\n    library.add(faMap);\r\n    library.add(faPlus);\r\n    this.onClick = this.onClick.bind(this);\r\n    this.state = {isToggledOn: false};\r\n    this.modalType = 'AddLayerItem';\r\n  }\r\n \r\n  onClick(e) {\r\n    let modalContent = <AddLayerItemForm {...this.props} />\r\n    this.props.openModal('AddLayerItem', modalContent);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <button className='add-layer item background-black' \r\n          onClick={this.onClick}\r\n          data-tip='Add Comparison Layer'\r\n          data-for='modal' \r\n          data-place='top'\r\n          data-event='mouseover'\r\n          data-delay-show='900'\r\n          data-event-off='mouseout'\r\n          data-tip-disable={isMobile} \r\n          name='Add Layer'\r\n          id='add-layer'>\r\n        <div className='icon-label'>\r\n          <span className='fa-layers fa-fw fa-5x'>\r\n            <FontAwesomeIcon icon='map'/>\r\n            <FontAwesomeIcon icon='plus' transform='shrink-5' color='white' />\r\n          </span>\r\n        </div>\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AddLayerItem;\r\n","import React from 'react';\r\nimport { library } from '@fortawesome/fontawesome-svg-core';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faTrashAlt} from '@fortawesome/free-solid-svg-icons';\r\nimport { isMobile } from './Util';\r\nimport Item from './Item';\r\n\r\nclass DeleteLayersItem extends Item {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.Config = window.sideby.Config;\r\n    library.add(faTrashAlt);\r\n    this.onClick = this.onClick.bind(this);\r\n    this.state = {isToggledOn: false};\r\n  }\r\n \r\n  onClick(e) {\r\n    this.props.toggleDeleteMode(!this.props.deleteModeActive);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <button className={this.props.deleteModeActive ? 'item background-black deleteModeOn':'item background-black deleteModeOff'} \r\n          onClick={this.onClick}\r\n          data-tip='Delete Layers'\r\n          data-for='modal'\r\n          data-place='top' \r\n          data-event='mouseover'\r\n          data-delay-show='900'\r\n          data-event-off='mouseout'\r\n          data-tip-disable={isMobile} \r\n\r\n          name='Delete Layers'\r\n          id='delete-layers'>\r\n        <div className='icon-label'>\r\n            <FontAwesomeIcon icon='trash-alt' size='5x'/>\r\n        </div>\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DeleteLayersItem;\r\n","import React, { Component } from 'react';\r\nimport { library } from '@fortawesome/fontawesome-svg-core';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faAngleLeft, faAngleRight } from '@fortawesome/free-solid-svg-icons';\r\nimport './ScrollButton.css';\r\n\r\nlibrary.add(faAngleLeft);\r\nlibrary.add(faAngleRight);\r\n\r\nclass ScrollButton extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.onClick = this.onClick.bind(this);\r\n  }\r\n \r\n  onClick(e) {\r\n    this.props.onClick(this.props.direction);\r\n  }\r\n\r\n  render() {\r\n    let arrow = this.props.direction === 'left' ? 'angle-left' : 'angle-right';\r\n    return (\r\n      <div className={'ScrollButton ' + this.props.direction}\r\n           onClick={this.onClick}>  \r\n          <button><FontAwesomeIcon icon={arrow} size='lg'/></button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ScrollButton;\r\n\r\n","import React, { Component } from 'react';\r\nimport { cloneDeep } from 'lodash';\r\nimport Item from './Item';\r\nimport AddLayerItem from './AddLayerItem';\r\nimport DeleteLayersItem from './DeleteLayersItem';\r\nimport ScrollButton from './ScrollButton';\r\n//import LayersInfo from './LayersInfo';\r\nimport './ViewBar.css';\r\n\r\nclass ViewBar extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleItemClick = this.handleItemClick.bind(this);\r\n    this.handleScrollButtonClick = this.handleScrollButtonClick.bind(this);\r\n    this.scrollTo = this.scrollTo.bind(this);\r\n    this.onWheel = this.onWheel.bind(this);\r\n    this.easeInOutQuad = this.easeInOutQuad.bind(this);\r\n    this.state = {};\r\n  }\r\n\r\n  handleItemClick(data) {\r\n    let id = data.id;\r\n    let newState = cloneDeep(this.state);\r\n\r\n    newState.layers.forEach( (lyr,index) => {\r\n      if (lyr.id === id) {\r\n        newState.layers[index] = data;\r\n      }\r\n    });\r\n\r\n    this.setState(newState);   \r\n    this.props.onItemClick(data);\r\n  }\r\n\r\n  handleScrollButtonClick(scrollDirection) {\r\n    this.scrollTo(scrollDirection, 350);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState){\r\n    if (this.props.newLayer){\r\n\r\n      if (prevProps.newLayer && (prevProps.newLayer.id === this.props.newLayer.id)) {\r\n        return\r\n      }\r\n\r\n      let newLayer = this.props.newLayer;\r\n      let layers = this.state.layers;\r\n    \r\n      layers.push(newLayer);\r\n\r\n      this.setState({'layers': layers});\r\n    }\r\n\r\n    if (this.props.viewbarLayers && this.props.viewbarLayers.length !== this.state.layers.length){\r\n      this.setState({'layers': this.props.viewbarLayers});\r\n    }\r\n  }\r\n\r\n  componentDidMount(prevProps, prevState){\r\n    //for the initial app load, set state using LayersInfo\r\n    this.setState({'layers': this.props.viewbarLayers});\r\n  }\r\n\r\n  onWheel(e){\r\n    let elem  = document.getElementById('viewbarItems'),\r\n        scrollUnit = 50,\r\n\r\n        // deltaMode indicates if the deltaY value is pixels or lines (0 for pixels, 1 for lines, 2 for page)\r\n        deltaMode = e.deltaMode,\r\n\r\n        //if the deltamode is anything but pixels (0), use scroll unit to calculate scroll amount\r\n        scrollSize = deltaMode === (1 || 2) ? e.deltaY * scrollUnit: e.deltaY;\r\n\r\n    elem.scrollLeft = elem.scrollLeft + scrollSize;\r\n  }\r\n\r\n  scrollTo(direction, duration) {\r\n    let elem  = document.getElementById('viewbarItems'),\r\n        start = elem.scrollLeft,\r\n        clientWidth = document.documentElement.clientWidth,\r\n        moveSize = Math.max(clientWidth/2, 300),\r\n        change = direction === 'left' ? -moveSize : +moveSize,\r\n        currentTime = 0,\r\n        increment = 20,\r\n        that = this;\r\n        \r\n    let animateScroll = function(){        \r\n        currentTime += increment;\r\n        let val = that.easeInOutQuad(currentTime, start, change, duration);\r\n        elem.scrollLeft = val;\r\n        if(currentTime < duration) {\r\n            setTimeout(animateScroll, increment);\r\n        }\r\n    };\r\n    animateScroll();\r\n  }\r\n\r\n  //t = current time\r\n  //b = start value\r\n  //c = change in value\r\n  //d = duration\r\n  easeInOutQuad(t, b, c, d) {\r\n    t /= d/2;\r\n    if (t < 1) return c/2*t*t + b;\r\n    t--;\r\n    return -c/2 * (t*(t-2) - 1) + b;\r\n  }\r\n\r\n  render() {\r\n    const items = this.state.layers || [];\r\n    let deleteModeActive = this.props.deleteModeActive;\r\n\r\n    return (\r\n      <footer id='Viewbar' className='ViewBar-container bottom'>\r\n        <ScrollButton direction='left' onClick={this.handleScrollButtonClick}/>\r\n\r\n         <div onWheel={this.onWheel} onScroll={this.onScroll} scrollleft={this.state.scrollLeft} className='flip-move' id='viewbarItems'>\r\n           \r\n           {items.map(item => <Item\r\n                deleteModeActive={deleteModeActive} \r\n                deleteLayer={this.props.deleteLayer}\r\n                numberOfLayersOn={this.props.numberOfLayersOn}\r\n                key={item.id} \r\n                onItemClick={this.handleItemClick}\r\n                openModal={this.props.openModal}\r\n                closeModal={this.props.closeModal}\r\n                rebuildTooltip={this.props.rebuildTooltip}\r\n                {...item}\r\n              />)}\r\n\r\n            <AddLayerItem \r\n              rebuildTooltip={this.props.rebuildTooltip}\r\n              numberOfLayersOn={this.props.numberOfLayersOn} \r\n              openModal={this.props.openModal}\r\n              closeModal={this.props.closeModal}\r\n              addLayer={this.props.addLayer} \r\n              />\r\n\r\n            {items.length > 0 &&\r\n              <DeleteLayersItem\r\n                rebuildTooltip={this.props.rebuildTooltip}\r\n                deleteModeActive={deleteModeActive} \r\n                toggleDeleteMode={this.props.toggleDeleteMode}\r\n                />\r\n            }\r\n          </div>\r\n        <ScrollButton direction='right' onClick={this.handleScrollButtonClick}/>\r\n      </footer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ViewBar;\r\n","import React, { Component } from 'react';\r\nimport ReactModal from 'react-modal';\r\nimport './Modal.css';\r\nimport './ModalButton.css';\r\nimport './Table.css';\r\n\r\nReactModal.setAppElement('#root');\r\n\r\nclass Modal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.formatContent = this.formatContent.bind(this);\r\n    this.afterOpenModal = this.afterOpenModal.bind(this);\r\n    this.handleCloseModal = this.handleCloseModal.bind(this);\r\n    this.ref = React.createRef(null);\r\n    this.getParent = this.getParent.bind(this);\r\n    this.state={};\r\n  }\r\n\r\n formatContent(modalType, modalContent) {\r\n    let content = <div id='modalContent'>\r\n                    {modalContent}\r\n                  </div>;\r\n    return content;\r\n  }\r\n\r\n  afterOpenModal() {\r\n    // references are now sync'd and can be accessed.\r\n    this.props.rebuildTooltip(true);\r\n  }\r\n\r\n  getParent() {\r\n    return document.querySelector('#modalRoot');\r\n  }\r\n\r\n  handleCloseModal() {\r\n    this.props.closeModal();\r\n  } \r\n\r\n  render() {\r\n  \tlet content = this.formatContent(this.props.modalType, this.props.modalContent);\r\n    //let options = this.props.modalOptions || {};\r\n  \treturn <ReactModal\r\n          id='modalContainer'\r\n          ref={this.ref}\r\n          closeTimeoutMS={500}\r\n          className='Modal-Content'\r\n          key={'modal'}\r\n          isOpen={this.props.isOpen}\r\n          onAfterOpen={this.afterOpenModal}\r\n          onRequestClose={this.handleCloseModal}\r\n          parentSelector={this.getParent}\r\n          contentLabel='Modal'>\r\n    \t{content}\r\n \r\n     </ReactModal>\r\n    \r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","import React, { Component } from 'react';\r\nimport ReactTooltip from 'react-tooltip';\r\nimport './Tooltip.css';\r\n\r\n\r\nclass Tooltip extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChange = this.onChange.bind(this);\r\n  }\r\n\r\n  resetRebuildTooltip() {\r\n    this.props.resetRebuildTooltip(false);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState){\r\n    if (this.props.rebuildTooltip === true) {\r\n      this.resetRebuildTooltip();\r\n    }\r\n      ReactTooltip.rebuild();\r\n  }\r\n\r\n  onChange() {\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n          <ReactTooltip \r\n              className='superHighZIndex' \r\n              effect='solid' \r\n              id='modal' \r\n              place='right'\r\n              multiline={true}\r\n              />\r\n          <ReactTooltip effect='solid' id='home' />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Tooltip;\r\n","import { withLeaflet } from 'react-leaflet';\r\nimport VectorGridDefault from 'react-leaflet-vectorgrid';\r\n\r\nconst VectorGrid = withLeaflet(VectorGridDefault);\r\n\r\nexport default VectorGrid;","import {Path, withLeaflet} from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport 'leaflet-wfst';\r\n\r\ntype Props = {\r\n  url: string \r\n} & WFSLayerProps\r\n\r\nclass WFSLayer extends Path<LeafletElement, Props> {\r\n  createLeafletElement(props: Props): LeafletElement {\r\n    const el = new L.WFS(this.getOptions(props))\r\n  \t\r\n    this.contextValue = {\r\n      ...props.leaflet,\r\n      layerContainer: el,\r\n      popupContainer: el,\r\n    }\r\n    return el\r\n  }\r\n\r\n  updateLeafletElement(fromProps: Props, toProps: Props) {\r\n    if (toProps.url !== fromProps.url) {\r\n      this.leafletElement.setUrl(toProps.url)\r\n    }\r\n  }\r\n}\r\n\r\nexport default withLeaflet(WFSLayer)\r\n","import PropTypes from 'prop-types';\r\nimport {GridLayer, withLeaflet} from 'react-leaflet';\r\nimport {tiledMapLayer} from 'esri-leaflet';\r\n\r\n class EsriTiledMapLayer extends GridLayer {\r\n  static propTypes = {\r\n    url: PropTypes.string.isRequired\r\n  };\r\n\r\n  createLeafletElement(props) {\r\n    return tiledMapLayer(props); \r\n  }\r\n}\r\n\r\nexport default withLeaflet(EsriTiledMapLayer);","import {MapLayer, withLeaflet} from 'react-leaflet';\r\nimport {dynamicMapLayer} from 'esri-leaflet';\r\n\r\ntype Props = {\r\n  url: string \r\n} & MapLayerProps\r\n\r\nclass EsriDynamicMapLayer extends MapLayer<LeafletElement, Props> {\r\n  createLeafletElement(props: Props): LeafletElement {\r\n  \tlet options = {...props, \"f\": \"image\"};\r\n    const el = dynamicMapLayer(\r\n      options\r\n    )\r\n    this.contextValue = { ...props.leaflet, popupContainer: el }\r\n    return el\r\n  }\r\n\r\n  updateLeafletElement(fromProps: Props, toProps: Props) {\r\n    if (toProps.url !== fromProps.url) {\r\n      this.leafletElement.setUrl(toProps.url)\r\n    }\r\n  }\r\n}\r\n\r\nexport default withLeaflet(EsriDynamicMapLayer)\r\n","import {MapLayer, withLeaflet} from 'react-leaflet';\r\nimport {featureLayer} from 'esri-leaflet';\r\n\r\ntype Props = {\r\n  url: string \r\n} & MapLayerProps\r\n\r\nclass EsriFeatureLayer extends MapLayer<LeafletElement, Props> {\r\n  createLeafletElement(props: Props): LeafletElement {\r\n  \tlet options = {...props};\r\n    const el = featureLayer(\r\n      options\r\n    )\r\n    this.contextValue = { ...props.leaflet, popupContainer: el }\r\n    return el\r\n  }\r\n\r\n  updateLeafletElement(fromProps: Props, toProps: Props) {\r\n    if (toProps.url !== fromProps.url) {\r\n      this.leafletElement.setUrl(toProps.url)\r\n    }\r\n  }\r\n}\r\n\r\nexport default withLeaflet(EsriFeatureLayer)\r\n","import {MapLayer, withLeaflet} from 'react-leaflet';\r\nimport {imageMapLayer} from 'esri-leaflet';\r\n\r\ntype Props = {\r\n  url: string\r\n} & MapLayerProps\r\n\r\nclass EsriImageLayer extends MapLayer<LeafletElement, Props> {\r\n  createLeafletElement(props: Props): LeafletElement {\r\n  \tlet options = {...props};\r\n    options.zIndex = 2;\r\n    const el = imageMapLayer(\r\n      options\r\n    )\r\n    this.contextValue = { ...props.leaflet, popupContainer: el }\r\n    return el\r\n  }\r\n\r\n  updateLeafletElement(fromProps: Props, toProps: Props) {\r\n    if (toProps.url !== fromProps.url) {\r\n      this.leafletElement.setUrl(toProps.url)\r\n    }\r\n  }\r\n}\r\n\r\nexport default withLeaflet(EsriImageLayer)\r\n","/*\r\n * L.Control.Loading is a control that shows a loading indicator when tiles are\r\n * loading or when map-related AJAX requests are taking place.\r\n */\r\nimport {Spinner} from 'spin.js';\r\nimport '../../node_modules/spin.js/spin.css';\r\nimport L from 'leaflet';\r\n\r\n(function () {\r\n\r\n    var console = window.console || {\r\n        error: function () {},\r\n        warn: function () {}\r\n    };\r\n\r\n    function defineLeafletLoading(L) {\r\n        L.Control.Loading = L.Control.extend({\r\n            options: {\r\n                delayIndicator: null,\r\n                position: 'topleft',\r\n                separate: false,\r\n                zoomControl: null,\r\n                spinjs: false,\r\n                spin: { \r\n                    lines: 7, \r\n                    length: 3, \r\n                    width: 3, \r\n                    radius: 5, \r\n                    rotate: 13, \r\n                    top: \"83%\"\r\n                }\r\n            },\r\n\r\n            initialize: function(options) {\r\n                L.setOptions(this, options);\r\n                this._dataLoaders = {};\r\n\r\n                // Try to set the zoom control this control is attached to from the \r\n                // options\r\n                if (this.options.zoomControl !== null) {\r\n                    this.zoomControl = this.options.zoomControl;\r\n                }\r\n            },\r\n\r\n            onAdd: function(map) {\r\n                if (this.options.spinjs && (typeof Spinner !== 'function')) {\r\n                    return console.error(\"Leaflet.loading cannot load because you didn't load spin.js (http://fgnass.github.io/spin.js/), even though you set it in options.\");\r\n                }\r\n                this._addLayerListeners(map);\r\n                this._addMapListeners(map);\r\n\r\n                // Try to set the zoom control this control is attached to from the map\r\n                // the control is being added to\r\n                if (!this.options.separate && !this.zoomControl) {\r\n                    if (map.zoomControl) {\r\n                        this.zoomControl = map.zoomControl;\r\n                    } else if (map.zoomsliderControl) {\r\n                        this.zoomControl = map.zoomsliderControl;\r\n                    }\r\n                }\r\n\r\n                // Create the loading indicator\r\n                var classes = 'leaflet-control-loading';\r\n                var container;\r\n                if (this.zoomControl && !this.options.separate) {\r\n                    // If there is a zoom control, hook into the bottom of it\r\n                    container = this.zoomControl._container;\r\n                    // These classes are no longer used as of Leaflet 0.6\r\n                    classes += ' leaflet-bar-part-bottom leaflet-bar-part last';\r\n\r\n                    // Loading control will be added to the zoom control. So the visible last element is not the\r\n                    // last dom element anymore. So add the part-bottom class.\r\n                    L.DomUtil.addClass(this._getLastControlButton(), 'leaflet-bar-part-bottom');\r\n                }\r\n                else {\r\n                    // Otherwise, create a container for the indicator\r\n                    container = L.DomUtil.create('div', 'leaflet-control-zoom leaflet-control-layer-container leaflet-bar');\r\n                }\r\n                this._indicatorContainer = container;\r\n                this._indicator = L.DomUtil.create('a', classes, container);\r\n                if (this.options.spinjs) {\r\n                    this._spinner = new Spinner(this.options.spin).spin();\r\n                    this._indicator.appendChild(this._spinner.el);\r\n                }\r\n                return container;\r\n            },\r\n\r\n            onRemove: function(map) {\r\n                this._removeLayerListeners(map);\r\n                this._removeMapListeners(map);\r\n            },\r\n\r\n            removeFrom: function (map) {\r\n                if (this.zoomControl && !this.options.separate) {\r\n                    // Override Control.removeFrom() to avoid clobbering the entire\r\n                    // _container, which is the same as zoomControl's\r\n                    this._container.removeChild(this._indicator);\r\n                    this._map = null;\r\n                    this.onRemove(map);\r\n                    return this;\r\n                }\r\n                else {\r\n                    // If this control is separate from the zoomControl, call the\r\n                    // parent method so we don't leave behind an empty container\r\n                    return L.Control.prototype.removeFrom.call(this, map);\r\n                }\r\n            },\r\n\r\n            addLoader: function(id) {\r\n                this._dataLoaders[id] = true;\r\n                if (this.options.delayIndicator && !this.delayIndicatorTimeout) {\r\n                    // If we are delaying showing the indicator and we're not\r\n                    // already waiting for that delay, set up a timeout.\r\n                    var that = this;\r\n                    this.delayIndicatorTimeout = setTimeout(function () {\r\n                        console.log(\"delayed.\");\r\n                        that.updateIndicator();\r\n                        that.delayIndicatorTimeout = null;\r\n                    }, this.options.delayIndicator);\r\n                }\r\n                else {\r\n                    // Otherwise show the indicator immediately\r\n                    this.updateIndicator();\r\n                }\r\n            },\r\n\r\n            removeLoader: function(id) {\r\n                delete this._dataLoaders[id];\r\n                this.updateIndicator();\r\n\r\n                // If removing this loader means we're in no danger of loading,\r\n                // clear the timeout. This prevents old delays from instantly \r\n                // triggering the indicator.\r\n                if (this.options.delayIndicator && this.delayIndicatorTimeout && !this.isLoading()) {\r\n                    clearTimeout(this.delayIndicatorTimeout);\r\n                    this.delayIndicatorTimeout = null;\r\n                }\r\n            },\r\n\r\n            updateIndicator: function() {\r\n                if (this.isLoading()) {\r\n                    this._showIndicator();\r\n                }\r\n                else {\r\n                    this._hideIndicator();\r\n                }\r\n            },\r\n\r\n            isLoading: function() {\r\n                return this._countLoaders() > 0;\r\n            },\r\n\r\n            _countLoaders: function() {\r\n                var size = 0, key;\r\n                for (key in this._dataLoaders) {\r\n                    if (this._dataLoaders.hasOwnProperty(key)) size++;\r\n                }\r\n                return size;\r\n            },\r\n\r\n            _showIndicator: function() {\r\n                // Show loading indicator\r\n                L.DomUtil.addClass(this._indicator, 'is-loading');\r\n                L.DomUtil.addClass(this._indicatorContainer, 'is-loading');\r\n\r\n                // If zoomControl exists, make the zoom-out button not last\r\n                if (!this.options.separate) {\r\n                    if (this.zoomControl instanceof L.Control.Zoom) {\r\n                        L.DomUtil.removeClass(this._getLastControlButton(), 'leaflet-bar-part-bottom');\r\n                    }\r\n                    else if (typeof L.Control.Zoomslider === 'function' && this.zoomControl instanceof L.Control.Zoomslider) {\r\n                        L.DomUtil.removeClass(this.zoomControl._ui.zoomOut, 'leaflet-bar-part-bottom');\r\n                    }\r\n                }\r\n            },\r\n\r\n            _hideIndicator: function() {\r\n                // Hide loading indicator\r\n                L.DomUtil.removeClass(this._indicator, 'is-loading');\r\n                L.DomUtil.removeClass(this._indicatorContainer, 'is-loading');\r\n\r\n                // If zoomControl exists, make the zoom-out button last\r\n                if (!this.options.separate) {\r\n                    if (this.zoomControl instanceof L.Control.Zoom) {\r\n                        L.DomUtil.addClass(this._getLastControlButton(), 'leaflet-bar-part-bottom');\r\n                    }\r\n                    else if (typeof L.Control.Zoomslider === 'function' && this.zoomControl instanceof L.Control.Zoomslider) {\r\n                        L.DomUtil.addClass(this.zoomControl._ui.zoomOut, 'leaflet-bar-part-bottom');\r\n                    }\r\n                }\r\n            },\r\n\r\n            _getLastControlButton: function() {\r\n                var container = this.zoomControl._container,\r\n                    index = container.children.length - 1;\r\n\r\n                // Find the last visible control button that is not our loading\r\n                // indicator\r\n                while (index > 0) {\r\n                    var button = container.children[index];\r\n                    if (!(this._indicator === button || button.offsetWidth === 0 || button.offsetHeight === 0)) {\r\n                        break;\r\n                    }\r\n                    index--;\r\n                }\r\n\r\n                return container.children[index];\r\n            },\r\n\r\n            _handleLoading: function(e) {\r\n                this.addLoader(this.getEventId(e));\r\n            },\r\n\r\n            _handleBaseLayerChange: function (e) {\r\n                var that = this;\r\n\r\n                // Check for a target 'layer' that contains multiple layers, such as\r\n                // L.LayerGroup. This will happen if you have an L.LayerGroup in an\r\n                // L.Control.Layers.\r\n                if (e.layer && e.layer.eachLayer && typeof e.layer.eachLayer === 'function') {\r\n                    e.layer.eachLayer(function (layer) {\r\n                        that._handleBaseLayerChange({ layer: layer });\r\n                    });\r\n                }\r\n                else {\r\n                    // If we're changing to a canvas layer, don't handle loading\r\n                    // as canvas layers will not fire load events.\r\n                    if (!(L.TileLayer.Canvas && e.layer instanceof L.TileLayer.Canvas)) {\r\n                        that._handleLoading(e);\r\n                    }\r\n                }\r\n            },\r\n\r\n            _handleLoad: function(e) {\r\n                this.removeLoader(this.getEventId(e));\r\n            },\r\n\r\n            getEventId: function(e) {\r\n                if (e.id) {\r\n                    return e.id;\r\n                }\r\n                else if (e.layer) {\r\n                    return e.layer._leaflet_id;\r\n                }\r\n                return e.target._leaflet_id;\r\n            },\r\n\r\n            _layerAdd: function(e) {\r\n                if (!e.layer || !e.layer.on) return\r\n                try {\r\n                    e.layer.on({\r\n                        loading: this._handleLoading,\r\n                        load: this._handleLoad\r\n                    }, this);\r\n                }\r\n                catch (exception) {\r\n                    console.warn('L.Control.Loading: Tried and failed to add ' +\r\n                                 ' event handlers to layer', e.layer);\r\n                    console.warn('L.Control.Loading: Full details', exception);\r\n                }\r\n            },\r\n\r\n            _layerRemove: function(e) {\r\n                if (!e.layer || !e.layer.off) return;\r\n                try {\r\n                    e.layer.off({\r\n                        loading: this._handleLoading,\r\n                        load: this._handleLoad\r\n                    }, this);\r\n                }\r\n                catch (exception) {\r\n                    console.warn('L.Control.Loading: Tried and failed to remove ' +\r\n                                 'event handlers from layer', e.layer);\r\n                    console.warn('L.Control.Loading: Full details', exception);\r\n                }\r\n            },\r\n\r\n            _addLayerListeners: function(map) {\r\n                // Add listeners for begin and end of load to any layers already on the \r\n                // map\r\n                map.eachLayer(function(layer) {\r\n                    if (!layer.on) return;\r\n                    layer.on({\r\n                        loading: this._handleLoading,\r\n                        load: this._handleLoad\r\n                    }, this);\r\n                }, this);\r\n\r\n                // When a layer is added to the map, add listeners for begin and end\r\n                // of load\r\n                map.on('layeradd', this._layerAdd, this);\r\n                map.on('layerremove', this._layerRemove, this);\r\n            },\r\n\r\n            _removeLayerListeners: function(map) {\r\n                // Remove listeners for begin and end of load from all layers\r\n                map.eachLayer(function(layer) {\r\n                    if (!layer.off) return;\r\n                    layer.off({\r\n                        loading: this._handleLoading,\r\n                        load: this._handleLoad\r\n                    }, this);\r\n                }, this);\r\n\r\n                // Remove layeradd/layerremove listener from map\r\n                map.off('layeradd', this._layerAdd, this);\r\n                map.off('layerremove', this._layerRemove, this);\r\n            },\r\n\r\n            _addMapListeners: function(map) {\r\n                // Add listeners to the map for (custom) dataloading and dataload\r\n                // events, eg, for AJAX calls that affect the map but will not be\r\n                // reflected in the above layer events.\r\n                map.on({\r\n                    baselayerchange: this._handleBaseLayerChange,\r\n                    dataloading: this._handleLoading,\r\n                    dataload: this._handleLoad,\r\n                    layerremove: this._handleLoad\r\n                }, this);\r\n            },\r\n\r\n            _removeMapListeners: function(map) {\r\n                map.off({\r\n                    baselayerchange: this._handleBaseLayerChange,\r\n                    dataloading: this._handleLoading,\r\n                    dataload: this._handleLoad,\r\n                    layerremove: this._handleLoad\r\n                }, this);\r\n            }\r\n        });\r\n\r\n        L.Map.addInitHook(function () {\r\n            if (this.options.loadingControl) {\r\n                this.loadingControl = new L.Control.Loading();\r\n                this.addControl(this.loadingControl);\r\n            }\r\n        });\r\n\r\n        L.Control.loading = function(options) {\r\n            return new L.Control.Loading(options);\r\n        };\r\n    }\r\n\r\n        defineLeafletLoading(L);\r\n    \r\n\r\n})();\r\n","import { MapControl, withLeaflet } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport './Leaflet.loading/Control.Loading.js';\r\nimport './Leaflet.loading/Control.Loading.css';\r\nimport './LeafletLoadingControl.css';\r\n\r\n\r\nclass LeafletLoadingControl extends MapControl {\r\n\r\n  createLeafletElement(props) {\r\n  \tlet opts = props.opts;\r\n    return new L.Control.Loading(opts); \r\n  }\r\n}\r\n\r\nexport default withLeaflet(LeafletLoadingControl);","import React, { Component } from 'react';\r\nimport { cloneDeep } from 'lodash';\r\nimport { library } from '@fortawesome/fontawesome-svg-core';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faGripVertical } from '@fortawesome/free-solid-svg-icons';\r\nimport { Map, TileLayer, WMSTileLayer, Marker } from 'react-leaflet';\r\nimport WMTSTileLayer from 'react-leaflet-wmts';\r\nimport VectorGrid from './VectorGrid';\r\nimport WFSLayer from './WFSLayer';\r\nimport EsriTiledMapLayer from './EsriTiledMapLayer';\r\nimport EsriDynamicMapLayer from './EsriDynamicMapLayer';\r\nimport EsriFeatureLayer from './EsriFeatureLayer';\r\nimport EsriImageLayer from './EsriImageLayer';\r\nimport LeafletLoadingControl from './LeafletLoadingControl';\r\nimport 'leaflet.sync';\r\nimport { deleteArrayofKeys } from './Util';\r\n// import {mapboxToken, \r\n//         labelLayerUrl, \r\n//         mapMinZoom, \r\n//         mapDefaultZoom, \r\n//         mapDefaultCenter} from './Config';\r\nimport './MapWrapper.css'\r\nimport './Handle.css';\r\n\r\nlibrary.add(faGripVertical);\r\n\r\nclass Handle extends React.Component {\r\n  render() {\r\n    const { provided, display_name } = this.props;\r\n    return (\r\n      <div className='Handle map-title'>\r\n         <span className='Handle-span' {...provided.dragHandleProps}>\r\n          <FontAwesomeIcon className='Handle-drag-icon' icon='grip-vertical' size='1x'/>\r\n        </span>\r\n         &nbsp;{display_name.length > 20 ? display_name.slice(0, 20)+'...' : display_name}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nclass MapWrapper extends Component {\r\n  \r\n  constructor(props, context) {\r\n    super(props)\r\n    this.Config = window.sideby.Config;\r\n    this.mapboxToken = this.Config.mapboxToken;\r\n    this.labelLayerUrl = this.Config.labelLayerUrl + this.mapboxToken;\r\n\r\n    const DEFAULT_VIEWPORT = {\r\n      center: this.Config.mapDefaultCenter,\r\n      zoom: this.Config.mapDefaultZoom\r\n    }\r\n    this.viewport = DEFAULT_VIEWPORT;\r\n    //this.props.mapCenter(this.viewport.center);\r\n    this.invalidateMapSizes = this.invalidateMapSizes.bind(this);\r\n    this.syncMaps = this.syncMaps.bind(this);\r\n    this.unsyncMaps = this.unsyncMaps.bind(this);\r\n    this.moveend = this.moveend.bind(this);\r\n    this.onViewportChanged = this.onViewportChanged.bind(this);\r\n    this.passUpRef = this.passUpRef.bind(this);\r\n    this.onResize = this.onResize.bind(this);\r\n    this.onGeocodeClick = this.onGeocodeClick.bind(this);\r\n    this.bboxStringToLatLngBoundsArray = this.bboxStringToLatLngBoundsArray.bind(this);\r\n    this.checkLayerBounds = this.checkLayerBounds.bind(this);\r\n\r\n    // The following parameters are not passed on to the map layer. This\r\n    // was originally implemented to avoid confusing WMS servers, and\r\n    // there may be unintended consequences.\r\n    this.layerOptionBlacklist = ['minZoom', 'maxZoom', 'isToggledOn',\r\n         'visibleIndex','id','start_bounds','thumbnail_path',\r\n         'display_name','numberOfLayersOn','deleteLayer','closeModal', \r\n         'openModal','rebuildTooltip', 'leaflet','layer_type','row'];\r\n    //this.layerOptionBlacklist = [];\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    this.passUpRef(this.props.layer.id, this.props.mapRef, true);\r\n  \r\n    }\r\n\r\n componentDidMount(prevProps, prevState){\r\n    this.passUpRef(this.props.layer.id, this.props.mapRef);\r\n  }\r\n\r\n  // shouldComponentUpdate(nextProps, nextState) {\r\n  //   return true;\r\n  // }\r\n  \r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevProps.layer.visibleIndex !== \r\n          this.props.layer.visibleIndex) {\r\n\r\n    }\r\n  }\r\n\r\n  onResize(e) {\r\n    //console.log('resize');\r\n  }\r\n\r\n  moveend(e) {\r\n\r\n  }\r\n  \r\n  invalidateMapSizes() {\r\n    this.props.invalidateMapSizes();\r\n  }\r\n  \r\n\r\n  unsyncMaps(ref_id) {\r\n     this.props.unsyncMaps(ref_id);\r\n  }\r\n\r\n  syncMaps() {\r\n    this.props.syncMaps();\r\n  }\r\n\r\n  passUpRef(id, ref, deleteRef=false) {\r\n    this.setState({mapRef: ref});\r\n    this.props.passUpRef(id, ref, deleteRef);\r\n  }\r\n\r\n  bboxStringToLatLngBoundsArray(){\r\n      var a = this.props.layer.start_bounds.split(',');\r\n      return [[a[1],a[0]], [a[3],a[2]]];\r\n  }; \r\n\r\n  checkLayerBounds(){\r\n    let layer = this.props.layer;\r\n    \r\n    if (layer.start_bounds) {\r\n      return this.bboxStringToLatLngBoundsArray()\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n\r\n  clearGeocode() {\r\n    this.props.clearGeocode();\r\n  }\r\n\r\n  onGeocodeClick() {\r\n    this.clearGeocode();\r\n  }\r\n\r\n  onViewportChanged(viewport) { \r\n    //putting viewport into state results in (near) infinite loop of componentdidupdates\r\n    //probably because L.sync is not react-ified\r\n    //so just use good ole generic this.viewport instead\r\n    this.viewport = viewport;\r\n  }\r\n\r\n  render() {\r\n    const layer_components = {\r\n      'EsriFeatureLayer': EsriFeatureLayer,\r\n      'EsriTiledMapLayer': EsriTiledMapLayer,\r\n      'EsriImageLayer': EsriImageLayer,\r\n      'EsriDynamicMapLayer': EsriDynamicMapLayer,\r\n      'TileLayer': TileLayer,\r\n      'WMSTileLayer': WMSTileLayer,\r\n      'WMTSTileLayer': WMTSTileLayer,\r\n      'WFSLayer': WFSLayer\r\n    }\r\n\r\n    const overlays = this.props.overlays;\r\n    const Overlays = () => {return (\r\n      <>\r\n        {overlays.map(layer => {\r\n          let Overlay = layer_components[layer.layer_type];\r\n          return  (\r\n            <Overlay  \r\n                format='image/png8' \r\n                transparent='true'\r\n                url={layer.url}\r\n                key={layer.id}\r\n                zIndex={layer.is_basemap ? 1 : 100000}\r\n                pane={layer.is_basemap ? 'tilePane' : 'overlayPane'}\r\n                {...deleteArrayofKeys(cloneDeep(layer), this.layerOptionBlacklist)}\r\n                />\r\n          )\r\n        })}\r\n      </>)\r\n    };\r\n    const layer = cloneDeep(this.props.layer);\r\n    let that = this;\r\n    let Layer = layer_components[layer.layer_type];\r\n    const { provided } = this.props;\r\n\r\n    // Use ids from layers array to create list of urls\r\n    return (<div\r\n              {...provided.draggableProps}\r\n              ref={provided.innerRef}>\r\n              <Handle provided={provided} display_name={layer.display_name} />\r\n              <Map ref={this.props.mapRef}\r\n                 minZoom={this.Config.mapMinZoom}\r\n                 bounds={this.checkLayerBounds()}\r\n                 onResize={this.onResize}\r\n                 maxZoom={layer.maxZoom}\r\n                 onViewportChanged={that.onViewportChanged}\r\n                 className ={'map'+ this.props.numberLayers + (this.props.isDragging ? 'dragging': 'nope')}  \r\n                 id={layer.id}\r\n                 key={layer.id} \r\n                 viewport={that.viewport}\r\n                 zoomControlAdded={true}\r\n                 loadingControl={true}\r\n                 preferCanvas={true} //fixes window resizing bug, for now...\r\n                 >\r\n                <LeafletLoadingControl opts={{\r\n                    position: 'bottomleft',\r\n                    spinjs: true,\r\n                    separate: true,\r\n                    //delayIndicator: 1000, //this doesn't actually seem to work...\r\n                    spin:{\r\n                      lines: 15,\r\n                      length: 10,\r\n                      width: 3,\r\n                      radius: 15,\r\n                      color: '#ffffff',\r\n                      left:'100%',\r\n                      top:'-25%', \r\n                      fadeColor: 'black',\r\n                      shadow: '0 0 5px black'\r\n                    }\r\n                  }}/>\r\n\r\n                {this.props.geocodeResult &&\r\n                  <Marker position={this.props.geocodeResult}\r\n                          onClick={this.onGeocodeClick}/>\r\n                }\r\n\r\n                {this.props.labelLayerOn &&\r\n                  <TileLayer \r\n                    key={'labels-' + layer.id}\r\n                    url={this.labelLayerUrl}\r\n                    pane='shadowPane'\r\n                    zIndex={1000000} />\r\n                }\r\n                  \r\n                {this.props.overlays.length > 0 && <Overlays />}\r\n\r\n                <Layer \r\n                  key={layer.id} \r\n                  zIndex={1000000}\r\n                  {...deleteArrayofKeys(layer, this.layerOptionBlacklist)}\r\n                />\r\n              \r\n\r\n            </Map>\r\n          </div>\r\n    )\r\n  }\r\n}  \r\n\r\n\r\nexport default React.forwardRef((props, ref) => <MapWrapper mapRef={ref} {...props} />);\r\n\r\n","import React from 'react';\r\nimport { Draggable } from 'react-beautiful-dnd';\r\nimport MapWrapper from './MapWrapper';\r\nimport './RowContainer.css';\r\n\r\nclass RowContainer extends React.Component {\r\n\r\n  render() {\r\n    const { provided, layers } = this.props;\r\n\r\n  \tlet maps = layers.map((layer, index) => (\r\n\t\t<Draggable draggableId={'draggable-'+layer.id} \r\n\t\t\t\t   key={'draggable-'+layer.id} \r\n\t\t\t\t   index={index}>\r\n\t\t \t{(provided, snapshot) => (\r\n\t\t  \t<MapWrapper\r\n\t\t        layer={layer}\r\n\t\t        overlays={this.props.overlays}\r\n\t\t        numberLayers={layers.length}\r\n\t\t        innerRef={provided.innerRef}\r\n\t\t        key={layer.id}\r\n\t\t        layerIndex={index}\r\n\t\t        provided={provided}\r\n\t\t        isDragging={snapshot.isDragging}\r\n\t\t        passUpRef={this.props.passUpRef}\r\n\t\t        mapRef={this.props.mapRef}\r\n\t\t        syncMaps={this.props.syncMaps}\r\n\t\t        geocodeResult={this.props.geocodeResult}\r\n\t\t        clearGeocode={this.props.clearGeocode}\r\n\t\t        unsyncMaps={this.props.unsyncMaps}\r\n\t\t        labelLayerOn={this.props.labelLayerOn}\r\n\t\t        invalidateMapSizes={this.props.invalidateMapSizes}\r\n\t\t        />\r\n\t\t \t)}\r\n\t  </Draggable>\r\n    ));\r\n\r\n\r\n    return (\r\n    \t\r\n      <div className={this.props.className} \r\n      \t   ref={provided.innerRef}\r\n      \t   {...provided.droppableProps}>\r\n      \t{maps}\r\n        {provided.placeholder}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default React.forwardRef((props, ref) => <RowContainer mapRef={ref} {...props} />);;","import React, { Component } from 'react';\r\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd';\r\n// import * as L from 'leaflet';\r\nimport { isEqual } from 'lodash';\r\nimport RowContainer from './RowContainer';\r\nimport { findWithAttr, moveWithinArray, compareArrays } from './Util';\r\n\r\nclass MapsContainer extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.onDragEnd = this.onDragEnd.bind(this);\r\n    this.setMapRef = this.setMapRef.bind(this);\r\n    this.syncMaps = this.syncMaps.bind(this);\r\n    this.unsyncMaps = this.unsyncMaps.bind(this);\r\n    this.invalidateMapSizes = this.invalidateMapSizes.bind(this);\r\n    this.handleGeocode = this.handleGeocode.bind(this);\r\n    this.clearGeocode = this.clearGeocode.bind(this);\r\n    this.state = {'mapRefs': {}}\r\n    this.passUpRef = this.passUpRef.bind(this);\r\n  }\r\n\r\n  passUpRef(id, ref, deleteRef) {\r\n    let mapRefs = {'mapRefs': this.state.mapRefs};\r\n\r\n    if (deleteRef) {\r\n      this.unsyncMaps(id);\r\n      delete(mapRefs.mapRefs[id]);\r\n      this.setState(mapRefs);\r\n    }\r\n    else {\r\n      this.manageZoomControls();\r\n      this.syncMaps();\r\n    }\r\n    this.invalidateMapSizes();\r\n  }\r\n\r\n setMapRef(DOMNode) {\r\n    let mapRefs = {'mapRefs': this.state.mapRefs};\r\n\r\n    if (DOMNode) {\r\n      mapRefs.mapRefs[DOMNode.container.id] = DOMNode;\r\n      this.setState(mapRefs);\r\n    }\r\n  }\r\n\r\n\r\n onDragEnd(draggedLayer) {\r\n\r\n    if (draggedLayer.destination === null) {\r\n      return;\r\n    }\r\n\r\n    let allLayers = this.props.layers;\r\n    let currentRow = draggedLayer.source.droppableId;  \r\n    let destRow = draggedLayer.destination.droppableId; \r\n    let currentLayerIndex, destinationIndex;\r\n    \r\n    if (currentRow === 'row2') {\r\n      currentLayerIndex = allLayers.filter(i => i.row === 'row1').length + draggedLayer.source.index;\r\n    }\r\n    else if (currentRow === 'row3') {\r\n      currentLayerIndex = allLayers.filter(i => i.row === 'row1').length + \r\n                          allLayers.filter(i => i.row === 'row2').length +\r\n                          draggedLayer.source.index;\r\n    }\r\n    else {\r\n      currentLayerIndex = draggedLayer.source.index;\r\n    }\r\n\r\n    if (destRow === 'row2') {\r\n      destinationIndex = allLayers.filter(i => i.row === 'row1').length + \r\n                          draggedLayer.destination.index;\r\n    }\r\n    else if (destRow === 'row3') {\r\n      destinationIndex = allLayers.filter(i => i.row === 'row1').length + \r\n                          allLayers.filter(i => i.row === 'row2').length +\r\n                          draggedLayer.destination.index;\r\n    }\r\n    else {\r\n      destinationIndex = draggedLayer.destination.index;\r\n    }\r\n\r\n    let allTurnedOnLayers = allLayers.filter(i => i.isToggledOn);\r\n    \r\n    moveWithinArray(allTurnedOnLayers, currentLayerIndex, destinationIndex);\r\n \t  \r\n    this.props.updateLayerDisplayIndexesAndRows(allTurnedOnLayers);\r\n  \r\n  }\r\n\r\n\r\n  manageZoomControls() { \r\n    let mapRefs = this.state.mapRefs;\r\n    let layers = this.props.layers;\r\n    var map, lyr, zoomControlNeeded;\r\n\r\n    for (let i in mapRefs){ \r\n    \r\n      map = mapRefs[i].leafletElement;\r\n      lyr = layers[findWithAttr(layers, 'id', i)];\r\n      zoomControlNeeded = lyr.visibleIndex === 0 ? true : false;\r\n      \r\n      if (zoomControlNeeded){\r\n          \r\n          map.removeControl(map.zoomControl);\r\n          map.addControl(map.zoomControl);\r\n          \r\n      }\r\n\r\n      else {\r\n        map.removeControl(map.zoomControl);\r\n\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  invalidateMapSizes() {\r\n    let mapRefs = this.state.mapRefs;\r\n    for (let i in mapRefs){ \r\n      mapRefs[i].leafletElement.invalidateSize();\r\n    }\r\n  }\r\n\r\n  unsyncMaps(ref_id) {\r\n    let mapRefs = this.state.mapRefs;\r\n    for (var i in mapRefs){\r\n      if (i !== ref_id && mapRefs[ref_id]){\r\n          mapRefs[ref_id].leafletElement.unsync(mapRefs[i].leafletElement);\r\n          mapRefs[i].leafletElement.unsync(mapRefs[ref_id].leafletElement);\r\n      }\r\n    }\r\n  }\r\n\r\n  syncMaps() {\r\n    let mapRefs = this.state.mapRefs;\r\n    for (var i in mapRefs){\r\n      for (var j in mapRefs){\r\n        if (i !== j && !mapRefs[i].leafletElement.isSynced(mapRefs[j].leafletElement)){\r\n          mapRefs[i].leafletElement.sync(\r\n            mapRefs[j].leafletElement, {syncCursor: true}\r\n          );           \r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  clearGeocode() {\r\n  \tthis.setState({'geocodeResult': false});\r\n  }\r\n\r\n  handleGeocode(geocodeResult){\r\n  \t//maybe move this to mapwrapper? other than setting state w/ center that is\r\n  \tlet randomMap = Object.entries(this.state.mapRefs)[0][1];\r\n    let bbox = this.props.geocodeResult.geocode.bbox;\r\n    let center = this.props.geocodeResult.geocode.center;\r\n\r\n    if (bbox._northEast.lat !== bbox._southWest.lat){\r\n      randomMap.leafletElement.fitBounds(bbox);\r\n    }\r\n\r\n    else {\r\n      randomMap.leafletElement.setView(center, 15);\r\n    }\r\n    this.setState({'geocodeResult': center});\r\n    setTimeout(this.clearGeocode, 2000);\r\n\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState){\r\n    let prevLyrs = prevProps.layers;\r\n    let lyrs = this.props.layers;\r\n\r\n    if (prevLyrs.filter(i => i.isToggledOn).length !== \r\n         lyrs.filter(i => i.isToggledOn).length) \r\n    {\r\n      this.invalidateMapSizes();\r\n    }\r\n\r\n    else if (!compareArrays(prevLyrs, lyrs))\r\n    {\r\n      setTimeout(this.invalidateMapSizes, 400);\r\n    }\r\n    if (prevLyrs.length === lyrs.length && !isEqual(prevLyrs.map(lyr => lyr.display_name+lyr.visibleIndex.toString()),\r\n          lyrs.map(lyr => lyr.display_name+lyr.visibleIndex.toString()))){\r\n            this.manageZoomControls();\r\n          }\r\n\r\n    if (prevProps.geocodeResult !== this.props.geocodeResult) {\r\n      this.handleGeocode(this.props.geocodeResult);\r\n    }\r\n\r\n    //this prop is used by non-map componenets upstream (well, for now, only HideViewbar)\r\n    if (this.props.invalidateMapSizes) {\r\n      this.invalidateMapSizes();\r\n      this.props.toggleInvalidateMapSizes(false);\r\n    }\r\n\r\n  }\r\n\r\n  render() {\r\n  \tlet layers = this.props.layers.filter(lyr => lyr.isToggledOn);\r\n  \tlet numberRows = [];\r\n    layers.forEach(lyr => {\r\n    \tnumberRows.push(lyr.row);\r\n    });\r\n    numberRows = new Set(numberRows);\r\n    numberRows = [...numberRows];\r\n\r\n    let row1Layers = layers.filter(i => i.row === 'row1');\r\n    row1Layers.sort((a, b) => a.visibleIndex - b.visibleIndex);\r\n    let row2Layers = layers.filter(i => i.row === 'row2');\r\n    row2Layers.sort((a, b) => a.visibleIndex - b.visibleIndex);\r\n    let row3Layers = layers.filter(i => i.row === 'row3');\r\n    row2Layers.sort((a, b) => a.visibleIndex - b.visibleIndex);\r\n    \r\n\r\n    let rows = numberRows.map( (val, index) => { \r\n      return (\r\n        <Droppable droppableId={val} key={val} direction='horizontal'>\r\n          {(provided, snapshot) => (\r\n            <RowContainer className={'Row ' + val + (numberRows.length === 2 ? ' two-rows' : numberRows.length=== 3 ? ' three-rows': '')} \r\n                  provided={provided}\r\n                  snapshot={snapshot}\r\n                  passUpRef={this.passUpRef}\r\n\t\t\t\t          geocodeResult={this.state.geocodeResult}\r\n\t\t\t\t          clearGeocode={this.clearGeocode}\r\n                  mapRef={this.setMapRef} \r\n                  innerRef={provided.innerRef}\r\n                  syncMaps={this.syncMaps}\r\n                  labelLayerOn={this.props.labelLayerOn}\r\n                  unsyncMaps={this.unsyncMaps}\r\n                  invalidateMapSizes={this.invalidateMapSizes}\r\n                  overlays={this.props.overlays}\r\n                  layers={val === 'row1' ? row1Layers : val === 'row2' ? row2Layers : row3Layers}>\r\n            </RowContainer>\r\n          )}  \r\n        </Droppable>\r\n      )\r\n    });\r\n\r\n    return (\r\n      <div id='maps'>\r\n            <DragDropContext onDragEnd={this.onDragEnd}>\r\n              {rows}\r\n            </DragDropContext>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default React.forwardRef((props, ref) => <MapsContainer mapRef={ref} {...props} />);;\r\n","export const LayersInfoNYC =[\r\n \r\n  {\r\n    \"layer_type\": \"TileLayer\",\r\n    \"display_name\": \"1924\",\r\n    \"url\": \"https://maps.nyc.gov/xyz/1.0.0/photo/1924/{z}/{x}/{y}.png8\",\r\n    \"start_bounds\": \"-74.271671,40.485882,-73.652316,40.949064\",\r\n    \"thumbnail_path\": \"demo/nyc1924.jpg\"\r\n  },\r\n\r\n  {\r\n    \"layer_type\": \"TileLayer\",\r\n    \"display_name\": \"1951\",\r\n    \"url\": \"https://maps.nyc.gov/xyz/1.0.0/photo/1951/{z}/{x}/{y}.png8\",\r\n    \"start_bounds\": \"-74.271671,40.485882,-73.652316,40.949064\",\r\n    \"thumbnail_path\": \"demo/nyc1951.jpg\"\r\n  },\r\n\r\n  {\r\n    \"layer_type\": \"TileLayer\",\r\n    \"display_name\": \"1996\",\r\n    \"url\": \"https://maps.nyc.gov/xyz/1.0.0/photo/1996/{z}/{x}/{y}.png8\",\r\n    \"start_bounds\": \"-74.271671,40.485882,-73.652316,40.949064\",\r\n    \"thumbnail_path\": \"demo/nyc1996.jpg\"\r\n  },\r\n\r\n  {\r\n    \"layer_type\": \"TileLayer\",\r\n    \"display_name\": \"2001-2\",\r\n    \"url\": \"https://maps.nyc.gov/xyz/1.0.0/photo/2001-2/{z}/{x}/{y}.png8\",\r\n    \"start_bounds\": \"-74.271671,40.485882,-73.652316,40.949064\",\r\n    \"thumbnail_path\": \"demo/nyc2001-2.jpg\"\r\n  },\r\n\r\n  {\r\n    \"layer_type\": \"TileLayer\",\r\n    \"display_name\": \"2004\",\r\n    \"url\": \"https://maps.nyc.gov/xyz/1.0.0/photo/2004/{z}/{x}/{y}.png8\",\r\n    \"start_bounds\": \"-74.271671,40.485882,-73.652316,40.949064\",\r\n    \"thumbnail_path\": \"demo/nyc2004.jpg\"\r\n  },\r\n  {\r\n    \"layer_type\": \"TileLayer\",\r\n    \"display_name\": \"2006\",\r\n    \"url\": \"https://maps.nyc.gov/xyz/1.0.0/photo/2006/{z}/{x}/{y}.png8\",\r\n    \"start_bounds\": \"-74.271671,40.485882,-73.652316,40.949064\",\r\n    \"thumbnail_path\": \"demo/nyc2006.jpg\"\r\n  },\r\n  {\r\n    \"layer_type\": \"TileLayer\",\r\n    \"display_name\": \"2008\",\r\n    \"url\": \"https://maps.nyc.gov/xyz/1.0.0/photo/2008/{z}/{x}/{y}.png8\",\r\n    \"start_bounds\": \"-74.271671,40.485882,-73.652316,40.949064\",\r\n    \"thumbnail_path\": \"demo/nyc2008.jpg\"\r\n  },\r\n  {\r\n    \"layer_type\": \"TileLayer\",\r\n    \"display_name\": \"2010\",\r\n    \"url\": \"https://maps.nyc.gov/xyz/1.0.0/photo/2010/{z}/{x}/{y}.png8\",\r\n    \"start_bounds\": \"-74.271671,40.485882,-73.652316,40.949064\",\r\n    \"thumbnail_path\": \"demo/nyc2010.jpg\"\r\n  },\r\n  {\r\n    \"layer_type\": \"TileLayer\",\r\n    \"display_name\": \"2012\",\r\n    \"url\": \"https://maps.nyc.gov/xyz/1.0.0/photo/2012/{z}/{x}/{y}.png8\",\r\n    \"start_bounds\": \"-74.271671,40.485882,-73.652316,40.949064\",\r\n    \"thumbnail_path\": \"demo/nyc2012.jpg\"\r\n  },\r\n  {\r\n    \"layer_type\": \"TileLayer\",\r\n    \"display_name\": \"2014\",\r\n    \"url\": \"https://maps.nyc.gov/xyz/1.0.0/photo/2014/{z}/{x}/{y}.png8\",\r\n    \"start_bounds\": \"-74.271671,40.485882,-73.652316,40.949064\",\r\n    \"thumbnail_path\": \"demo/nyc2014.jpg\"\r\n  },\r\n  {\r\n    \"layer_type\": \"TileLayer\",\r\n    \"display_name\": \"2016\",\r\n    \"url\": \"https://maps.nyc.gov/xyz/1.0.0/photo/2016/{z}/{x}/{y}.png8\",\r\n    \"start_bounds\": \"-74.271671,40.485882,-73.652316,40.949064\",\r\n    \"thumbnail_path\": \"demo/nyc2016.jpg\"\r\n  },\r\n\r\n  {\r\n    \"layer_type\": \"TileLayer\",\r\n    \"display_name\": \"2018\",\r\n    \"url\": \"https://maps.nyc.gov/tms/1.0.0/photo/2018/{z}/{x}/{y}.png8\",\r\n    \"start_bounds\": \"-74.271671,40.485882,-73.652316,40.949064\",\r\n    \"thumbnail_path\": \"demo/nyc2018.jpg\",\r\n    \"tms\": true\r\n  }\r\n]\r\n\r\n\r\n export const LayersInfoStillwater =[\r\n  {\r\n        \"layer_type\": \"EsriTiledMapLayer\",\r\n        \"id\": \"stw_1923map\",\r\n        \"display_name\": \"1923\",\r\n        \"url\": \"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw_1923map/MapServer\",\r\n        \"thumbnail_path\": \"demo/thumb_stw_1923map.JPG\",\r\n        \"maxZoom\": 20\r\n      },      {\r\n        \"layer_type\": \"EsriTiledMapLayer\",\r\n        \"id\": \"oksm_WPA_PAY_017\",\r\n        \"display_name\": \"1936\",\r\n        \"url\": \"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/oksm_WPA_PAY_017/MapServer\",\r\n        \"thumbnail_path\": \"demo/thumb_oksm_WPA_PAY_017.JPG\",\r\n        \"maxZoom\": 20\r\n      },\r\n      {\r\n        \"layer_type\": \"EsriTiledMapLayer\",\r\n        \"id\": \"stw1938\",\r\n        \"display_name\": \"1938\",\r\n        \"url\": \"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1938/MapServer\",\r\n        \"thumbnail_path\": \"demo/thumb_stw1938.JPG\",\r\n        \"maxZoom\": 19\r\n      },\r\n\r\n      {\r\n        \"layer_type\": \"EsriTiledMapLayer\",\r\n        \"id\": \"stw1949\",\r\n        \"display_name\": \"1949\",\r\n        \"url\": \"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1949/MapServer\",\r\n        \"thumbnail_path\": \"demo/thumb_stw1949.JPG\",\r\n        \"maxZoom\": 19\r\n      },\r\n\r\n      {\r\n        \"layer_type\": \"EsriTiledMapLayer\",\r\n        \"id\": \"stw1956_tiles\",\r\n        \"display_name\": \"1956\",\r\n        \"url\": \"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1956_tiles/MapServer\",\r\n        \"thumbnail_path\": \"demo/thumb_stw1956_tiles.JPG\",\r\n        \"maxZoom\": 19\r\n      },\r\n      {\r\n        \"layer_type\": \"EsriTiledMapLayer\",\r\n        \"id\": \"Map_Stillwater_1959\",\r\n        \"display_name\": \"1959\",\r\n       \"thumbnail_path\": \"demo/thumb_Map_Stillwater_1959.JPG\",\r\n        \"url\": \"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/Map_Stillwater_1959/MapServer\"\r\n      },\r\n      {\r\n        \"layer_type\": \"EsriTiledMapLayer\",\r\n        \"id\": \"stw1963\",\r\n        \"display_name\": \"1963\",\r\n        \"url\": \"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1963/MapServer\",\r\n        \"thumbnail_path\": \"demo/thumb_stw1963.JPG\",\r\n        \"maxZoom\": 19\r\n      },\r\n      {\r\n        \"layer_type\": \"EsriTiledMapLayer\",\r\n        \"id\": \"stw1969_3\",\r\n        \"display_name\": \"1969\",\r\n        \"url\": \"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1969_3/MapServer\",\r\n        \"thumbnail_path\": \"demo/thumb_stw1969_3.JPG\",\r\n        \"maxZoom\": 19\r\n      },\r\n      {\r\n        \"layer_type\": \"EsriTiledMapLayer\",\r\n        \"id\": \"stw1969_3k\",\r\n        \"footprint_layer\": \"stw1969_3k_fp\",\r\n        \"display_name\": \"1969 (OSU)\",\r\n        \"url\": \"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1969_3k/MapServer\",\r\n        \"thumbnail_path\": \"demo/thumb_stw1969_3k.JPG\",\r\n        \"maxZoom\": 20\r\n      },\r\n      {\r\n        \"layer_type\": \"EsriTiledMapLayer\",\r\n        \"id\": \"OSU_1978\",\r\n        \"display_name\": \"1978 (OSU)\",\r\n        \"url\": \"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/OSU_1978/MapServer\",\r\n        \"thumbnail_path\": \"demo/thumb_OSU_1978.JPG\",\r\n        \"maxZoom\": 20\r\n      },\r\n      {\r\n        \"layer_type\": \"EsriTiledMapLayer\",\r\n        \"id\": \"stw1979\",\r\n        \"display_name\": \"1979\",\r\n        \"url\": \"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1979/MapServer\",\r\n        \"thumbnail_path\": \"demo/thumb_stw1979.JPG\",\r\n        \"maxZoom\": 19\r\n      },\r\n      {\r\n        \"layer_type\": \"EsriTiledMapLayer\",\r\n        \"id\": \"osu1986_2\",\r\n        \"display_name\": \"1986 (OSU)\",\r\n        \"url\": \"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/osu1986_2/MapServer\",\r\n        \"thumbnail_path\": \"demo/thumb_osu1986_2.JPG\",\r\n        \"maxZoom\": 20\r\n      },\r\n      {\r\n        \"layer_type\": \"EsriTiledMapLayer\",\r\n        \"id\": \"stw1991\",\r\n        \"display_name\": \"1991\",\r\n        \"url\": \"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1991/MapServer\",\r\n        \"thumbnail_path\": \"demo/thumb_stw1991.JPG\",\r\n        \"maxZoom\": 21\r\n      },\r\n\r\n      {\r\n        \"layer_type\": \"EsriTiledMapLayer\",\r\n        \"id\": \"stw1995_2\",\r\n        \"display_name\": \"1995\",\r\n        \"url\": \"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1995_2/MapServer\",\r\n        \"thumbnail_path\": \"demo/thumb_stw1995_2.JPG\",\r\n        \"maxZoom\": 18\r\n      },\r\n      {\r\n        \"layer_type\": \"EsriTiledMapLayer\",\r\n        \"id\": \"osu1996\",\r\n        \"display_name\": \"1996 (OSU)\",\r\n        \"url\": \"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/osu1996/MapServer\",\r\n        \"thumbnail_path\": \"demo/thumb_osu1996.JPG\",\r\n        \"maxZoom\": 20\r\n      },\r\n      {\r\n        \"layer_type\": \"EsriTiledMapLayer\",\r\n        \"id\": \"stw1999_2\",\r\n        \"display_name\": \"1999\",\r\n        \"url\": \"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1999_2/MapServer\",\r\n        \"thumbnail_path\": \"demo/thumb_stw1999_2.JPG\",\r\n        \"maxZoom\": 20\r\n      },      \r\n      {\r\n        \"layer_type\": \"EsriTiledMapLayer\",\r\n        \"id\": \"payne_2003\",\r\n        \"display_name\": \"2003\",\r\n        \"url\": \"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/payne_2003/MapServer\",\r\n        \"thumbnail_path\": \"demo/thumb_payne_2003.JPG\",\r\n        \"maxZoom\": 19\r\n      },\r\n      {\r\n        \"layer_type\": \"EsriTiledMapLayer\",\r\n        \"id\": \"Payne_2006_sid\",\r\n        \"display_name\": \"2006\",\r\n        \"url\": \"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/Payne_2006_sid/MapServer\",\r\n        \"thumbnail_path\": \"demo/thumb_Payne_2006_sid.JPG\",\r\n        \"maxZoom\": 19\r\n      },\r\n      {\r\n        \"layer_type\": \"EsriTiledMapLayer\",\r\n        \"id\": \"payne_2010\",\r\n        \"display_name\": \"2010\",\r\n        \"url\": \"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/payne_2010/MapServer\",\r\n        \"thumbnail_path\": \"demo/thumb_payne_2010.JPG\",\r\n        \"maxZoom\": 19\r\n      },\r\n      {\r\n        \"layer_type\": \"EsriTiledMapLayer\", \r\n        \"id\": \"esri_imagery\",\r\n        \"display_name\": \"2018\",\r\n        \"thumbnail_path\": \"demo/thumb_naip2017.JPG\",\r\n        \"url\": \"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer\",\r\n        \"maxZoom\": 19\r\n      }\r\n ];\r\n \r\n\r\nexport default LayersInfoNYC;","import React, { Component } from 'react';\r\nimport Fullscreen from 'react-fullscreen-crossbrowser';\r\nimport { cloneDeep } from 'lodash';\r\nimport shortid from 'shortid';\r\nimport ReactTooltip from 'react-tooltip';\r\nimport { findWithAttr, moveWithinArray } from './Util';\r\nimport UtilityBar from './UtilityBar';\r\nimport ViewBar from './ViewBar';\r\nimport Modal from './Modal';\r\nimport Tooltip from './Tooltip';\r\nimport MapsContainer from './MapsContainer';\r\nimport { LayersInfoNYC, LayersInfoStillwater} from './LayersInfoDemo';\r\nimport './App.css';\r\nimport './leaflet.css';\r\n\r\nclass App extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.Config = window.sideby.Config;\r\n\r\n    this.addLayer = this.addLayer.bind(this);\r\n    this.addOverlay = this.addOverlay.bind(this);\r\n    this.calculateDisplayIndexes = this.calculateDisplayIndexes.bind(this);\r\n    this.calculateRowLayers = this.calculateRowLayers.bind(this);\r\n    this.closeModal = this.closeModal.bind(this);\r\n    this.deleteLayer = this.deleteLayer.bind(this);\r\n    this.deleteOverlay = this.deleteOverlay.bind(this);\r\n    this.handleItemClick = this.handleItemClick.bind(this);\r\n    this.openModal = this.openModal.bind(this);\r\n    this.rebuildTooltip = this.rebuildTooltip.bind(this);\r\n    this.transmitGeocode = this.transmitGeocode.bind(this);\r\n    this.toggleDeleteMode = this.toggleDeleteMode.bind(this);\r\n    this.toggleFullscreen = this.toggleFullscreen.bind(this);\r\n    this.toggleInvalidateMapSizes = this.toggleInvalidateMapSizes.bind(this);\r\n    this.toggleLabels = this.toggleLabels.bind(this);\r\n    this.toggleModal = this.toggleModal.bind(this);\r\n    this.toggleViewbarVisibility = this.toggleViewbarVisibility.bind(this);\r\n    this.updateLayerDisplayIndexesAndRows = this.updateLayerDisplayIndexesAndRows.bind(this);\r\n    \r\n    this.state = {'layers':[],\r\n                  'overlays': window.sideby.OverlaysInfo || [],\r\n                  'numberOfLayersOn': 0, \r\n                  'geocodeResult': {},\r\n                  'labelLayerOn': true,\r\n                  'rebuildTooltip': false,\r\n                  'modalIsOpen': false,\r\n                  'modalContent': '',\r\n                  'viewbarVisible': true,\r\n                  'deleteModeActive': false,\r\n                  'invalidateMapSizes': false\r\n                };\r\n    \r\n    /*\r\n    All of the window.location.hash stuff is just a hacky way\r\n    to create shortcuts \r\n    */\r\n    if (window.location.hash === '#builder') {\r\n      window.sideby.LayersInfo = [];\r\n    }\r\n\r\n    if (window.location.hash === '#stw') {\r\n      this.Config.siteTitle= 'Stillwater from the Air';\r\n      this.Config.welcomeText = 'It\\'s Stillwater!';\r\n      this.Config.themeBackgroundColor = '#f60';\r\n      window.sideby.LayersInfo = LayersInfoStillwater;\r\n    }\r\n\r\n    if (window.location.hash === '#nyc') {\r\n      this.Config.siteTitle= 'New York City through the years';\r\n      this.Config.welcomeText = 'Using aerial photos from NYC Then & Now, click the buttons below to see how the city has changed over the last 100 years.'\r\n      window.sideby.LayersInfo = LayersInfoNYC;\r\n      this.state.overlays = [  {\r\n        'layer_type': 'TileLayer',\r\n        'url': 'https://maps.nyc.gov/xyz/1.0.0/carto/basemap/{z}/{x}/{y}.jpg',\r\n        'id': 'asfasdfasfadfadf',\r\n        'thumbnail_path': 'nyc.jpg',\r\n        'display_name': 'basemap',\r\n        'start_bounds': '-74.447928,40.442617,-73.512717,40.988043',\r\n        'format': 'image/jpeg',\r\n        'is_basemap': true\r\n      }];\r\n    }\r\n\r\n    //set theming options\r\n    document.title = this.Config.siteTitle;\r\n    let globalStyle = document.documentElement.style;\r\n    globalStyle.setProperty('--header-color', this.Config.themeHeaderColor);\r\n    globalStyle.setProperty('--header-font-family', this.Config.themeHeaderFontFamily);\r\n    globalStyle.setProperty('--scroll-button-hover-color', this.Config.themeScrollButtonHoverColor);\r\n    globalStyle.setProperty('--scroll-button-color', this.Config.themeScrollButtonColor);\r\n    globalStyle.setProperty('--background-color', this.Config.themeBackgroundColor);\r\n\r\n    //for the initial app load, set state using LayersInfo\r\n    let viewbarLayers = window.sideby.LayersInfo.map(item => \r\n        ({...item, isToggledOn: false, id: shortid.generate()})\r\n      );\r\n    this.state.viewbarLayers =  viewbarLayers.sort( (a, b) => {\r\n      return b.sortVal - a.sortVal\r\n    });\r\n\r\n  }\r\n\r\n  addLayer(data) {\r\n    let new_layer = data,\r\n      id = shortid.generate(), \r\n      maxZoom = 20;\r\n\r\n    new_layer.id = id;\r\n    new_layer.maxZoom = maxZoom;\r\n    \r\n    let state = {'viewbarLayers': this.state.viewbarLayers};\r\n    state.viewbarLayers.push(new_layer);\r\n    this.setState(state);\r\n  }\r\n\r\n  addOverlay(data) {\r\n    let overlays = cloneDeep(this.state.overlays);  \r\n    var new_layer = data;\r\n    new_layer.isOverlay = true;\r\n    new_layer.id = shortid.generate();\r\n    new_layer.interactive = false;\r\n    overlays.push(new_layer);\r\n    this.setState({'overlays': overlays});\r\n  }\r\n\r\n  calculateDisplayIndexes(layers) {\r\n    var visibleIndex = 0;\r\n    let newLayers = layers.map(function(lyr){\r\n      if (lyr.isToggledOn) {\r\n        lyr.visibleIndex = visibleIndex;\r\n        visibleIndex ++;\r\n      }\r\n\r\n      return lyr;\r\n    });\r\n    return newLayers;\r\n  }\r\n    \r\n  calculateRowLayers(layers) {\r\n    let visibleLayers = layers.filter(i => i.isToggledOn);\r\n    let numberOfLayersOn = visibleLayers.length;\r\n    visibleLayers.sort(function(a,b){\r\n      return a.visibleIndex - b.visibleIndex;\r\n    })\r\n\r\n    switch(numberOfLayersOn){\r\n      case 1:\r\n      case 2:\r\n      case 3:\r\n        visibleLayers.forEach(i => i.row = 'row1');\r\n        break;\r\n      case 4:\r\n        visibleLayers.slice(0,2).forEach(i => i.row = 'row1');\r\n        visibleLayers.slice(2).forEach(i => i.row = 'row2');\r\n        break;\r\n      case 5:\r\n      case 6:\r\n        visibleLayers.slice(0,3).forEach(i => i.row = 'row1');\r\n        visibleLayers.slice(3).forEach(i => i.row = 'row2');\r\n        break;\r\n      case 7:\r\n        visibleLayers.slice(0,4).forEach(i => i.row = 'row1');\r\n        visibleLayers.slice(4).forEach(i => i.row = 'row2');\r\n        break;\r\n      case 8:\r\n      case 9:\r\n        visibleLayers.slice(0,3).forEach(i => i.row = 'row1');\r\n        visibleLayers.slice(3,6).forEach(i => i.row = 'row2');\r\n        visibleLayers.slice(6).forEach(i => i.row = 'row3');\r\n        break;\r\n      \r\n      default:\r\n        break;\r\n    }\r\n    return visibleLayers;\r\n  }\r\n\r\n  closeModal() {\r\n    this.toggleModal(false);\r\n    ReactTooltip.hide(); //in case any tooltips are showing\r\n  }\r\n\r\n  deleteOverlay(obj) {\r\n    let id = obj.currentTarget.dataset.overlayId;\r\n    document.getElementById(id).style.display = 'none';\r\n    let overlays = cloneDeep(this.state.overlays);\r\n    let matchIndex = findWithAttr(overlays, 'id', id);\r\n    overlays.splice(matchIndex, 1);\r\n    this.setState({'overlays': overlays});\r\n  }\r\n\r\n  deleteLayer(id) {\r\n    let viewbarLayers = cloneDeep(this.state.viewbarLayers);\r\n    let matchIndex = findWithAttr(viewbarLayers, 'id', id);\r\n    viewbarLayers.splice(matchIndex, 1);\r\n    this.setState({'viewbarLayers': viewbarLayers});\r\n  }\r\n\r\n  handleItemClick(data) {\r\n    let found = false;\r\n    let foundIdx;\r\n    let newStateLayers = cloneDeep(this.state.layers);\r\n    let newViewbarLayers = cloneDeep(this.state.viewbarLayers);  \r\n\r\n    newStateLayers.forEach((lyr, index) => {\r\n      if (data.id === lyr.id){\r\n        found = true;\r\n        foundIdx = index;\r\n      }\r\n    });\r\n\r\n    if (!found){\r\n      newStateLayers = newStateLayers.concat([data]);\r\n    }\r\n\r\n    else {\r\n\r\n      newStateLayers[foundIdx].isToggledOn = !this.state.layers[foundIdx].isToggledOn;\r\n\r\n      //rearrange the layers array so display order matches clicked order\r\n      moveWithinArray(newStateLayers, foundIdx, newStateLayers.length - 1);\r\n    }\r\n\r\n    newViewbarLayers.forEach((lyr, index) => {\r\n      if (data.id === lyr.id){\r\n        newViewbarLayers[index].isToggledOn = !this.state.viewbarLayers[index].isToggledOn;\r\n      }\r\n    });  \r\n\r\n    newStateLayers = this.calculateDisplayIndexes(newStateLayers);\r\n    newStateLayers = this.calculateRowLayers(newStateLayers);\r\n\r\n    let newNumberOfLayersOn = newStateLayers.filter(i => i.isToggledOn).length;\r\n\r\n    let newState = {'layers': newStateLayers,\r\n                  'numberOfLayersOn': newNumberOfLayersOn,\r\n                  'viewbarLayers': newViewbarLayers};\r\n\r\n    this.setState(newState);\r\n  }\r\n\r\n  /*\r\n  Function to open modal.\r\n    modalType (string): Not really used anymore, should just remove\r\n    modalContent (jsx): A Formik form in JSX\r\n    modalOptions (object): really not used anymore, should remove as well.  \r\n  */\r\n  openModal(modalType, modalContent, modalOptions){\r\n    this.setState({\r\n      modalType: modalType,\r\n      modalContent: modalContent,\r\n      modalOptions: modalOptions\r\n    });\r\n    this.toggleModal(true);\r\n  }\r\n\r\n  rebuildTooltip(bool) {\r\n    this.setState({'rebuildTooltip': bool});\r\n  }\r\n\r\n  /*\r\n    Toggle delete mode for the comparison layer bar.\r\n  */\r\n  toggleDeleteMode(bool) {\r\n    this.setState({deleteModeActive: bool});\r\n    this.forceUpdate();\r\n  }\r\n\r\n  /*\r\n    Toggle fullscreen mode. Used by FullscreenToggle component on the UtilityBar\r\n  */\r\n  toggleFullscreen() {\r\n    let current_val = this.state.isFullscreenEnabled;\r\n    this.setState({isFullscreenEnabled: !current_val});\r\n  }\r\n\r\n  /*\r\n    Toggle that triggers invalidation of map sizes. Only use outside of \r\n    MapContainer component is the hide/show viewbar button.\r\n  */\r\n  toggleInvalidateMapSizes(bool) {\r\n    this.setState({invalidateMapSizes: bool});\r\n  }\r\n\r\n  /*\r\n    Toggle map labels\r\n  */\r\n  toggleLabels() {\r\n    let curr = this.state.labelLayerOn;\r\n    this.setState({'labelLayerOn': !curr});\r\n  }\r\n\r\n  /*\r\n    Toggle for handling modal visibility state\r\n  */\r\n  toggleModal(bool) {\r\n    this.setState({'modalIsOpen': bool});\r\n  }\r\n\r\n  /*\r\n    Toggle for handling layer comparison viewbar state\r\n  */\r\n  toggleViewbarVisibility() {\r\n    let current_val = this.state.viewbarVisible;\r\n    this.setState({viewbarVisible: !current_val});\r\n    this.toggleInvalidateMapSizes(true);\r\n  }\r\n\r\n  /*\r\n    Function that is used to move the response received by \r\n    the Geocoder component from the Geocoder, up to the App,\r\n    and then back down to the MapsContainer\r\n  */\r\n  transmitGeocode(geocode) {\r\n    this.setState({'geocode': geocode});\r\n  }\r\n\r\n  updateLayerDisplayIndexesAndRows(layers) {\r\n    let newLayers = cloneDeep(this.state.layers);\r\n    layers.forEach((lyr, index) => {\r\n      var lyrIndex = findWithAttr(newLayers, 'id', lyr.id);\r\n      newLayers[lyrIndex].visibleIndex = index;\r\n    });\r\n    newLayers = this.calculateRowLayers(newLayers);\r\n    this.setState({'layers': newLayers});\r\n  }\r\n\r\n  render() {\r\n    let state = this.state;\r\n\r\n    return (\r\n\r\n      <Fullscreen\r\n          enabled={state.isFullscreenEnabled}\r\n          onChange={isFullscreenEnabled => \r\n                    this.setState({isFullscreenEnabled})}>\r\n\r\n        <div id='modalRoot'></div>\r\n     \r\n        <div className='App'>\r\n\r\n          <Modal \r\n            closeModal={this.closeModal}\r\n            isOpen={state.modalIsOpen} \r\n            modalContent={state.modalContent}\r\n            modalOptions={state.modalOptions}\r\n            modalSubmit={this.modalSubmit}\r\n            modalType={state.modalType}\r\n            openModal={this.openModal}\r\n            rebuildTooltip={this.rebuildTooltip} />\r\n\r\n          <header className='App-header'>\r\n            {this.Config.siteTitle}\r\n          </header>\r\n\r\n          <Tooltip \r\n            rebuildTooltip={state.rebuildTooltip}\r\n            resetRebuildTooltip={this.rebuildTooltip} />\r\n         \r\n          {state.numberOfLayersOn === 0 && \r\n            <div className='no-maps'>\r\n              <p>\r\n                {this.Config.welcomeText}\r\n              </p>\r\n            </div>\r\n          }\r\n\r\n          {state.numberOfLayersOn > 0 && \r\n            <MapsContainer \r\n              geocodeResult={state.geocode}\r\n              invalidateMapSizes={state.invalidateMapSizes}\r\n              labelLayerOn={state.labelLayerOn}\r\n              layers={state.layers} \r\n              mapCenter={this.mapCenter}\r\n              numberOfLayersOn={state.numberOfLayersOn}\r\n              overlays={state.overlays}\r\n              toggleInvalidateMapSizes={this.toggleInvalidateMapSizes}\r\n              updateLayerDisplayIndexesAndRows={this.updateLayerDisplayIndexesAndRows}\r\n              />\r\n          }\r\n\r\n          {state.numberOfLayersOn > 0 && \r\n            <UtilityBar \r\n              addOverlay={this.addOverlay}\r\n              closeModal={this.closeModal}\r\n              deleteOverlay={this.deleteOverlay}\r\n              isFullscreenEnabled={state.isFullscreenEnabled}\r\n              labelLayerOn={state.labelLayerOn}\r\n              openModal={this.openModal}\r\n              overlays={state.overlays}\r\n              toggleFullscreen={this.toggleFullscreen}\r\n              toggleLabels={this.toggleLabels}\r\n              toggleViewbarVisibility={this.toggleViewbarVisibility}\r\n              transmitGeocode={this.transmitGeocode} \r\n              viewbarLayers={state.viewbarLayers}\r\n              viewbarVisible={state.viewbarVisible}\r\n              />\r\n          }\r\n\r\n          {state.viewbarVisible &&\r\n            <ViewBar \r\n              addLayer={this.addLayer}\r\n              closeModal={this.closeModal}\r\n              deleteLayer={this.deleteLayer}\r\n              deleteModeActive={state.deleteModeActive}\r\n              newLayer={state.newLayer} \r\n              numberOfLayersOn={state.numberOfLayersOn}\r\n              onItemClick={this.handleItemClick}\r\n              openModal={this.openModal}\r\n              rebuildTooltip={this.rebuildTooltip}\r\n              toggleDeleteMode={this.toggleDeleteMode}\r\n              toggleModal={this.toggleModal}\r\n              viewbarLayers={state.viewbarLayers}\r\n              />\r\n          }\r\n        </div>\r\n      </Fullscreen>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import 'react-app-polyfill/ie9';\r\nimport 'react-app-polyfill/stable';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ReactGA from 'react-ga';\r\nimport './index.css';\r\nimport './theme.css';\r\nimport App from './App';\r\nimport registerServiceWorker from './registerServiceWorker';\r\nimport cssVars from 'css-vars-ponyfill';\r\ncssVars({\r\n  // Options...\r\n});\r\n\r\nReactGA.initialize(window.sideby.Config.gaTrackingId);\r\nReactGA.pageview(window.location.pathname + window.location.search);\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\nregisterServiceWorker();\r\n"],"sourceRoot":""}