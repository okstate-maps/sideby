(this.webpackJsonpsideby=this.webpackJsonpsideby||[]).push([[0],{232:function(e,t,a){},612:function(e,t,a){},613:function(e,t,a){},652:function(e,t,a){},653:function(e,t,a){},785:function(e,t,a){},786:function(e,t,a){},787:function(e,t,a){},788:function(e,t,a){},789:function(e,t,a){},790:function(e,t,a){},799:function(e,t,a){},800:function(e,t,a){},801:function(e,t,a){},802:function(e,t,a){},806:function(e,t,a){},807:function(e,t,a){},809:function(e,t,a){},810:function(e,t,a){},811:function(e,t,a){},847:function(e,t,a){},848:function(e,t,a){},849:function(e,t,a){"use strict";a.r(t);a(392),a(444);var i=a(1),n=a.n(i),o=a(60),r=a.n(o),s=a(239),l=(a(612),a(613),a(17)),c=a(10),d=a(11),p=a(5),u=a(13),h=a(12),b=a(377),y=a.n(b),m=a(49),f=a(183),j=a.n(f),v=a(117);a(378);function O(e,t,a){for(var i=0;i<e.length;i+=1)if(e[i][t]===a)return i;return-1}function g(e,t){for(var a=0;a<t.length;a+=1)delete e[t[a]];return e}function x(e,t,a){e.splice(a,0,e.splice(t,1)[0])}var L=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),_=a(22),w=a(25),C=a(0),M=a.n(C),k=(a(850),a(652),a(653),a(2)),F=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var i;return Object(c.a)(this,a),i=t.call(this,e),_.b.add(w.p),i.Config=window.sideby.Config,i.mapboxToken=i.Config.mapboxToken,i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.map=M.a.map("hidden-geocoder-map"),this.geocoderObj=new M.a.Control.Geocoder({geocoder:new M.a.Control.Geocoder.Mapbox(this.mapboxToken),collapsed:!0,placeholder:this.Config.geocoderSearchPlaceholderText,suggestMinLength:3,queryMinLength:1,defaultMarkGeocode:!1}),this.geocoderObj.addTo(this.map),this.geocoderObj.on("markgeocode",(function(t){return e.transmitGeocode(t)}));var t=this.geocoderObj.getContainer();window.document.getElementById("Geocoder").appendChild(t)}},{key:"transmitGeocode",value:function(e){this.props.transmitGeocode(e)}},{key:"render",value:function(){return Object(k.jsx)("div",{id:"Geocoder",className:this.props.viewbarVisible?"Geocoder":"Geocoder Viewbar-hidden","data-tip":"Search for an address/place","data-for":"modal","data-event":"mouseover","data-delay-show":"900","data-event-off":"mouseout","data-place":"top","data-tip-disable":L,children:Object(k.jsx)("div",{id:"hidden-geocoder-map"})})}}]),a}(i.Component),T=a(32),S=a(27),E={AddNewLayer:"Beep boop boop",LayerUrl:"Enter the URL to the layer you want to add here. See the help for more guidance.",TileLayer:"An XYZ style layer.<br/>For example https://maps.nyc.gov/xyz/1.0.0/carto/label/{z}/{x}/{y}.png8",WMSTileLayer:"A link to an OGC WMS server. You will need to specify an extra layers parameter. See the help for more information",WMTSTileLayer:"A link to an OGC WMTS layer. Very similar to WMS, except that it is pre-tiled.",EsriDynamicMapLayer:"An Esri map service that is drawn dynamically on the server.",EsriFeatureLayer:"A vector layer coming from ArcGIS Online or ArcGIS Server.<br/>For example, https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/USA_States_Generalized/FeatureServer/0",EsriImageLayer:"An Esri image service.",EsriTiledMapLayer:"An Esri map service consisting of a static tile cache.",ThumbnailPath:"Enter a path to a thumbnail picture to use for the layer. It can be a full URL or the filename of an image stored in /public/assets/images.",DisplayName:"The name to use for this layer.",ExportLayers:"Use this option to extract the JSON representation of the layers in your current view. You can use that text in the application's LayersInfo.js file."},G=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var i;return Object(c.a)(this,a),i=t.call(this,e),_.b.add(w.k),i}return Object(d.a)(a,[{key:"render",value:function(){return Object(k.jsx)(T.a,{"data-tip":this.props.tooltipName,"data-for":"modal","data-event":"click",icon:"info-circle"})}}]),a}(i.Component),I=a(47);function D(e){var t,a=e.layer_type,i=e.url,n="./assets/images/default.jpg";switch(a){case"EsriDynamicMapLayer":case"EsriImageLayer":case"EsriTiledMapLayer":t=i+"/info/thumbnail/thumbnail.png";break;case"WMSTileLayer":i.indexOf("geoserver")>=0&&(t=i+"/reflect?height=200&width=300&layers="+e.layers);break;case"WMTSTileLayer":i.indexOf("MapServer/WMTS")>=0&&(t=i.slice(0,i.indexOf("/WMTS"))+"/info/thumbnail/thumbnail.png");break;default:t=n}return t||(t=n),t}var z=function(e){var t=Object(S.f)().values.layer_type,a={WFSLayer:["typeNS","typeName","geometryField","maxFeatures","arcgis"],WMSTileLayer:["layers"],WMTSTileLayer:["layer","tilematrixSet"]}[t];return t&&a?Object(k.jsxs)("div",{className:"conditionalLayerFields",children:[Object(k.jsxs)("h4",{className:"conditionalLayerFieldsHeader",children:[t,": Additional Field",a.length>1?"s":""]}),Object(k.jsx)("div",{children:Object(k.jsx)(k.Fragment,{children:a.map((function(e){return Object(k.jsx)("div",{className:"conditionalLayerField inputGroup",children:Object(k.jsxs)("label",{className:"textInputLabel",htmlFor:e,children:[e,"\xa0",Object(k.jsx)(S.b,{name:e,type:"text"})]})},t+"_"+e)}))})})]}):null},N=function(e){var t=Object(S.f)(),a=t.values.url,i=t.touched,o=t.setFieldValue;return n.a.useEffect((function(){var t=function(e){var t=e,a=null;return Object.entries({TileLayer:/.*\{z\}.*\{x\}.*\{y\}.*/,WFSLayer:/.*wfs.*/i,WMSTileLayer:/.*wms.*/i,WMTSTileLayer:/.*wmts.*/i,EsriImageLayer:/.*ImageServer.*/,EsriFeatureLayer:/.*FeatureServer.*/,EsriTiledMapLayer:/.*MapServer[/ ]*$/}).forEach((function(e){e[1].test(t)&&(a=e[0])})),a}(a);o(e.name,t)}),[a,i.url,o,e.name]),Object(k.jsxs)("div",{className:"radioGroup",children:[Object(k.jsx)("label",{className:"radioGroupLabel",children:"Type of Layer"}),Object(k.jsxs)("div",{className:"inputGroup",children:[Object(k.jsx)(S.b,{id:"typeTileLayer",name:"layer_type",type:"radio",value:"TileLayer"}),Object(k.jsx)("label",{className:"radioGroupLabel",htmlFor:"typeTileLayer",children:"XYZ Tile Layer"}),Object(k.jsx)(G,{tooltipName:E.TileLayer})]}),Object(k.jsxs)("div",{className:"inputGroup",children:[Object(k.jsx)(S.b,{id:"typeWFSLayer",name:"layer_type",type:"radio",value:"WFSLayer"}),Object(k.jsx)("label",{className:"radioGroupLabel",htmlFor:"typeWFSLayer",children:"WFS Layer"}),Object(k.jsx)(G,{tooltipName:E.WFSLayer})]}),Object(k.jsxs)("div",{className:"inputGroup",children:[Object(k.jsx)(S.b,{id:"typeWMSTileLayer",name:"layer_type",type:"radio",value:"WMSTileLayer"}),Object(k.jsx)("label",{className:"radioGroupLabel",htmlFor:"typeWMSTileLayer",children:"WMS Layer"}),Object(k.jsx)(G,{tooltipName:E.WMSTileLayer})]}),Object(k.jsxs)("div",{className:"inputGroup",children:[Object(k.jsx)(S.b,{id:"typeWMTSTileLayer",name:"layer_type",type:"radio",value:"WMTSTileLayer"}),Object(k.jsx)("label",{className:"radioGroupLabel",htmlFor:"typeWMTSTileLayer",children:"WMTS Tile Layer"}),Object(k.jsx)(G,{tooltipName:E.WMTSTileLayer})]}),Object(k.jsxs)("div",{className:"inputGroup",children:[Object(k.jsx)(S.b,{id:"typeEsriTiledMapLayer",name:"layer_type",type:"radio",value:"EsriTiledMapLayer"}),Object(k.jsx)("label",{className:"radioGroupLabel",htmlFor:"typeEsriTiledMapLayer",children:"Esri Tiled Map Layer"}),Object(k.jsx)(G,{tooltipName:E.EsriTiledMapLayer})]}),Object(k.jsxs)("div",{className:"inputGroup",children:[Object(k.jsx)(S.b,{id:"typeEsriDynamicMapLayer",name:"layer_type",type:"radio",value:"EsriDynamicMapLayer"}),Object(k.jsx)("label",{className:"radioGroupLabel",htmlFor:"typeEsriDynamicMapLayer",children:"Esri Dynamic Map Layer"}),Object(k.jsx)(G,{tooltipName:E.EsriDynamicMapLayer})]}),Object(k.jsxs)("div",{className:"inputGroup",children:[Object(k.jsx)(S.b,{id:"typeEsriFeatureLayer",name:"layer_type",type:"radio",value:"EsriFeatureLayer"}),Object(k.jsx)("label",{className:"radioGroupLabel",htmlFor:"typeEsriFeatureLayer",children:"Esri Feature Layer"}),Object(k.jsx)(G,{tooltipName:E.EsriFeatureLayer})]}),Object(k.jsxs)("div",{className:"inputGroup",children:[Object(k.jsx)(S.b,{id:"typeEsriImageLayer",name:"layer_type",type:"radio",value:"EsriImageLayer"}),Object(k.jsx)("label",{className:"radioGroupLabel",htmlFor:"typeEsriImageLayer",children:"Esri Image Layer"}),Object(k.jsx)(G,{tooltipName:E.EsriImageLayer})]})]})},R={url:"",layer_type:"",display_name:"",thumbnail_path:"",layers:"",format:"image/jpeg",typeNS:"",typeName:"",geometryField:"",maxFeatures:"",arcgis:"",layer:"",tilematrixSet:""},A=I.object({url:I.string().matches(/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[\{\}!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[\{\}!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[\{\}!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[\{\}!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[\{\}!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,"Needs to be a valid URL.").required("Required"),layer_type:I.string().required("Required"),display_name:I.string().required("Required"),thumbnail_path:I.string(),layers:I.string(),format:I.string(),typeNS:I.string(),typeName:I.string(),geometryField:I.string(),maxFeatures:I.string(),arcgis:I.boolean(),layer:I.string(),tilematrixSet:I.string(),is_basemap:I.boolean()}),P=(a(232),function(e){return Object(k.jsx)(S.d,{initialValues:R,validationSchema:A,onSubmit:function(t,a){a.setSubmitting;e.addOverlay(t),e.closeModal()},children:Object(k.jsxs)(S.c,{children:[Object(k.jsx)("h3",{className:"modalHeader",children:"Add New Overlay"}),Object(k.jsx)("label",{className:"textInputLabel",htmlFor:"url",children:"Url\xa0"}),Object(k.jsx)(G,{tooltipName:E.LayerUrl}),Object(k.jsxs)("div",{className:"inputGroup",children:[Object(k.jsx)(S.b,{as:"textarea",name:"url"}),Object(k.jsx)(S.a,{className:"error",component:"div",name:"url"})]}),Object(k.jsx)(N,{name:"layer_type"}),Object(k.jsx)(z,{}),Object(k.jsxs)("div",{className:"inputGroup",children:[Object(k.jsx)("label",{className:"textInputLabel",htmlFor:"display_name",children:"Display Name"}),Object(k.jsx)(S.b,{name:"display_name",type:"text"}),Object(k.jsx)(S.a,{className:"error",component:"div",name:"display_name"})]}),Object(k.jsxs)("div",{className:"inputGroup",children:[Object(k.jsx)(S.b,{id:"is_basemap",name:"is_basemap",type:"checkbox"}),Object(k.jsx)("label",{className:"radioGroupLabel",htmlFor:"is_basemap",children:"Place layer beneath others rather than on top."})]}),Object(k.jsx)("button",{type:"submit",children:"OK"}),Object(k.jsx)("button",{type:"button",onClick:e.closeModal,children:"Cancel"})]})})}),W=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).Config=window.sideby.Config,_.b.add(w.o),i.onClick=i.onClick.bind(Object(p.a)(i)),i.modalType="AddOverlay",i}return Object(d.a)(a,[{key:"onClick",value:function(e){var t=Object(k.jsx)(P,Object(l.a)({onBlur:this.onBlur},this.props));this.props.openModal(this.modalType,t)}},{key:"render",value:function(){return Object(k.jsx)("button",{className:"add-overlay",onClick:this.onClick,name:"Add Overlay",id:"add-overlay","data-tip":"Add an overlay layer","data-for":"modal","data-event":"mouseover","data-delay-show":"900","data-place":"top","data-event-off":"mouseout","data-tip-disable":L,children:Object(k.jsx)(T.a,{icon:"plus-square",size:"2x"})})}}]),a}(i.Component),U=a(381),V=a.n(U),B=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var i;return Object(c.a)(this,a),i=t.call(this,e),_.b.add(w.h),i.onClick=i.onClick.bind(Object(p.a)(i)),i.state={showLayers:!1},i.clipboard=new V.a(".copyButton",{container:document.getElementById("modalContainer")}),i}return Object(d.a)(a,[{key:"onClick",value:function(){this.setState({showLayers:!this.state.showLayers})}},{key:"render",value:function(){return Object(k.jsxs)("div",{className:"exportLayersGroup",children:[Object(k.jsx)("button",{name:"exportLayersButton",type:"button",id:"exportLayersButton",onClick:this.onClick,children:"Export Layers"}),Object(k.jsx)("br",{}),this.state.showLayers&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("textarea",{className:"clipboardText",id:"clipboardText",rows:"10",cols:"50",readOnly:!0,value:JSON.stringify(this.props.layers,null,2)}),Object(k.jsx)("button",{className:"copyButton","data-clipboard-target":"#clipboardText",type:"button",children:Object(k.jsx)(T.a,{icon:"copy"})})]})]})}}]),a}(i.Component),Z=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var i;return Object(c.a)(this,a),i=t.call(this,e),_.b.add(w.l),_.b.add(w.q),i.onClick=i.onClick.bind(Object(p.a)(i)),i}return Object(d.a)(a,[{key:"onClick",value:function(e){var t=this,a=this.props.overlays,i=Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("table",{className:"table",children:[Object(k.jsx)("caption",{children:" Current Overlays"}),Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"Name"}),Object(k.jsx)("th",{children:"Remove"})]})}),Object(k.jsx)("tbody",{children:a.map((function(e,a){return Object(k.jsxs)("tr",{id:e.id,children:[Object(k.jsx)("td",{children:e.display_name}),Object(k.jsx)("td",{children:Object(k.jsx)("button",{"data-overlay-id":e.id,onClick:t.props.deleteOverlay,children:Object(k.jsx)(T.a,{icon:"times-circle",size:"2x"})})})]},e.id)}))})]}),Object(k.jsx)(B,{layers:a}),Object(k.jsx)("br",{}),Object(k.jsx)("button",{type:"button",onClick:this.props.closeModal,children:"OK"})]});this.props.openModal("ManageOverlays",i,{noSubmit:!0})}},{key:"render",value:function(){return Object(k.jsx)("button",{className:"ManageOverlays-button",onClick:this.onClick,name:"Manage Overlays",id:"ManageOverlays-button","data-tip":"Manage current overlays","data-for":"modal","data-event":"mouseover","data-delay-show":"900","data-event-off":"mouseout","data-place":"top",children:Object(k.jsx)("div",{className:"icon-label",children:Object(k.jsx)(T.a,{icon:"layer-group",size:"2x"})})})}}]),a}(i.Component),J=(a(785),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).onChange=i.onChange.bind(Object(p.a)(i)),i}return Object(d.a)(a,[{key:"onChange",value:function(){this.props.toggleLabels()}},{key:"render",value:function(){return Object(k.jsxs)("div",{className:"inputGroup",children:[Object(k.jsx)("input",{defaultChecked:this.props.labelLayerOn,name:"labelsCheckbox",id:"labelsCheckbox",type:"checkbox",onChange:this.onChange}),Object(k.jsx)("label",{htmlFor:"labelsCheckbox",children:"Map\xa0Labels"})]})}}]),a}(i.Component)),Q=function(e){var t=Object(S.e)({initialValues:{mapLabels:!0},onSubmit:function(t){e.closeModal()},onChange:function(e){alert(e)}});return Object(k.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(k.jsx)(J,{labelLayerOn:e.labelLayerOn,toggleLabels:e.toggleLabels}),Object(k.jsxs)("div",{className:"inputGroup",children:[Object(k.jsx)(B,{layers:e.viewbarLayers}),Object(k.jsx)(G,{tooltipName:E.ExportLayers})]}),Object(k.jsx)("button",{type:"submit",children:"OK"})]})},X=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var i;return Object(c.a)(this,a),i=t.call(this,e),_.b.add(w.f),i.onClick=i.onClick.bind(Object(p.a)(i)),i}return Object(d.a)(a,[{key:"onClick",value:function(e){var t=Object(k.jsx)(Q,Object(l.a)({},this.props));this.props.openModal("Settings",t,{noSubmit:!0})}},{key:"render",value:function(){return Object(k.jsx)("button",{className:"settings-button",onClick:this.onClick,name:"Settings","data-tip":"Settings","data-for":"modal","data-event":"mouseover","data-delay-show":"900","data-place":"top","data-event-off":"mouseout","data-tip-disable":L,id:"settings-button",children:Object(k.jsx)("div",{className:"icon-label",children:Object(k.jsx)(T.a,{icon:"cog",size:"2x"})})})}}]),a}(i.Component);_.b.add(w.i),_.b.add(w.g);var H=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return Object(k.jsx)("button",{onClick:function(){return e.props.toggleFullscreen()},name:"Toggle Fullscreen Mode","data-tip":this.props.isFullscreenEnabled?"Exit Fullscreen Mode":"Enter Fullscreen Mode","data-for":"modal","data-event":"mouseover","data-delay-show":"800","data-place":"top","data-tip-disable":L,"data-event-off":"mouseout",children:Object(k.jsx)(T.a,{icon:this.props.isFullscreenEnabled?"compress":"expand",size:"2x"})})}}]),a}(i.Component),q=H;_.b.add(w.c),_.b.add(w.d);var Y=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return Object(k.jsx)("button",{onClick:function(){return e.props.toggleViewbarVisibility()},name:"Hide view bar","data-tip":this.props.viewbarVisible?"Hide Layer Selector":"Show Layer Selector","data-for":"modal","data-event":"mouseover","data-delay-show":"800","data-event-off":"mouseout","data-place":"top","data-tip-disable":L,children:Object(k.jsx)(T.a,{icon:this.props.viewbarVisible?"arrow-down":"arrow-up",size:"2x"})})}}]),a}(i.Component),$=Y,K=(a(786),a(787),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).transmitGeocode=i.transmitGeocode.bind(Object(p.a)(i)),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"transmitGeocode",value:function(e){this.props.transmitGeocode(e)}},{key:"render",value:function(){return Object(k.jsxs)("div",{id:"UtilityBar",className:"UtilityBar",children:[Object(k.jsx)(F,{transmitGeocode:this.transmitGeocode,viewbarVisible:this.props.viewbarVisible}),Object(k.jsx)(W,{numberOfLayersOn:this.props.numberOfLayersOn,addOverlay:this.props.addOverlay,openModal:this.props.openModal,closeModal:this.props.closeModal}),this.props.overlays.length>0&&Object(k.jsx)(Z,{overlays:this.props.overlays,openModal:this.props.openModal,closeModal:this.props.closeModal,deleteOverlay:this.props.deleteOverlay}),Object(k.jsx)(q,{toggleFullscreen:this.props.toggleFullscreen,isFullscreenEnabled:this.props.isFullscreenEnabled}),Object(k.jsx)(X,{openModal:this.props.openModal,closeModal:this.props.closeModal,labelLayerOn:this.props.labelLayerOn,toggleLabels:this.props.toggleLabels,viewbarLayers:this.props.viewbarLayers,deleteModeActive:this.props.deleteModeActive,toggleDeleteMode:this.props.toggleDeleteMode}),Object(k.jsx)($,{toggleViewbarVisibility:this.props.toggleViewbarVisibility,viewbarVisible:this.props.viewbarVisible,invalidateMapSizes:this.props.invalidateMapSizes})]})}}]),a}(i.Component));a(788);_.b.add(w.k),_.b.add(w.e),_.b.add(w.r);var ee=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).Config=window.sideby.Config,i.onClick=i.onClick.bind(Object(p.a)(i)),i.infoClick=i.infoClick.bind(Object(p.a)(i)),i.resolveThumbnail.bind(Object(p.a)(i)),i.state={},i}return Object(d.a)(a,[{key:"componentDidMount",value:function(e,t){this.props.rebuildTooltip(),this.resolveThumbnail()}},{key:"resolveThumbnail",value:function(){this.props.thumbnail_path?this.props.thumbnail_path.startsWith("http")?this.setState({thumbnail_path:this.props.thumbnail_path}):this.setState({thumbnail_path:"./assets/layer_thumbnails/"+this.props.thumbnail_path}):this.props.layer_type&&this.setState({thumbnail_path:D(this.props)})}},{key:"infoClick",value:function(e){e.stopPropagation(),alert("info click")}},{key:"onClick",value:function(e){if(this.props.numberOfLayersOn!==this.Config.maxLayers||this.props.isToggledOn)if(this.props.deleteModeActive){if(this.props.isToggledOn){var t=Object(l.a)({},this.props);t.isToggledOn=!this.props.isToggledOn,delete t.deleteModeActive,delete t.onItemClick,this.props.onItemClick(t)}this.props.deleteLayer(this.props.id)}else{var a=Object(l.a)({},this.props);a.isToggledOn=!this.props.isToggledOn,delete a.deleteModeActive,delete a.onItemClick,delete a.numberOfLayersOn,this.props.onItemClick(a)}else this.props.openModal("maxLayers",this.Config.maxLayersWarning.replace("{maxLayers}",this.Config.maxLayers),{noSubmit:!0})}},{key:"render",value:function(){var e=this.props.display_name;return Object(k.jsxs)("button",{className:this.props.isToggledOn?"item on":"item off",onClick:this.onClick,style:{backgroundImage:'url("'+this.state.thumbnail_path+'")'},id:this.props.id,"data-tip":this.props.display_name,"data-place":"top","data-for":"modal","data-event":"mouseover","data-delay-show":"900","data-event-off":"mouseout","data-clickable":"false","data-tip-disable":L,children:[Object(k.jsx)("div",{className:this.props.deleteModeActive?"deleteModeOn":"deleteModeOff",children:Object(k.jsx)(T.a,{icon:"trash",color:"red",size:"5x"})}),Object(k.jsx)("div",{className:e.length>=10?"label long-title":"label",children:e.length>20?e.slice(0,20)+"...":e})]})}}]),a}(i.Component),te=function(e){return Object(k.jsx)(S.d,{initialValues:R,validationSchema:A,onSubmit:function(t,a){a.setSubmitting;e.addLayer(t),e.closeModal()},children:Object(k.jsxs)(S.c,{children:[Object(k.jsxs)("h3",{className:"modalHeader",children:["Add New Layer\xa0",Object(k.jsx)(G,{tooltipName:E.AddNewLayer})]}),Object(k.jsx)("label",{className:"textInputLabel",htmlFor:"url",children:"Url\xa0"}),Object(k.jsx)(G,{tooltipName:E.LayerUrl}),Object(k.jsx)("div",{className:"inputGroup",children:Object(k.jsx)(S.b,{as:"textarea",name:"url"})}),Object(k.jsx)(N,{name:"layer_type"}),Object(k.jsx)(z,{name:"brrr"}),Object(k.jsxs)("div",{className:"inputGroup",children:[Object(k.jsx)("label",{className:"textInputLabel",htmlFor:"display_name",children:"Display Name"}),Object(k.jsx)(S.b,{name:"display_name",type:"text"}),Object(k.jsx)(S.a,{className:"error",component:"div",name:"display_name"})]}),Object(k.jsxs)("div",{className:"inputGroup",children:[Object(k.jsx)("label",{className:"textInputLabel",htmlFor:"thumbnail_path",children:"Thumbnail location (optional)"}),Object(k.jsx)(S.b,{name:"thumbnail_path",type:"text"}),Object(k.jsx)(S.a,{className:"error",component:"div",name:"thumbnail_path"})]}),Object(k.jsxs)("div",{className:"inputGroup",children:[Object(k.jsx)("label",{className:"textInputLabel",htmlFor:"format",children:"Image Format (optional)"}),Object(k.jsx)(S.b,{name:"format",type:"text"}),Object(k.jsx)(S.a,{className:"error",component:"div",name:"format"})]}),Object(k.jsx)("br",{}),Object(k.jsx)("button",{type:"submit",children:"OK"}),Object(k.jsx)("button",{type:"button",onClick:e.closeModal,children:"Cancel"})]})})},ae=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).Config=window.sideby.Config,_.b.add(w.m),_.b.add(w.n),i.onClick=i.onClick.bind(Object(p.a)(i)),i.state={isToggledOn:!1},i.modalType="AddLayerItem",i}return Object(d.a)(a,[{key:"onClick",value:function(e){var t=Object(k.jsx)(te,Object(l.a)({},this.props));this.props.openModal("AddLayerItem",t)}},{key:"render",value:function(){return Object(k.jsx)("button",{className:"add-layer item background-black",onClick:this.onClick,"data-tip":"Add Comparison Layer","data-for":"modal","data-place":"top","data-event":"mouseover","data-delay-show":"900","data-event-off":"mouseout","data-tip-disable":L,name:"Add Layer",id:"add-layer",children:Object(k.jsx)("div",{className:"icon-label",children:Object(k.jsxs)("span",{className:"fa-layers fa-fw fa-5x",children:[Object(k.jsx)(T.a,{icon:"map"}),Object(k.jsx)(T.a,{icon:"plus",transform:"shrink-5",color:"white"})]})})})}}]),a}(ee),ie=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).Config=window.sideby.Config,_.b.add(w.s),i.onClick=i.onClick.bind(Object(p.a)(i)),i.state={isToggledOn:!1},i}return Object(d.a)(a,[{key:"onClick",value:function(e){this.props.toggleDeleteMode(!this.props.deleteModeActive)}},{key:"render",value:function(){return Object(k.jsx)("button",{className:this.props.deleteModeActive?"item background-black deleteModeOn":"item background-black deleteModeOff",onClick:this.onClick,"data-tip":"Delete Layers","data-for":"modal","data-place":"top","data-event":"mouseover","data-delay-show":"900","data-event-off":"mouseout","data-tip-disable":L,name:"Delete Layers",id:"delete-layers",children:Object(k.jsx)("div",{className:"icon-label",children:Object(k.jsx)(T.a,{icon:"trash-alt",size:"5x"})})})}}]),a}(ee);a(789);_.b.add(w.a),_.b.add(w.b);var ne=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).onClick=i.onClick.bind(Object(p.a)(i)),i}return Object(d.a)(a,[{key:"onClick",value:function(e){this.props.onClick(this.props.direction)}},{key:"render",value:function(){var e="left"===this.props.direction?"angle-left":"angle-right";return Object(k.jsx)("div",{className:"ScrollButton "+this.props.direction,onClick:this.onClick,children:Object(k.jsx)("button",{children:Object(k.jsx)(T.a,{icon:e,size:"lg"})})})}}]),a}(i.Component),oe=(a(790),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).handleItemClick=i.handleItemClick.bind(Object(p.a)(i)),i.handleScrollButtonClick=i.handleScrollButtonClick.bind(Object(p.a)(i)),i.scrollTo=i.scrollTo.bind(Object(p.a)(i)),i.onWheel=i.onWheel.bind(Object(p.a)(i)),i.easeInOutQuad=i.easeInOutQuad.bind(Object(p.a)(i)),i.state={},i}return Object(d.a)(a,[{key:"handleItemClick",value:function(e){var t=e.id,a=Object(m.cloneDeep)(this.state);a.layers.forEach((function(i,n){i.id===t&&(a.layers[n]=e)})),this.setState(a),this.props.onItemClick(e)}},{key:"handleScrollButtonClick",value:function(e){this.scrollTo(e,350)}},{key:"componentDidUpdate",value:function(e,t){if(this.props.newLayer){if(e.newLayer&&e.newLayer.id===this.props.newLayer.id)return;var a=this.props.newLayer,i=this.state.layers;i.push(a),this.setState({layers:i})}this.props.viewbarLayers&&this.props.viewbarLayers.length!==this.state.layers.length&&this.setState({layers:this.props.viewbarLayers})}},{key:"componentDidMount",value:function(e,t){this.setState({layers:this.props.viewbarLayers})}},{key:"onWheel",value:function(e){var t=document.getElementById("viewbarItems"),a=1===e.deltaMode?50*e.deltaY:e.deltaY;t.scrollLeft=t.scrollLeft+a}},{key:"scrollTo",value:function(e,t){var a=document.getElementById("viewbarItems"),i=a.scrollLeft,n=document.documentElement.clientWidth,o=Math.max(n/2,300),r="left"===e?-o:+o,s=0,l=this;!function e(){s+=20;var n=l.easeInOutQuad(s,i,r,t);a.scrollLeft=n,s<t&&setTimeout(e,20)}()}},{key:"easeInOutQuad",value:function(e,t,a,i){return(e/=i/2)<1?a/2*e*e+t:-a/2*(--e*(e-2)-1)+t}},{key:"render",value:function(){var e=this,t=this.state.layers||[],a=this.props.deleteModeActive;return Object(k.jsxs)("footer",{id:"Viewbar",className:"ViewBar-container bottom",children:[Object(k.jsx)(ne,{direction:"left",onClick:this.handleScrollButtonClick}),Object(k.jsxs)("div",{onWheel:this.onWheel,onScroll:this.onScroll,scrollleft:this.state.scrollLeft,className:"flip-move",id:"viewbarItems",children:[t.map((function(t){return Object(k.jsx)(ee,Object(l.a)({deleteModeActive:a,deleteLayer:e.props.deleteLayer,numberOfLayersOn:e.props.numberOfLayersOn,onItemClick:e.handleItemClick,openModal:e.props.openModal,closeModal:e.props.closeModal,rebuildTooltip:e.props.rebuildTooltip},t),t.id)})),Object(k.jsx)(ae,{rebuildTooltip:this.props.rebuildTooltip,numberOfLayersOn:this.props.numberOfLayersOn,openModal:this.props.openModal,closeModal:this.props.closeModal,addLayer:this.props.addLayer}),t.length>0&&Object(k.jsx)(ie,{rebuildTooltip:this.props.rebuildTooltip,deleteModeActive:a,toggleDeleteMode:this.props.toggleDeleteMode})]}),Object(k.jsx)(ne,{direction:"right",onClick:this.handleScrollButtonClick})]})}}]),a}(i.Component)),re=a(236),se=a.n(re);a(799),a(800),a(801);se.a.setAppElement("#root");var le=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).formatContent=i.formatContent.bind(Object(p.a)(i)),i.afterOpenModal=i.afterOpenModal.bind(Object(p.a)(i)),i.handleCloseModal=i.handleCloseModal.bind(Object(p.a)(i)),i.ref=n.a.createRef(null),i.getParent=i.getParent.bind(Object(p.a)(i)),i.state={},i}return Object(d.a)(a,[{key:"formatContent",value:function(e,t){return Object(k.jsx)("div",{id:"modalContent",children:t})}},{key:"afterOpenModal",value:function(){this.props.rebuildTooltip(!0)}},{key:"getParent",value:function(){return document.querySelector("#modalRoot")}},{key:"handleCloseModal",value:function(){this.props.closeModal()}},{key:"render",value:function(){var e=this.formatContent(this.props.modalType,this.props.modalContent);return Object(k.jsx)(se.a,{id:"modalContainer",ref:this.ref,closeTimeoutMS:500,className:"Modal-Content",isOpen:this.props.isOpen,onAfterOpen:this.afterOpenModal,onRequestClose:this.handleCloseModal,parentSelector:this.getParent,contentLabel:"Modal",children:e},"modal")}}]),a}(i.Component),ce=(a(802),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).onChange=i.onChange.bind(Object(p.a)(i)),i}return Object(d.a)(a,[{key:"resetRebuildTooltip",value:function(){this.props.resetRebuildTooltip(!1)}},{key:"componentDidUpdate",value:function(e,t){!0===this.props.rebuildTooltip&&this.resetRebuildTooltip(),v.a.rebuild()}},{key:"onChange",value:function(){}},{key:"render",value:function(){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(v.a,{className:"superHighZIndex",effect:"solid",id:"modal",place:"right",multiline:!0}),Object(k.jsx)(v.a,{effect:"solid",id:"home"})]})}}]),a}(i.Component)),de=a(391),pe=a(140),ue=a(363),he=a(364),be=a(361),ye=a(362),me=a(382),fe=a.n(me),je=a(14),ve=a(383),Oe=a.n(ve),ge=(Object(je.d)(Oe.a),a(46)),xe=(a(804),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"createLeafletElement",value:function(e){var t=new M.a.WFS(this.getOptions(e));return this.contextValue=Object(l.a)(Object(l.a)({},e.leaflet),{},{layerContainer:t,popupContainer:t}),t}},{key:"updateLeafletElement",value:function(e,t){t.url!==e.url&&this.leafletElement.setUrl(t.url)}}]),a}(ge.a)),Le=Object(je.d)(xe),_e=a(19),we=a.n(_e),Ce=a(116),Me=a(87),ke=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"createLeafletElement",value:function(e){return Object(Me.d)(e)}}]),a}(Ce.a);ke.propTypes={url:we.a.string.isRequired};var Fe=Object(je.d)(ke),Te=a(51),Se=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"createLeafletElement",value:function(e){var t=Object(l.a)(Object(l.a)({},e),{},{f:"image"}),a=Object(Me.a)(t);return this.contextValue=Object(l.a)(Object(l.a)({},e.leaflet),{},{popupContainer:a}),a}},{key:"updateLeafletElement",value:function(e,t){t.url!==e.url&&this.leafletElement.setUrl(t.url)}}]),a}(Te.a),Ee=Object(je.d)(Se),Ge=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"createLeafletElement",value:function(e){var t=Object(l.a)({},e),a=Object(Me.b)(t);return this.contextValue=Object(l.a)(Object(l.a)({},e.leaflet),{},{popupContainer:a}),a}},{key:"updateLeafletElement",value:function(e,t){t.url!==e.url&&this.leafletElement.setUrl(t.url)}}]),a}(Te.a),Ie=Object(je.d)(Ge),De=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"createLeafletElement",value:function(e){var t=Object(l.a)({},e);t.zIndex=2;var a=Object(Me.c)(t);return this.contextValue=Object(l.a)(Object(l.a)({},e.leaflet),{},{popupContainer:a}),a}},{key:"updateLeafletElement",value:function(e,t){t.url!==e.url&&this.leafletElement.setUrl(t.url)}}]),a}(Te.a),ze=Object(je.d)(De),Ne=a(69),Re=a(237);a(805);!function(){var e,t=window.console||{error:function(){},warn:function(){}};(e=M.a).Control.Loading=e.Control.extend({options:{delayIndicator:null,position:"topleft",separate:!1,zoomControl:null,spinjs:!1,spin:{lines:7,length:3,width:3,radius:5,rotate:13,top:"83%"}},initialize:function(t){e.setOptions(this,t),this._dataLoaders={},null!==this.options.zoomControl&&(this.zoomControl=this.options.zoomControl)},onAdd:function(a){if(this.options.spinjs&&"function"!==typeof Re.a)return t.error("Leaflet.loading cannot load because you didn't load spin.js (http://fgnass.github.io/spin.js/), even though you set it in options.");this._addLayerListeners(a),this._addMapListeners(a),this.options.separate||this.zoomControl||(a.zoomControl?this.zoomControl=a.zoomControl:a.zoomsliderControl&&(this.zoomControl=a.zoomsliderControl));var i,n="leaflet-control-loading";return this.zoomControl&&!this.options.separate?(i=this.zoomControl._container,n+=" leaflet-bar-part-bottom leaflet-bar-part last",e.DomUtil.addClass(this._getLastControlButton(),"leaflet-bar-part-bottom")):i=e.DomUtil.create("div","leaflet-control-zoom leaflet-control-layer-container leaflet-bar"),this._indicatorContainer=i,this._indicator=e.DomUtil.create("a",n,i),this.options.spinjs&&(this._spinner=new Re.a(this.options.spin).spin(),this._indicator.appendChild(this._spinner.el)),i},onRemove:function(e){this._removeLayerListeners(e),this._removeMapListeners(e)},removeFrom:function(t){return this.zoomControl&&!this.options.separate?(this._container.removeChild(this._indicator),this._map=null,this.onRemove(t),this):e.Control.prototype.removeFrom.call(this,t)},addLoader:function(e){if(this._dataLoaders[e]=!0,this.options.delayIndicator&&!this.delayIndicatorTimeout){var a=this;this.delayIndicatorTimeout=setTimeout((function(){t.log("delayed."),a.updateIndicator(),a.delayIndicatorTimeout=null}),this.options.delayIndicator)}else this.updateIndicator()},removeLoader:function(e){delete this._dataLoaders[e],this.updateIndicator(),this.options.delayIndicator&&this.delayIndicatorTimeout&&!this.isLoading()&&(clearTimeout(this.delayIndicatorTimeout),this.delayIndicatorTimeout=null)},updateIndicator:function(){this.isLoading()?this._showIndicator():this._hideIndicator()},isLoading:function(){return this._countLoaders()>0},_countLoaders:function(){var e,t=0;for(e in this._dataLoaders)this._dataLoaders.hasOwnProperty(e)&&t++;return t},_showIndicator:function(){e.DomUtil.addClass(this._indicator,"is-loading"),e.DomUtil.addClass(this._indicatorContainer,"is-loading"),this.options.separate||(this.zoomControl instanceof e.Control.Zoom?e.DomUtil.removeClass(this._getLastControlButton(),"leaflet-bar-part-bottom"):"function"===typeof e.Control.Zoomslider&&this.zoomControl instanceof e.Control.Zoomslider&&e.DomUtil.removeClass(this.zoomControl._ui.zoomOut,"leaflet-bar-part-bottom"))},_hideIndicator:function(){e.DomUtil.removeClass(this._indicator,"is-loading"),e.DomUtil.removeClass(this._indicatorContainer,"is-loading"),this.options.separate||(this.zoomControl instanceof e.Control.Zoom?e.DomUtil.addClass(this._getLastControlButton(),"leaflet-bar-part-bottom"):"function"===typeof e.Control.Zoomslider&&this.zoomControl instanceof e.Control.Zoomslider&&e.DomUtil.addClass(this.zoomControl._ui.zoomOut,"leaflet-bar-part-bottom"))},_getLastControlButton:function(){for(var e=this.zoomControl._container,t=e.children.length-1;t>0;){var a=e.children[t];if(this._indicator!==a&&0!==a.offsetWidth&&0!==a.offsetHeight)break;t--}return e.children[t]},_handleLoading:function(e){this.addLoader(this.getEventId(e))},_handleBaseLayerChange:function(t){var a=this;t.layer&&t.layer.eachLayer&&"function"===typeof t.layer.eachLayer?t.layer.eachLayer((function(e){a._handleBaseLayerChange({layer:e})})):e.TileLayer.Canvas&&t.layer instanceof e.TileLayer.Canvas||a._handleLoading(t)},_handleLoad:function(e){this.removeLoader(this.getEventId(e))},getEventId:function(e){return e.id?e.id:e.layer?e.layer._leaflet_id:e.target._leaflet_id},_layerAdd:function(e){if(e.layer&&e.layer.on)try{e.layer.on({loading:this._handleLoading,load:this._handleLoad},this)}catch(a){t.warn("L.Control.Loading: Tried and failed to add  event handlers to layer",e.layer),t.warn("L.Control.Loading: Full details",a)}},_layerRemove:function(e){if(e.layer&&e.layer.off)try{e.layer.off({loading:this._handleLoading,load:this._handleLoad},this)}catch(a){t.warn("L.Control.Loading: Tried and failed to remove event handlers from layer",e.layer),t.warn("L.Control.Loading: Full details",a)}},_addLayerListeners:function(e){e.eachLayer((function(e){e.on&&e.on({loading:this._handleLoading,load:this._handleLoad},this)}),this),e.on("layeradd",this._layerAdd,this),e.on("layerremove",this._layerRemove,this)},_removeLayerListeners:function(e){e.eachLayer((function(e){e.off&&e.off({loading:this._handleLoading,load:this._handleLoad},this)}),this),e.off("layeradd",this._layerAdd,this),e.off("layerremove",this._layerRemove,this)},_addMapListeners:function(e){e.on({baselayerchange:this._handleBaseLayerChange,dataloading:this._handleLoading,dataload:this._handleLoad,layerremove:this._handleLoad},this)},_removeMapListeners:function(e){e.off({baselayerchange:this._handleBaseLayerChange,dataloading:this._handleLoading,dataload:this._handleLoad,layerremove:this._handleLoad},this)}}),e.Map.addInitHook((function(){this.options.loadingControl&&(this.loadingControl=new e.Control.Loading,this.addControl(this.loadingControl))})),e.Control.loading=function(t){return new e.Control.Loading(t)}}();a(806),a(807);var Ae=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"createLeafletElement",value:function(e){var t=e.opts;return new M.a.Control.Loading(t)}}]),a}(Ne.a),Pe=Object(je.d)(Ae);a(808),a(809),a(810);_.b.add(w.j);var We=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.provided,a=e.display_name;return Object(k.jsxs)("div",{className:"Handle map-title",children:[Object(k.jsx)("span",Object(l.a)(Object(l.a)({className:"Handle-span"},t.dragHandleProps),{},{children:Object(k.jsx)(T.a,{className:"Handle-drag-icon",icon:"grip-vertical",size:"1x"})})),"\xa0",a.length>20?a.slice(0,20)+"...":a]})}}]),a}(n.a.Component),Ue=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e,i){var n;Object(c.a)(this,a),(n=t.call(this,e)).Config=window.sideby.Config,n.mapboxToken=n.Config.mapboxToken,n.labelLayerUrl=n.Config.labelLayerUrl+n.mapboxToken;var o={center:n.Config.mapDefaultCenter,zoom:n.Config.mapDefaultZoom};return n.viewport=o,n.invalidateMapSizes=n.invalidateMapSizes.bind(Object(p.a)(n)),n.syncMaps=n.syncMaps.bind(Object(p.a)(n)),n.unsyncMaps=n.unsyncMaps.bind(Object(p.a)(n)),n.moveend=n.moveend.bind(Object(p.a)(n)),n.onViewportChanged=n.onViewportChanged.bind(Object(p.a)(n)),n.passUpRef=n.passUpRef.bind(Object(p.a)(n)),n.onResize=n.onResize.bind(Object(p.a)(n)),n.onGeocodeClick=n.onGeocodeClick.bind(Object(p.a)(n)),n.bboxStringToLatLngBoundsArray=n.bboxStringToLatLngBoundsArray.bind(Object(p.a)(n)),n.checkLayerBounds=n.checkLayerBounds.bind(Object(p.a)(n)),n.layerOptionBlacklist=["minZoom","maxZoom","isToggledOn","visibleIndex","id","start_bounds","thumbnail_path","display_name","numberOfLayersOn","deleteLayer","closeModal","openModal","rebuildTooltip","leaflet","layer_type","row"],n}return Object(d.a)(a,[{key:"componentWillUnmount",value:function(){this.passUpRef(this.props.layer.id,this.props.mapRef,!0)}},{key:"componentDidMount",value:function(e,t){this.passUpRef(this.props.layer.id,this.props.mapRef)}},{key:"componentDidUpdate",value:function(e,t){e.layer.visibleIndex,this.props.layer.visibleIndex}},{key:"onResize",value:function(e){}},{key:"moveend",value:function(e){}},{key:"invalidateMapSizes",value:function(){this.props.invalidateMapSizes()}},{key:"unsyncMaps",value:function(e){this.props.unsyncMaps(e)}},{key:"syncMaps",value:function(){this.props.syncMaps()}},{key:"passUpRef",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.setState({mapRef:t}),this.props.passUpRef(e,t,a)}},{key:"bboxStringToLatLngBoundsArray",value:function(){var e=this.props.layer.start_bounds.split(",");return[[e[1],e[0]],[e[3],e[2]]]}},{key:"checkLayerBounds",value:function(){return this.props.layer.start_bounds?this.bboxStringToLatLngBoundsArray():null}},{key:"clearGeocode",value:function(){this.props.clearGeocode()}},{key:"onGeocodeClick",value:function(){this.clearGeocode()}},{key:"onViewportChanged",value:function(e){this.viewport=e}},{key:"render",value:function(){var e=this,t={EsriFeatureLayer:Ie,EsriTiledMapLayer:Fe,EsriImageLayer:ze,EsriDynamicMapLayer:Ee,TileLayer:ue.a,WMSTileLayer:he.a,WMTSTileLayer:fe.a,WFSLayer:Le},a=this.props.overlays,i=function(){return Object(k.jsx)(k.Fragment,{children:a.map((function(a){var i=t[a.layer_type];return Object(k.jsx)(i,Object(l.a)({format:"image/png8",transparent:"true",url:a.url,zIndex:a.is_basemap?1:1e5,pane:a.is_basemap?"tilePane":"overlayPane"},g(Object(m.cloneDeep)(a),e.layerOptionBlacklist)),a.id)}))})},n=Object(m.cloneDeep)(this.props.layer),o=t[n.layer_type],r=this.props.provided;return Object(k.jsxs)("div",Object(l.a)(Object(l.a)({},r.draggableProps),{},{ref:r.innerRef,children:[Object(k.jsx)(We,{provided:r,display_name:n.display_name}),Object(k.jsxs)(be.a,{ref:this.props.mapRef,minZoom:this.Config.mapMinZoom,bounds:this.checkLayerBounds(),onResize:this.onResize,maxZoom:n.maxZoom,onViewportChanged:this.onViewportChanged,className:"map"+this.props.numberLayers+(this.props.isDragging?"dragging":"nope"),id:n.id,viewport:this.viewport,zoomControlAdded:!0,loadingControl:!0,preferCanvas:!0,children:[Object(k.jsx)(Pe,{opts:{position:"bottomleft",spinjs:!0,separate:!0,spin:{lines:15,length:10,width:3,radius:15,color:"#ffffff",left:"100%",top:"-25%",fadeColor:"black",shadow:"0 0 5px black"}}}),this.props.geocodeResult&&Object(k.jsx)(ye.a,{position:this.props.geocodeResult,onClick:this.onGeocodeClick}),this.props.labelLayerOn&&Object(k.jsx)(ue.a,{url:this.labelLayerUrl,pane:"shadowPane",zIndex:1e6},"labels-"+n.id),this.props.overlays.length>0&&Object(k.jsx)(i,{}),Object(k.jsx)(o,Object(l.a)({zIndex:1e6},g(n,this.layerOptionBlacklist)),n.id)]},n.id)]}))}}]),a}(i.Component),Ve=n.a.forwardRef((function(e,t){return Object(k.jsx)(Ue,Object(l.a)({mapRef:t},e))})),Be=(a(811),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.provided,i=t.layers,n=i.map((function(t,a){return Object(k.jsx)(pe.b,{draggableId:"draggable-"+t.id,index:a,children:function(n,o){return Object(k.jsx)(Ve,{layer:t,overlays:e.props.overlays,numberLayers:i.length,innerRef:n.innerRef,layerIndex:a,provided:n,isDragging:o.isDragging,passUpRef:e.props.passUpRef,mapRef:e.props.mapRef,syncMaps:e.props.syncMaps,geocodeResult:e.props.geocodeResult,clearGeocode:e.props.clearGeocode,unsyncMaps:e.props.unsyncMaps,labelLayerOn:e.props.labelLayerOn,invalidateMapSizes:e.props.invalidateMapSizes},t.id)}},"draggable-"+t.id)}));return Object(k.jsxs)("div",Object(l.a)(Object(l.a)({className:this.props.className,ref:a.innerRef},a.droppableProps),{},{children:[n,a.placeholder]}))}}]),a}(n.a.Component)),Ze=n.a.forwardRef((function(e,t){return Object(k.jsx)(Be,Object(l.a)({mapRef:t},e))})),Je=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).onDragEnd=i.onDragEnd.bind(Object(p.a)(i)),i.setMapRef=i.setMapRef.bind(Object(p.a)(i)),i.syncMaps=i.syncMaps.bind(Object(p.a)(i)),i.unsyncMaps=i.unsyncMaps.bind(Object(p.a)(i)),i.invalidateMapSizes=i.invalidateMapSizes.bind(Object(p.a)(i)),i.handleGeocode=i.handleGeocode.bind(Object(p.a)(i)),i.clearGeocode=i.clearGeocode.bind(Object(p.a)(i)),i.state={mapRefs:{}},i.passUpRef=i.passUpRef.bind(Object(p.a)(i)),i}return Object(d.a)(a,[{key:"passUpRef",value:function(e,t,a){var i={mapRefs:this.state.mapRefs};a?(this.unsyncMaps(e),delete i.mapRefs[e],this.setState(i)):(this.manageZoomControls(),this.syncMaps()),this.invalidateMapSizes()}},{key:"setMapRef",value:function(e){var t={mapRefs:this.state.mapRefs};e&&(t.mapRefs[e.container.id]=e,this.setState(t))}},{key:"onDragEnd",value:function(e){if(null!==e.destination){var t,a,i=this.props.layers,n=e.source.droppableId,o=e.destination.droppableId;t="row2"===n?i.filter((function(e){return"row1"===e.row})).length+e.source.index:"row3"===n?i.filter((function(e){return"row1"===e.row})).length+i.filter((function(e){return"row2"===e.row})).length+e.source.index:e.source.index,a="row2"===o?i.filter((function(e){return"row1"===e.row})).length+e.destination.index:"row3"===o?i.filter((function(e){return"row1"===e.row})).length+i.filter((function(e){return"row2"===e.row})).length+e.destination.index:e.destination.index;var r=i.filter((function(e){return e.isToggledOn}));x(r,t,a),this.props.updateLayerDisplayIndexesAndRows(r)}}},{key:"manageZoomControls",value:function(){var e,t=this.state.mapRefs,a=this.props.layers;for(var i in t)e=t[i].leafletElement,0===a[O(a,"id",i)].visibleIndex?(e.removeControl(e.zoomControl),e.addControl(e.zoomControl)):e.removeControl(e.zoomControl)}},{key:"invalidateMapSizes",value:function(){var e=this.state.mapRefs;for(var t in e)e[t].leafletElement.invalidateSize()}},{key:"unsyncMaps",value:function(e){var t=this.state.mapRefs;for(var a in t)a!==e&&t[e]&&(t[e].leafletElement.unsync(t[a].leafletElement),t[a].leafletElement.unsync(t[e].leafletElement))}},{key:"syncMaps",value:function(){var e=this.state.mapRefs;for(var t in e)for(var a in e)t===a||e[t].leafletElement.isSynced(e[a].leafletElement)||e[t].leafletElement.sync(e[a].leafletElement,{syncCursor:!0})}},{key:"clearGeocode",value:function(){this.setState({geocodeResult:!1})}},{key:"handleGeocode",value:function(e){var t=Object.entries(this.state.mapRefs)[0][1],a=this.props.geocodeResult.geocode.bbox,i=this.props.geocodeResult.geocode.center;a._northEast.lat!==a._southWest.lat?t.leafletElement.fitBounds(a):t.leafletElement.setView(i,15),this.setState({geocodeResult:i}),setTimeout(this.clearGeocode,2e3)}},{key:"componentDidUpdate",value:function(e,t){var a=e.layers,i=this.props.layers;a.filter((function(e){return e.isToggledOn})).length!==i.filter((function(e){return e.isToggledOn})).length?this.invalidateMapSizes():function(e,t){for(var a=!0,i=e.length;i--;)e[i]!==t[i]&&(a=!1);return a}(a,i)||setTimeout(this.invalidateMapSizes,400),a.length!==i.length||Object(m.isEqual)(a.map((function(e){return e.display_name+e.visibleIndex.toString()})),i.map((function(e){return e.display_name+e.visibleIndex.toString()})))||this.manageZoomControls(),e.geocodeResult!==this.props.geocodeResult&&this.handleGeocode(this.props.geocodeResult),this.props.invalidateMapSizes&&(this.invalidateMapSizes(),this.props.toggleInvalidateMapSizes(!1))}},{key:"render",value:function(){var e=this,t=this.props.layers.filter((function(e){return e.isToggledOn})),a=[];t.forEach((function(e){a.push(e.row)})),a=new Set(a),a=Object(de.a)(a);var i=t.filter((function(e){return"row1"===e.row}));i.sort((function(e,t){return e.visibleIndex-t.visibleIndex}));var n=t.filter((function(e){return"row2"===e.row}));n.sort((function(e,t){return e.visibleIndex-t.visibleIndex}));var o=t.filter((function(e){return"row3"===e.row}));n.sort((function(e,t){return e.visibleIndex-t.visibleIndex}));var r=a.map((function(t,r){return Object(k.jsx)(pe.c,{droppableId:t,direction:"horizontal",children:function(r,s){return Object(k.jsx)(Ze,{className:"Row "+t+(2===a.length?" two-rows":3===a.length?" three-rows":""),provided:r,snapshot:s,passUpRef:e.passUpRef,geocodeResult:e.state.geocodeResult,clearGeocode:e.clearGeocode,mapRef:e.setMapRef,innerRef:r.innerRef,syncMaps:e.syncMaps,labelLayerOn:e.props.labelLayerOn,unsyncMaps:e.unsyncMaps,invalidateMapSizes:e.invalidateMapSizes,overlays:e.props.overlays,layers:"row1"===t?i:"row2"===t?n:o})}},t)}));return Object(k.jsx)("div",{id:"maps",children:Object(k.jsx)(pe.a,{onDragEnd:this.onDragEnd,children:r})})}}]),a}(i.Component),Qe=n.a.forwardRef((function(e,t){return Object(k.jsx)(Je,Object(l.a)({mapRef:t},e))})),Xe=[{layer_type:"TileLayer",display_name:"1924",url:"https://maps.nyc.gov/xyz/1.0.0/photo/1924/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc1924.jpg"},{layer_type:"TileLayer",display_name:"1951",url:"https://maps.nyc.gov/xyz/1.0.0/photo/1951/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc1951.jpg"},{layer_type:"TileLayer",display_name:"1996",url:"https://maps.nyc.gov/xyz/1.0.0/photo/1996/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc1996.jpg"},{layer_type:"TileLayer",display_name:"2001-2",url:"https://maps.nyc.gov/xyz/1.0.0/photo/2001-2/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc2001-2.jpg"},{layer_type:"TileLayer",display_name:"2004",url:"https://maps.nyc.gov/xyz/1.0.0/photo/2004/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc2004.jpg"},{layer_type:"TileLayer",display_name:"2006",url:"https://maps.nyc.gov/xyz/1.0.0/photo/2006/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc2006.jpg"},{layer_type:"TileLayer",display_name:"2008",url:"https://maps.nyc.gov/xyz/1.0.0/photo/2008/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc2008.jpg"},{layer_type:"TileLayer",display_name:"2010",url:"https://maps.nyc.gov/xyz/1.0.0/photo/2010/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc2010.jpg"},{layer_type:"TileLayer",display_name:"2012",url:"https://maps.nyc.gov/xyz/1.0.0/photo/2012/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc2012.jpg"},{layer_type:"TileLayer",display_name:"2014",url:"https://maps.nyc.gov/xyz/1.0.0/photo/2014/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc2014.jpg"},{layer_type:"TileLayer",display_name:"2016",url:"https://maps.nyc.gov/xyz/1.0.0/photo/2016/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc2016.jpg"},{layer_type:"TileLayer",display_name:"2018",url:"https://maps.nyc.gov/tms/1.0.0/photo/2018/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc2018.jpg",tms:!0}],He=[{layer_type:"EsriTiledMapLayer",id:"stw_1923map",display_name:"1923",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw_1923map/MapServer",thumbnail_path:"demo/thumb_stw_1923map.JPG",maxZoom:20},{layer_type:"EsriTiledMapLayer",id:"oksm_WPA_PAY_017",display_name:"1936",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/oksm_WPA_PAY_017/MapServer",thumbnail_path:"demo/thumb_oksm_WPA_PAY_017.JPG",maxZoom:20},{layer_type:"EsriTiledMapLayer",id:"stw1938",display_name:"1938",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1938/MapServer",thumbnail_path:"demo/thumb_stw1938.JPG",maxZoom:19},{layer_type:"EsriTiledMapLayer",id:"stw1949",display_name:"1949",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1949/MapServer",thumbnail_path:"demo/thumb_stw1949.JPG",maxZoom:19},{layer_type:"EsriTiledMapLayer",id:"stw1956_tiles",display_name:"1956",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1956_tiles/MapServer",thumbnail_path:"demo/thumb_stw1956_tiles.JPG",maxZoom:19},{layer_type:"EsriTiledMapLayer",id:"Map_Stillwater_1959",display_name:"1959",thumbnail_path:"demo/thumb_Map_Stillwater_1959.JPG",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/Map_Stillwater_1959/MapServer"},{layer_type:"EsriTiledMapLayer",id:"stw1963",display_name:"1963",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1963/MapServer",thumbnail_path:"demo/thumb_stw1963.JPG",maxZoom:19},{layer_type:"EsriTiledMapLayer",id:"stw1969_3",display_name:"1969",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1969_3/MapServer",thumbnail_path:"demo/thumb_stw1969_3.JPG",maxZoom:19},{layer_type:"EsriTiledMapLayer",id:"stw1969_3k",footprint_layer:"stw1969_3k_fp",display_name:"1969 (OSU)",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1969_3k/MapServer",thumbnail_path:"demo/thumb_stw1969_3k.JPG",maxZoom:20},{layer_type:"EsriTiledMapLayer",id:"OSU_1978",display_name:"1978 (OSU)",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/OSU_1978/MapServer",thumbnail_path:"demo/thumb_OSU_1978.JPG",maxZoom:20},{layer_type:"EsriTiledMapLayer",id:"stw1979",display_name:"1979",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1979/MapServer",thumbnail_path:"demo/thumb_stw1979.JPG",maxZoom:19},{layer_type:"EsriTiledMapLayer",id:"osu1986_2",display_name:"1986 (OSU)",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/osu1986_2/MapServer",thumbnail_path:"demo/thumb_osu1986_2.JPG",maxZoom:20},{layer_type:"EsriTiledMapLayer",id:"stw1991",display_name:"1991",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1991/MapServer",thumbnail_path:"demo/thumb_stw1991.JPG",maxZoom:21},{layer_type:"EsriTiledMapLayer",id:"stw1995_2",display_name:"1995",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1995_2/MapServer",thumbnail_path:"demo/thumb_stw1995_2.JPG",maxZoom:18},{layer_type:"EsriTiledMapLayer",id:"osu1996",display_name:"1996 (OSU)",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/osu1996/MapServer",thumbnail_path:"demo/thumb_osu1996.JPG",maxZoom:20},{layer_type:"EsriTiledMapLayer",id:"stw1999_2",display_name:"1999",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1999_2/MapServer",thumbnail_path:"demo/thumb_stw1999_2.JPG",maxZoom:20},{layer_type:"EsriTiledMapLayer",id:"payne_2003",display_name:"2003",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/payne_2003/MapServer",thumbnail_path:"demo/thumb_payne_2003.JPG",maxZoom:19},{layer_type:"EsriTiledMapLayer",id:"Payne_2006_sid",display_name:"2006",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/Payne_2006_sid/MapServer",thumbnail_path:"demo/thumb_Payne_2006_sid.JPG",maxZoom:19},{layer_type:"EsriTiledMapLayer",id:"payne_2010",display_name:"2010",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/payne_2010/MapServer",thumbnail_path:"demo/thumb_payne_2010.JPG",maxZoom:19},{layer_type:"EsriTiledMapLayer",id:"esri_imagery",display_name:"2018",thumbnail_path:"demo/thumb_naip2017.JPG",url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",maxZoom:19}],qe=(a(847),a(848),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var i;Object(c.a)(this,a),(i=t.call(this,e)).Config=window.sideby.Config,i.addLayer=i.addLayer.bind(Object(p.a)(i)),i.addOverlay=i.addOverlay.bind(Object(p.a)(i)),i.calculateDisplayIndexes=i.calculateDisplayIndexes.bind(Object(p.a)(i)),i.calculateRowLayers=i.calculateRowLayers.bind(Object(p.a)(i)),i.closeModal=i.closeModal.bind(Object(p.a)(i)),i.deleteLayer=i.deleteLayer.bind(Object(p.a)(i)),i.deleteOverlay=i.deleteOverlay.bind(Object(p.a)(i)),i.handleItemClick=i.handleItemClick.bind(Object(p.a)(i)),i.openModal=i.openModal.bind(Object(p.a)(i)),i.rebuildTooltip=i.rebuildTooltip.bind(Object(p.a)(i)),i.transmitGeocode=i.transmitGeocode.bind(Object(p.a)(i)),i.toggleDeleteMode=i.toggleDeleteMode.bind(Object(p.a)(i)),i.toggleFullscreen=i.toggleFullscreen.bind(Object(p.a)(i)),i.toggleInvalidateMapSizes=i.toggleInvalidateMapSizes.bind(Object(p.a)(i)),i.toggleLabels=i.toggleLabels.bind(Object(p.a)(i)),i.toggleModal=i.toggleModal.bind(Object(p.a)(i)),i.toggleViewbarVisibility=i.toggleViewbarVisibility.bind(Object(p.a)(i)),i.updateLayerDisplayIndexesAndRows=i.updateLayerDisplayIndexesAndRows.bind(Object(p.a)(i)),i.state={layers:[],overlays:window.sideby.OverlaysInfo||[],numberOfLayersOn:0,geocodeResult:{},labelLayerOn:!0,rebuildTooltip:!1,modalIsOpen:!1,modalContent:"",viewbarVisible:!0,deleteModeActive:!1,invalidateMapSizes:!1},"#builder"===window.location.hash&&(window.sideby.LayersInfo=[]),"#stw"===window.location.hash&&(i.Config.siteTitle="Stillwater from the Air",i.Config.welcomeText="It's Stillwater!",i.Config.themeBackgroundColor="#f60",window.sideby.LayersInfo=He),"#nyc"===window.location.hash&&(i.Config.siteTitle="New York City through the years",i.Config.welcomeText="Using aerial photos from NYC Then & Now, click the buttons below to see how the city has changed over the last 100 years.",window.sideby.LayersInfo=Xe,i.state.overlays=[{layer_type:"TileLayer",url:"https://maps.nyc.gov/xyz/1.0.0/carto/basemap/{z}/{x}/{y}.jpg",id:"asfasdfasfadfadf",thumbnail_path:"nyc.jpg",display_name:"basemap",start_bounds:"-74.447928,40.442617,-73.512717,40.988043",format:"image/jpeg",is_basemap:!0}]),document.title=i.Config.siteTitle;var n=document.documentElement.style;n.setProperty("--header-color",i.Config.themeHeaderColor),n.setProperty("--header-font-family",i.Config.themeHeaderFontFamily),n.setProperty("--scroll-button-hover-color",i.Config.themeScrollButtonHoverColor),n.setProperty("--scroll-button-color",i.Config.themeScrollButtonColor),n.setProperty("--background-color",i.Config.themeBackgroundColor);var o=window.sideby.LayersInfo.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{isToggledOn:!1,id:j.a.generate()})}));return i.state.viewbarLayers=o.sort((function(e,t){return t.sortVal-e.sortVal})),i}return Object(d.a)(a,[{key:"addLayer",value:function(e){var t=e,a=j.a.generate();t.id=a,t.maxZoom=20;var i={viewbarLayers:this.state.viewbarLayers};i.viewbarLayers.push(t),this.setState(i)}},{key:"addOverlay",value:function(e){var t=Object(m.cloneDeep)(this.state.overlays),a=e;a.isOverlay=!0,a.id=j.a.generate(),a.interactive=!1,t.push(a),this.setState({overlays:t})}},{key:"calculateDisplayIndexes",value:function(e){var t=0;return e.map((function(e){return e.isToggledOn&&(e.visibleIndex=t,t++),e}))}},{key:"calculateRowLayers",value:function(e){var t=e.filter((function(e){return e.isToggledOn})),a=t.length;switch(t.sort((function(e,t){return e.visibleIndex-t.visibleIndex})),a){case 1:case 2:case 3:t.forEach((function(e){return e.row="row1"}));break;case 4:t.slice(0,2).forEach((function(e){return e.row="row1"})),t.slice(2).forEach((function(e){return e.row="row2"}));break;case 5:case 6:t.slice(0,3).forEach((function(e){return e.row="row1"})),t.slice(3).forEach((function(e){return e.row="row2"}));break;case 7:t.slice(0,4).forEach((function(e){return e.row="row1"})),t.slice(4).forEach((function(e){return e.row="row2"}));break;case 8:case 9:t.slice(0,3).forEach((function(e){return e.row="row1"})),t.slice(3,6).forEach((function(e){return e.row="row2"})),t.slice(6).forEach((function(e){return e.row="row3"}))}return t}},{key:"closeModal",value:function(){this.toggleModal(!1),v.a.hide()}},{key:"deleteOverlay",value:function(e){var t=e.currentTarget.dataset.overlayId;document.getElementById(t).style.display="none";var a=Object(m.cloneDeep)(this.state.overlays),i=O(a,"id",t);a.splice(i,1),this.setState({overlays:a})}},{key:"deleteLayer",value:function(e){var t=Object(m.cloneDeep)(this.state.viewbarLayers),a=O(t,"id",e);t.splice(a,1),this.setState({viewbarLayers:t})}},{key:"handleItemClick",value:function(e){var t,a=this,i=!1,n=Object(m.cloneDeep)(this.state.layers),o=Object(m.cloneDeep)(this.state.viewbarLayers);n.forEach((function(a,n){e.id===a.id&&(i=!0,t=n)})),i?(n[t].isToggledOn=!this.state.layers[t].isToggledOn,x(n,t,n.length-1)):n=n.concat([e]),o.forEach((function(t,i){e.id===t.id&&(o[i].isToggledOn=!a.state.viewbarLayers[i].isToggledOn)})),n=this.calculateDisplayIndexes(n);var r=(n=this.calculateRowLayers(n)).filter((function(e){return e.isToggledOn})).length,s={layers:n,numberOfLayersOn:r,viewbarLayers:o};this.setState(s)}},{key:"openModal",value:function(e,t,a){this.setState({modalType:e,modalContent:t,modalOptions:a}),this.toggleModal(!0)}},{key:"rebuildTooltip",value:function(e){this.setState({rebuildTooltip:e})}},{key:"toggleDeleteMode",value:function(e){this.setState({deleteModeActive:e}),this.forceUpdate()}},{key:"toggleFullscreen",value:function(){var e=this.state.isFullscreenEnabled;this.setState({isFullscreenEnabled:!e})}},{key:"toggleInvalidateMapSizes",value:function(e){this.setState({invalidateMapSizes:e})}},{key:"toggleLabels",value:function(){var e=this.state.labelLayerOn;this.setState({labelLayerOn:!e})}},{key:"toggleModal",value:function(e){this.setState({modalIsOpen:e})}},{key:"toggleViewbarVisibility",value:function(){var e=this.state.viewbarVisible;this.setState({viewbarVisible:!e}),this.toggleInvalidateMapSizes(!0)}},{key:"transmitGeocode",value:function(e){this.setState({geocode:e})}},{key:"updateLayerDisplayIndexesAndRows",value:function(e){var t=Object(m.cloneDeep)(this.state.layers);e.forEach((function(e,a){var i=O(t,"id",e.id);t[i].visibleIndex=a})),t=this.calculateRowLayers(t),this.setState({layers:t})}},{key:"render",value:function(){var e=this,t=this.state;return Object(k.jsxs)(y.a,{enabled:t.isFullscreenEnabled,onChange:function(t){return e.setState({isFullscreenEnabled:t})},children:[Object(k.jsx)("div",{id:"modalRoot"}),Object(k.jsxs)("div",{className:"App",children:[Object(k.jsx)(le,{closeModal:this.closeModal,isOpen:t.modalIsOpen,modalContent:t.modalContent,modalOptions:t.modalOptions,modalSubmit:this.modalSubmit,modalType:t.modalType,openModal:this.openModal,rebuildTooltip:this.rebuildTooltip}),Object(k.jsx)("header",{className:"App-header",children:this.Config.siteTitle}),Object(k.jsx)(ce,{rebuildTooltip:t.rebuildTooltip,resetRebuildTooltip:this.rebuildTooltip}),0===t.numberOfLayersOn&&Object(k.jsx)("div",{className:"no-maps",children:Object(k.jsx)("p",{children:this.Config.welcomeText})}),t.numberOfLayersOn>0&&Object(k.jsx)(Qe,{geocodeResult:t.geocode,invalidateMapSizes:t.invalidateMapSizes,labelLayerOn:t.labelLayerOn,layers:t.layers,mapCenter:this.mapCenter,numberOfLayersOn:t.numberOfLayersOn,overlays:t.overlays,toggleInvalidateMapSizes:this.toggleInvalidateMapSizes,updateLayerDisplayIndexesAndRows:this.updateLayerDisplayIndexesAndRows}),t.numberOfLayersOn>0&&Object(k.jsx)(K,{addOverlay:this.addOverlay,closeModal:this.closeModal,deleteOverlay:this.deleteOverlay,isFullscreenEnabled:t.isFullscreenEnabled,labelLayerOn:t.labelLayerOn,openModal:this.openModal,overlays:t.overlays,toggleFullscreen:this.toggleFullscreen,toggleLabels:this.toggleLabels,toggleViewbarVisibility:this.toggleViewbarVisibility,transmitGeocode:this.transmitGeocode,viewbarLayers:t.viewbarLayers,viewbarVisible:t.viewbarVisible}),t.viewbarVisible&&Object(k.jsx)(oe,{addLayer:this.addLayer,closeModal:this.closeModal,deleteLayer:this.deleteLayer,deleteModeActive:t.deleteModeActive,newLayer:t.newLayer,numberOfLayersOn:t.numberOfLayersOn,onItemClick:this.handleItemClick,openModal:this.openModal,rebuildTooltip:this.rebuildTooltip,toggleDeleteMode:this.toggleDeleteMode,toggleModal:this.toggleModal,viewbarLayers:t.viewbarLayers})]})]})}}]),a}(i.Component)),Ye=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function $e(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Ke=a(390);Object(Ke.a)({}),s.a.initialize(window.sideby.Config.gaTrackingId),s.a.pageview(window.location.pathname+window.location.search),r.a.render(Object(k.jsx)(qe,{}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat(".","/service-worker.js");Ye?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):$e(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):$e(e)}))}}()}},[[849,1,2]]]);
//# sourceMappingURL=main.bfebd065.chunk.js.map