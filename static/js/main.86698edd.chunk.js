(this.webpackJsonpsideby=this.webpackJsonpsideby||[]).push([[0],{188:function(e,t,a){},333:function(e,t,a){e.exports=a(701)},475:function(e,t,a){},476:function(e,t,a){},503:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAMAAACelLz8AAAAz1BMVEUAAAAkJCQmJiYmJiYlJSUkJCQAAAAqKiokJCQmJiYzMzMlJSUkJCQmJiYlJSUmJiYoKCgmJiYmJiYnJycmJiYAAAAmJiYmJiYlJSUZGRklJSUmJiYmJiYlJSUlJSUmJiYmJiYtLS0mJiYlJSUmJiYnJyccHBwmJiYmJiYlJSUiIiImJiYmJiYmJiYlJSUkJCQlJSUjIyMuLi4mJiYmJiYlJSUlJSUlJSUAAAAmJiYlJSUoKCglJSUlJSUmJiYmJiYlJSUlJSUlJSUlJSUmJiawjvnZAAAARHRSTlMARfbw3jEDBkb+BatNZMu1GfHGDdQBoPjyCsOfFD2C/LQRaqiTVQmMcFkW4uR961pnOQshyWDgnAKuzDP5uPVW+tp5S3AUDfcAAACGSURBVBgZzcFFAoMwAATARQN1d3d3d9n/v6n0SsKdGYROrW7ZUMlWm+SsD1kkw1ZnPnXHkMTZADAxFwP4JdMCnhU1+CVy+NO4hF+02IbnwzX8YuwKwDLeNiQFHo7nG7+Q5UcmX/eH/oTK5oQLjS3Urjp3Amp7cogAPboO1ESl5CBAOYVQ+QEjbg1iCZEUOgAAAABJRU5ErkJggg=="},504:function(e,t){e.exports="data:image/gif;base64,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"},505:function(e,t,a){},506:function(e,t,a){},639:function(e,t,a){},640:function(e,t,a){},641:function(e,t,a){},642:function(e,t,a){},643:function(e,t,a){},644:function(e,t,a){},653:function(e,t,a){},654:function(e,t,a){},655:function(e,t,a){},656:function(e,t,a){},660:function(e,t,a){},661:function(e,t,a){},663:function(e,t,a){},664:function(e,t,a){},665:function(e,t,a){},700:function(e,t,a){},701:function(e,t,a){"use strict";a.r(t);a(334),a(388);var i=a(0),s=a.n(i),o=a(43),l=a.n(o),r=(a(475),a(476),a(32)),n=a(320),d=a.n(n),p=a(33),c=a(102),h=a.n(c),m=a(89);a(321);function u(e,t,a){for(var i=0;i<e.length;i+=1)if(e[i][t]===a)return i;return-1}function y(e,t){for(var a=0;a<t.length;a+=1)delete e[t[a]];return e}function A(e,t,a){e.splice(a,0,e.splice(t,1)[0])}const g=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[\{\}!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[\{\}!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[\{\}!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[\{\}!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[\{\}!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,b=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);var f=a(10),E=a(13),v=a(1),C=a.n(v);a(702),a(503),a(504),a(505),a(506);class L extends i.Component{constructor(e){super(e),f.b.add(E.p),this.Config=window.sideby.Config,this.mapboxToken=this.Config.mapboxToken}componentDidMount(){let e=this;this.map=C.a.map("hidden-geocoder-map"),this.geocoderObj=new C.a.Control.Geocoder({geocoder:new C.a.Control.Geocoder.Mapbox(this.mapboxToken),collapsed:!0,placeholder:this.Config.geocoderSearchPlaceholderText,suggestMinLength:3,queryMinLength:1,defaultMarkGeocode:!1}),this.geocoderObj.addTo(this.map),this.geocoderObj.on("markgeocode",t=>e.transmitGeocode(t));let t=this.geocoderObj.getContainer();window.document.getElementById("Geocoder").appendChild(t)}transmitGeocode(e){this.props.transmitGeocode(e)}render(){return s.a.createElement("div",{id:"Geocoder",className:this.props.viewbarVisible?"Geocoder":"Geocoder Viewbar-hidden","data-tip":"Search for an address/place","data-for":"modal","data-event":"mouseover","data-delay-show":"900","data-event-off":"mouseout","data-place":"top","data-tip-disable":b},s.a.createElement("div",{id:"hidden-geocoder-map"}))}}var w=L,M=a(19),F=a(15),S=a(42);const _={AddNewLayer:"Beep boop boop",LayerUrl:"Enter the URL to the layer you want to add here. See the help for more guidance.",TileLayer:"An XYZ style layer.<br/>For example https://maps.nyc.gov/xyz/1.0.0/carto/label/{z}/{x}/{y}.png8",WMSTileLayer:"A link to an OGC WMS server. You will need to specify an extra layers parameter. See the help for more information",WMTSTileLayer:"A link to an OGC WMTS layer. Very similar to WMS, except that it is pre-tiled.",EsriDynamicMapLayer:"An Esri map service that is drawn dynamically on the server.",EsriFeatureLayer:"A vector layer coming from ArcGIS Online or ArcGIS Server.<br/>For example, https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/USA_States_Generalized/FeatureServer/0",EsriImageLayer:"An Esri image service.",EsriTiledMapLayer:"An Esri map service consisting of a static tile cache.",ThumbnailPath:"Enter a path to a thumbnail picture to use for the layer. It can be a full URL or the filename of an image stored in /public/assets/images.",DisplayName:"The name to use for this layer.",ExportLayers:"Use this option to extract the JSON representation of the layers in your current view. You can use that text in the application's LayersInfo.js file."};class O extends i.Component{constructor(e){super(e),f.b.add(E.k)}render(){return s.a.createElement(M.a,{"data-tip":this.props.tooltipName,"data-for":"modal","data-event":"click",icon:"info-circle"})}}var x=O,T=a(332);function k(e){var t,a=e.layer_type,i=e.url;switch(a){case"EsriDynamicMapLayer":case"EsriImageLayer":case"EsriTiledMapLayer":t=i+"/info/thumbnail/thumbnail.png";break;case"WMSTileLayer":i.indexOf("geoserver")>=0&&(t=i+"/reflect?height=200&width=300&layers="+e.layers);break;case"WMTSTileLayer":i.indexOf("MapServer/WMTS")>=0&&(t=i.slice(0,i.indexOf("/WMTS"))+"/info/thumbnail/thumbnail.png");break;default:t="/sideby/assets/images/default.jpg"}return t||(t="/sideby/assets/images/default.jpg"),t}const I=e=>{const t=Object(F.g)().values,a=Object(F.e)(e),i=Object(T.a)(a,3);i[0],i[1],i[2];let o=t.layer_type,l={WFSLayer:["typeNS","typeName","geometryField","maxFeatures","arcgis"],WMSTileLayer:["layers"],WMTSTileLayer:["layer","tilematrixSet"]}[o];return o&&l?s.a.createElement("div",{className:"conditionalLayerFields"},s.a.createElement("h4",{className:"conditionalLayerFieldsHeader"},o,": Additional Field",l.length>1?"s":""),s.a.createElement("div",null,s.a.createElement(s.a.Fragment,null,l.map((function(e){return s.a.createElement("div",{key:o+"_"+e,className:"conditionalLayerField inputGroup"},s.a.createElement("label",{className:"textInputLabel",htmlFor:e},e,s.a.createElement(F.b,{name:e,type:"text"})))}))))):null},G=e=>{const t=Object(F.g)(),a=t.values.url,i=t.touched,o=t.setFieldValue;return s.a.useEffect(()=>{let t=function(e){let t=e,a=null;return Object.entries({TileLayer:/.*\{z\}.*\{x\}.*\{y\}.*/,WFSLayer:/.*wfs.*/i,WMSTileLayer:/.*wms.*/i,WMTSTileLayer:/.*wmts.*/i,EsriImageLayer:/.*ImageServer.*/,EsriFeatureLayer:/.*FeatureServer.*/,EsriTiledMapLayer:/.*MapServer[\/ ]*$/}).forEach(e=>{e[1].test(t)&&(a=e[0])}),a}(a);o(e.name,t)},[a,i.url,o,e.name]),s.a.createElement("div",{className:"radioGroup"},s.a.createElement("label",{className:"radioGroupLabel"},"Type of Layer"),s.a.createElement("div",{className:"inputGroup"},s.a.createElement(F.b,{id:"typeTileLayer",name:"layer_type",type:"radio",value:"TileLayer"}),s.a.createElement("label",{className:"radioGroupLabel",htmlFor:"typeTileLayer"},"XYZ Tile Layer"),s.a.createElement(x,{tooltipName:_.TileLayer})),s.a.createElement("div",{className:"inputGroup"},s.a.createElement(F.b,{id:"typeWFSLayer",name:"layer_type",type:"radio",value:"WFSLayer"}),s.a.createElement("label",{className:"radioGroupLabel",htmlFor:"typeWFSLayer"},"WFS Layer"),s.a.createElement(x,{tooltipName:_.WFSLayer})),s.a.createElement("div",{className:"inputGroup"},s.a.createElement(F.b,{id:"typeWMSTileLayer",name:"layer_type",type:"radio",value:"WMSTileLayer"}),s.a.createElement("label",{className:"radioGroupLabel",htmlFor:"typeWMSTileLayer"},"WMS Layer"),s.a.createElement(x,{tooltipName:_.WMSTileLayer})),s.a.createElement("div",{className:"inputGroup"},s.a.createElement(F.b,{id:"typeWMTSTileLayer",name:"layer_type",type:"radio",value:"WMTSTileLayer"}),s.a.createElement("label",{className:"radioGroupLabel",htmlFor:"typeWMTSTileLayer"},"WMTS Tile Layer"),s.a.createElement(x,{tooltipName:_.WMTSTileLayer})),s.a.createElement("div",{className:"inputGroup"},s.a.createElement(F.b,{id:"typeEsriTiledMapLayer",name:"layer_type",type:"radio",value:"EsriTiledMapLayer"}),s.a.createElement("label",{className:"radioGroupLabel",htmlFor:"typeEsriTiledMapLayer"},"Esri Tiled Map Layer"),s.a.createElement(x,{tooltipName:_.EsriTiledMapLayer})),s.a.createElement("div",{className:"inputGroup"},s.a.createElement(F.b,{id:"typeEsriDynamicMapLayer",name:"layer_type",type:"radio",value:"EsriDynamicMapLayer"}),s.a.createElement("label",{className:"radioGroupLabel",htmlFor:"typeEsriDynamicMapLayer"},"Esri Dynamic Map Layer"),s.a.createElement(x,{tooltipName:_.EsriDynamicMapLayer})),s.a.createElement("div",{className:"inputGroup"},s.a.createElement(F.b,{id:"typeEsriFeatureLayer",name:"layer_type",type:"radio",value:"EsriFeatureLayer"}),s.a.createElement("label",{className:"radioGroupLabel",htmlFor:"typeEsriFeatureLayer"},"Esri Feature Layer"),s.a.createElement(x,{tooltipName:_.EsriFeatureLayer})),s.a.createElement("div",{className:"inputGroup"},s.a.createElement(F.b,{id:"typeEsriImageLayer",name:"layer_type",type:"radio",value:"EsriImageLayer"}),s.a.createElement("label",{className:"radioGroupLabel",htmlFor:"typeEsriImageLayer"},"Esri Image Layer"),s.a.createElement(x,{tooltipName:_.EsriImageLayer})))};a(188);var D=e=>s.a.createElement(F.d,{initialValues:{url:"",layer_type:"",display_name:"",is_basemap:!1,layers:"",typeNS:"",typeName:"",arcgis:!1},validationSchema:S.object({url:S.string().matches(g,"Needs to be a valid URL.").required("Required"),layer_type:S.string().required("Required"),display_name:S.string().required("Required"),is_basemap:S.boolean().default(!1)}),onSubmit:(t,{setSubmitting:a})=>{e.addOverlay(t),e.closeModal()}},s.a.createElement(F.c,null,s.a.createElement("h3",{className:"modalHeader"},"Add New Overlay"),s.a.createElement("label",{className:"textInputLabel",htmlFor:"url"},"Url\xa0"),s.a.createElement(x,{tooltipName:_.LayerUrl}),s.a.createElement("div",{className:"inputGroup"},s.a.createElement(F.b,{as:"textarea",name:"url"}),s.a.createElement(F.a,{className:"error",component:"div",name:"url"})),s.a.createElement(G,{name:"layer_type"}),s.a.createElement(I,null),s.a.createElement("div",{className:"inputGroup"},s.a.createElement("label",{className:"textInputLabel",htmlFor:"display_name"},"Display Name"),s.a.createElement(F.b,{name:"display_name",type:"text"}),s.a.createElement(F.a,{className:"error",component:"div",name:"display_name"})),s.a.createElement("div",{className:"inputGroup"},s.a.createElement(F.b,{id:"is_basemap",name:"is_basemap",type:"checkbox"}),s.a.createElement("label",{className:"radioGroupLabel",htmlFor:"is_basemap"},"Place layer beneath others rather than on top.")),s.a.createElement("button",{type:"submit"},"OK"),s.a.createElement("button",{type:"button",onClick:e.closeModal},"Cancel")));class R extends i.Component{constructor(e){super(e),this.Config=window.sideby.Config,f.b.add(E.o),this.onClick=this.onClick.bind(this),this.modalType="AddOverlay"}onClick(e){let t=s.a.createElement(D,Object.assign({onBlur:this.onBlur},this.props));this.props.openModal(this.modalType,t)}render(){return s.a.createElement("button",{className:"add-overlay",onClick:this.onClick,name:"Add Overlay",id:"add-overlay","data-tip":"Add an overlay layer","data-for":"modal","data-event":"mouseover","data-delay-show":"900","data-place":"top","data-event-off":"mouseout","data-tip-disable":b},s.a.createElement(M.a,{icon:"plus-square",size:"2x"}))}}var U=R,Q=a(324),N=a.n(Q);class B extends i.Component{constructor(e){super(e),f.b.add(E.h),this.onClick=this.onClick.bind(this),this.state={showLayers:!1},this.clipboard=new N.a(".copyButton",{container:document.getElementById("modalContainer")})}onClick(){this.setState({showLayers:!this.state.showLayers})}render(){return s.a.createElement("div",{className:"exportLayersGroup"},s.a.createElement("button",{name:"exportLayersButton",type:"button",id:"exportLayersButton",onClick:this.onClick},"Export Layers"),s.a.createElement("br",null),this.state.showLayers&&s.a.createElement(s.a.Fragment,null,s.a.createElement("textarea",{className:"clipboardText",id:"clipboardText",rows:"10",cols:"50",readOnly:!0,value:JSON.stringify(this.props.layers,null,2)}),s.a.createElement("button",{className:"copyButton","data-clipboard-target":"#clipboardText",type:"button"},s.a.createElement(M.a,{icon:"copy"}))))}}var J=B;class z extends i.Component{constructor(e){super(e),f.b.add(E.l),f.b.add(E.q),this.onClick=this.onClick.bind(this)}onClick(e){let t=this.props.overlays,a=s.a.createElement(s.a.Fragment,null,s.a.createElement("table",{className:"table"},s.a.createElement("caption",null," Current Overlays"),s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Name"),s.a.createElement("th",null,"Remove"))),s.a.createElement("tbody",null,t.map((e,t)=>s.a.createElement("tr",{id:e.id,key:e.id},s.a.createElement("td",null,e.display_name),s.a.createElement("td",null,s.a.createElement("button",{"data-overlay-id":e.id,onClick:this.props.deleteOverlay},s.a.createElement(M.a,{icon:"times-circle",size:"2x"}))))))),s.a.createElement(J,{layers:t}),s.a.createElement("br",null),s.a.createElement("button",{type:"button",onClick:this.props.closeModal},"OK"));this.props.openModal("ManageOverlays",a,{noSubmit:!0})}render(){return s.a.createElement("button",{className:"ManageOverlays-button",onClick:this.onClick,name:"Manage Overlays",id:"ManageOverlays-button","data-tip":"Manage current overlays","data-for":"modal","data-event":"mouseover","data-delay-show":"900","data-event-off":"mouseout","data-place":"top"},s.a.createElement("div",{className:"icon-label"},s.a.createElement(M.a,{icon:"layer-group",size:"2x"})))}}var j=z;a(639);class P extends i.Component{constructor(e){super(e),this.onChange=this.onChange.bind(this)}onChange(){this.props.toggleLabels()}render(){return s.a.createElement("div",{className:"inputGroup"},s.a.createElement("input",{defaultChecked:this.props.labelLayerOn,name:"labelsCheckbox",id:"labelsCheckbox",type:"checkbox",onChange:this.onChange}),s.a.createElement("label",{htmlFor:"labelsCheckbox"},"Map\xa0Labels"))}}var W=P;var Y=e=>{const t=Object(F.f)({initialValues:{mapLabels:!0},onSubmit:t=>{e.closeModal()},onChange:e=>{alert(e)}});return s.a.createElement("form",{onSubmit:t.handleSubmit},s.a.createElement(W,{labelLayerOn:e.labelLayerOn,toggleLabels:e.toggleLabels}),s.a.createElement("div",{className:"inputGroup"},s.a.createElement(J,{layers:e.viewbarLayers}),s.a.createElement(x,{tooltipName:_.ExportLayers})),s.a.createElement("button",{type:"submit"},"OK"))};class V extends i.Component{constructor(e){super(e),f.b.add(E.f),this.onClick=this.onClick.bind(this)}onClick(e){let t=s.a.createElement(Y,this.props);this.props.openModal("Settings",t,{noSubmit:!0})}render(){return s.a.createElement("button",{className:"settings-button",onClick:this.onClick,name:"Settings","data-tip":"Settings","data-for":"modal","data-event":"mouseover","data-delay-show":"900","data-place":"top","data-event-off":"mouseout","data-tip-disable":b,id:"settings-button"},s.a.createElement("div",{className:"icon-label"},s.a.createElement(M.a,{icon:"cog",size:"2x"})))}}var Z=V;f.b.add(E.i),f.b.add(E.g);class H extends i.Component{render(){return s.a.createElement("button",{onClick:()=>this.props.toggleFullscreen(),name:"Toggle Fullscreen Mode","data-tip":this.props.isFullscreenEnabled?"Exit Fullscreen Mode":"Enter Fullscreen Mode","data-for":"modal","data-event":"mouseover","data-delay-show":"800","data-place":"top","data-tip-disable":b,"data-event-off":"mouseout"},s.a.createElement(M.a,{icon:this.props.isFullscreenEnabled?"compress":"expand",size:"2x"}))}}var K=H;f.b.add(E.c),f.b.add(E.d);class q extends i.Component{render(){return s.a.createElement("button",{onClick:()=>this.props.toggleViewbarVisibility(),name:"Hide view bar","data-tip":this.props.viewbarVisible?"Hide Layer Selector":"Show Layer Selector","data-for":"modal","data-event":"mouseover","data-delay-show":"800","data-event-off":"mouseout","data-place":"top","data-tip-disable":b},s.a.createElement(M.a,{icon:this.props.viewbarVisible?"arrow-down":"arrow-up",size:"2x"}))}}var X=q;a(640),a(641);class $ extends i.Component{constructor(e){super(e),this.transmitGeocode=this.transmitGeocode.bind(this)}componentDidMount(){}transmitGeocode(e){this.props.transmitGeocode(e)}render(){return s.a.createElement("div",{id:"UtilityBar",className:"UtilityBar"},s.a.createElement(w,{transmitGeocode:this.transmitGeocode,viewbarVisible:this.props.viewbarVisible}),s.a.createElement(U,{numberOfLayersOn:this.props.numberOfLayersOn,addOverlay:this.props.addOverlay,openModal:this.props.openModal,closeModal:this.props.closeModal}),this.props.overlays.length>0&&s.a.createElement(j,{overlays:this.props.overlays,openModal:this.props.openModal,closeModal:this.props.closeModal,deleteOverlay:this.props.deleteOverlay}),s.a.createElement(K,{toggleFullscreen:this.props.toggleFullscreen,isFullscreenEnabled:this.props.isFullscreenEnabled}),s.a.createElement(Z,{openModal:this.props.openModal,closeModal:this.props.closeModal,labelLayerOn:this.props.labelLayerOn,toggleLabels:this.props.toggleLabels,viewbarLayers:this.props.viewbarLayers,deleteModeActive:this.props.deleteModeActive,toggleDeleteMode:this.props.toggleDeleteMode}),s.a.createElement(X,{toggleViewbarVisibility:this.props.toggleViewbarVisibility,viewbarVisible:this.props.viewbarVisible,invalidateMapSizes:this.props.invalidateMapSizes}))}}var ee=$;a(642);f.b.add(E.k),f.b.add(E.e),f.b.add(E.r);class te extends i.Component{constructor(e){super(e),this.Config=window.sideby.Config,this.onClick=this.onClick.bind(this),this.infoClick=this.infoClick.bind(this),this.resolveThumbnail.bind(this),this.state={}}componentDidMount(e,t){this.props.rebuildTooltip(),this.resolveThumbnail()}resolveThumbnail(){this.props.thumbnail_path?this.props.thumbnail_path.startsWith("http")?this.setState({thumbnail_path:this.props.thumbnail_path}):this.setState({thumbnail_path:"/sideby/assets/images/"+this.props.thumbnail_path}):this.props.layer_type&&this.setState({thumbnail_path:k(this.props)})}infoClick(e){e.stopPropagation(),alert("info click")}onClick(e){if(this.props.numberOfLayersOn===this.Config.maxLayers&&!this.props.isToggledOn)return void this.props.openModal("maxLayers",this.Config.maxLayersWarning.replace("{maxLayers}",this.Config.maxLayers),{noSubmit:!0});if(this.props.deleteModeActive){if(this.props.isToggledOn){let e=Object(r.a)({},this.props);e.isToggledOn=!this.props.isToggledOn,delete e.deleteModeActive,delete e.onItemClick,this.props.onItemClick(e)}return void this.props.deleteLayer(this.props.id)}let t=Object(r.a)({},this.props);t.isToggledOn=!this.props.isToggledOn,delete t.deleteModeActive,delete t.onItemClick,delete t.numberOfLayersOn,this.props.onItemClick(t)}render(){let e=this.props.display_name;return s.a.createElement("button",{className:this.props.isToggledOn?"item on":"item off",onClick:this.onClick,style:{backgroundImage:'url("'+this.state.thumbnail_path+'")'},id:this.props.id,"data-tip":this.props.display_name,"data-place":"top","data-for":"modal","data-event":"mouseover","data-delay-show":"900","data-event-off":"mouseout","data-clickable":"false","data-tip-disable":b},s.a.createElement("div",{className:this.props.deleteModeActive?"deleteModeOn":"deleteModeOff"},s.a.createElement(M.a,{icon:"trash",color:"red",size:"5x"})),s.a.createElement("div",{className:e.length>=10?"label long-title":"label"},e.length>20?e.slice(0,20)+"...":e))}}var ae=te;var ie=e=>s.a.createElement(F.d,{initialValues:{url:"",layer_type:"",display_name:"",thumbnail_path:"",layers:"",format:"image/jpeg",typeNS:"",typeName:"",geometryField:"",maxFeatures:"",arcgis:"",layer:"",tilematrixSet:""},validationSchema:S.object({url:S.string().matches(g,"Needs to be a valid URL.").required("Required"),layer_type:S.string().required("Required"),display_name:S.string().required("Required"),thumbnail_path:S.string()}),onSubmit:(t,{setSubmitting:a})=>{e.addLayer(t),e.closeModal()}},s.a.createElement(F.c,null,s.a.createElement("h3",{className:"modalHeader"},"Add New Layer\xa0",s.a.createElement(x,{tooltipName:_.AddNewLayer})),s.a.createElement("label",{className:"textInputLabel",htmlFor:"url"},"Url\xa0"),s.a.createElement(x,{tooltipName:_.LayerUrl}),s.a.createElement("div",{className:"inputGroup"},s.a.createElement(F.b,{as:"textarea",name:"url"})),s.a.createElement(G,{name:"layer_type"}),s.a.createElement(I,{name:"brrr"}),s.a.createElement("div",{className:"inputGroup"},s.a.createElement("label",{className:"textInputLabel",htmlFor:"display_name"},"Display Name"),s.a.createElement(F.b,{name:"display_name",type:"text"}),s.a.createElement(F.a,{className:"error",component:"div",name:"display_name"})),s.a.createElement("div",{className:"inputGroup"},s.a.createElement("label",{className:"textInputLabel",htmlFor:"thumbnail_path"},"Thumbnail location (optional)"),s.a.createElement(F.b,{name:"thumbnail_path",type:"text"}),s.a.createElement(F.a,{className:"error",component:"div",name:"thumbnail_path"})),s.a.createElement("div",{className:"inputGroup"},s.a.createElement("label",{className:"textInputLabel",htmlFor:"format"},"Image Format (optional)"),s.a.createElement(F.b,{name:"format",type:"text"}),s.a.createElement(F.a,{className:"error",component:"div",name:"format"})),s.a.createElement("br",null),s.a.createElement("button",{type:"submit"},"OK"),s.a.createElement("button",{type:"button",onClick:e.closeModal},"Cancel")));var se=class extends ae{constructor(e){super(e),this.Config=window.sideby.Config,f.b.add(E.m),f.b.add(E.n),this.onClick=this.onClick.bind(this),this.state={isToggledOn:!1},this.modalType="AddLayerItem"}onClick(e){let t=s.a.createElement(ie,this.props);this.props.openModal("AddLayerItem",t)}render(){return s.a.createElement("button",{className:"add-layer item background-black",onClick:this.onClick,"data-tip":"Add Comparison Layer","data-for":"modal","data-place":"top","data-event":"mouseover","data-delay-show":"900","data-event-off":"mouseout","data-tip-disable":b,name:"Add Layer",id:"add-layer"},s.a.createElement("div",{className:"icon-label"},s.a.createElement("span",{className:"fa-layers fa-fw fa-5x"},s.a.createElement(M.a,{icon:"map"}),s.a.createElement(M.a,{icon:"plus",transform:"shrink-5",color:"white"}))))}};var oe=class extends ae{constructor(e){super(e),this.Config=window.sideby.Config,f.b.add(E.s),this.onClick=this.onClick.bind(this),this.state={isToggledOn:!1}}onClick(e){this.props.toggleDeleteMode(!this.props.deleteModeActive)}render(){return s.a.createElement("button",{className:this.props.deleteModeActive?"item background-black deleteModeOn":"item background-black deleteModeOff",onClick:this.onClick,"data-tip":"Delete Layers","data-for":"modal","data-place":"top","data-event":"mouseover","data-delay-show":"900","data-event-off":"mouseout","data-tip-disable":b,name:"Delete Layers",id:"delete-layers"},s.a.createElement("div",{className:"icon-label"},s.a.createElement(M.a,{icon:"trash-alt",size:"5x"})))}};a(643);f.b.add(E.a),f.b.add(E.b);class le extends i.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){this.props.onClick(this.props.direction)}render(){let e="left"===this.props.direction?"angle-left":"angle-right";return s.a.createElement("div",{className:"ScrollButton "+this.props.direction,onClick:this.onClick},s.a.createElement("button",null,s.a.createElement(M.a,{icon:e,size:"lg"})))}}var re=le;a(644);class ne extends i.Component{constructor(e){super(e),this.handleItemClick=this.handleItemClick.bind(this),this.handleScrollButtonClick=this.handleScrollButtonClick.bind(this),this.scrollTo=this.scrollTo.bind(this),this.onWheel=this.onWheel.bind(this),this.easeInOutQuad=this.easeInOutQuad.bind(this),this.state={}}handleItemClick(e){let t=e.id,a=Object(p.cloneDeep)(this.state);a.layers.forEach((i,s)=>{i.id===t&&(a.layers[s]=e)}),this.setState(a),this.props.onItemClick(e)}handleScrollButtonClick(e){this.scrollTo(e,350)}componentDidUpdate(e,t){if(this.props.newLayer){if(e.newLayer&&e.newLayer.id===this.props.newLayer.id)return;let t=this.props.newLayer,a=this.state.layers;a.push(t),this.setState({layers:a})}this.props.viewbarLayers&&this.props.viewbarLayers.length!==this.state.layers.length&&this.setState({layers:this.props.viewbarLayers})}componentDidMount(e,t){this.setState({layers:this.props.viewbarLayers})}onWheel(e){let t=document.getElementById("viewbarItems"),a=1===e.deltaMode?50*e.deltaY:e.deltaY;t.scrollLeft=t.scrollLeft+a}scrollTo(e,t){let a=document.getElementById("viewbarItems"),i=a.scrollLeft,s=document.documentElement.clientWidth,o=Math.max(s/2,300),l="left"===e?-o:+o,r=0,n=this;!function e(){r+=20;let s=n.easeInOutQuad(r,i,l,t);a.scrollLeft=s,r<t&&setTimeout(e,20)}()}easeInOutQuad(e,t,a,i){return(e/=i/2)<1?a/2*e*e+t:-a/2*(--e*(e-2)-1)+t}render(){const e=this.state.layers||[];let t=this.props.deleteModeActive;return s.a.createElement("footer",{id:"Viewbar",className:"ViewBar-container bottom"},s.a.createElement(re,{direction:"left",onClick:this.handleScrollButtonClick}),s.a.createElement("div",{onWheel:this.onWheel,onScroll:this.onScroll,scrollleft:this.state.scrollLeft,className:"flip-move",id:"viewbarItems"},e.map(e=>s.a.createElement(ae,Object.assign({deleteModeActive:t,deleteLayer:this.props.deleteLayer,numberOfLayersOn:this.props.numberOfLayersOn,key:e.id,onItemClick:this.handleItemClick,openModal:this.props.openModal,closeModal:this.props.closeModal,rebuildTooltip:this.props.rebuildTooltip},e))),s.a.createElement(se,{rebuildTooltip:this.props.rebuildTooltip,numberOfLayersOn:this.props.numberOfLayersOn,openModal:this.props.openModal,closeModal:this.props.closeModal,addLayer:this.props.addLayer}),e.length>0&&s.a.createElement(oe,{rebuildTooltip:this.props.rebuildTooltip,deleteModeActive:t,toggleDeleteMode:this.props.toggleDeleteMode})),s.a.createElement(re,{direction:"right",onClick:this.handleScrollButtonClick}))}}var de=ne,pe=a(194),ce=a.n(pe);a(653),a(654),a(655);ce.a.setAppElement("#root");class he extends i.Component{constructor(e){super(e),this.formatContent=this.formatContent.bind(this),this.afterOpenModal=this.afterOpenModal.bind(this),this.handleCloseModal=this.handleCloseModal.bind(this),this.ref=s.a.createRef(null),this.getParent=this.getParent.bind(this),this.state={}}formatContent(e,t){return s.a.createElement("div",{id:"modalContent"},t)}afterOpenModal(){this.props.rebuildTooltip(!0)}getParent(){return document.querySelector("#modalRoot")}handleCloseModal(){this.props.closeModal()}render(){let e=this.formatContent(this.props.modalType,this.props.modalContent);return s.a.createElement(ce.a,{id:"modalContainer",ref:this.ref,closeTimeoutMS:500,className:"Modal-Content",key:"modal",isOpen:this.props.isOpen,onAfterOpen:this.afterOpenModal,onRequestClose:this.handleCloseModal,parentSelector:this.getParent,contentLabel:"Modal"},e)}}var me=he;a(656);class ue extends i.Component{constructor(e){super(e),this.onChange=this.onChange.bind(this)}resetRebuildTooltip(){this.props.resetRebuildTooltip(!1)}componentDidUpdate(e,t){!0===this.props.rebuildTooltip&&this.resetRebuildTooltip(),m.a.rebuild()}onChange(){}render(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(m.a,{className:"superHighZIndex",effect:"solid",id:"modal",place:"right",multiline:!0}),s.a.createElement(m.a,{effect:"solid",id:"home"}))}}var ye=ue,Ae=a(105),ge=a(307),be=a(308),fe=a(305),Ee=a(306),ve=a(325),Ce=a.n(ve),Le=a(4),we=a(326),Me=a.n(we);var Fe=Object(Le.d)(Me.a),Se=a(31);a(658);class _e extends Se.a{createLeafletElement(e){const t=new C.a.WFS(this.getOptions(e));return this.contextValue=Object(r.a)({},e.leaflet,{layerContainer:t,popupContainer:t}),t}updateLeafletElement(e,t){t.url!==e.url&&this.leafletElement.setUrl(t.url)}}var Oe=Object(Le.d)(_e),xe=a(14),Te=a.n(xe),ke=a(88),Ie=a(65);class Ge extends ke.a{createLeafletElement(e){return Object(Ie.d)(e)}}Ge.propTypes={url:Te.a.string.isRequired};var De=Object(Le.d)(Ge),Re=a(34);class Ue extends Re.a{createLeafletElement(e){let t=Object(r.a)({},e,{f:"image"});const a=Object(Ie.a)(t);return this.contextValue=Object(r.a)({},e.leaflet,{popupContainer:a}),a}updateLeafletElement(e,t){t.url!==e.url&&this.leafletElement.setUrl(t.url)}}var Qe=Object(Le.d)(Ue);class Ne extends Re.a{createLeafletElement(e){let t=Object(r.a)({},e);const a=Object(Ie.b)(t);return this.contextValue=Object(r.a)({},e.leaflet,{popupContainer:a}),a}updateLeafletElement(e,t){t.url!==e.url&&this.leafletElement.setUrl(t.url)}}var Be=Object(Le.d)(Ne);class Je extends Re.a{createLeafletElement(e){let t=Object(r.a)({},e);t.zIndex=2;const a=Object(Ie.c)(t);return this.contextValue=Object(r.a)({},e.leaflet,{popupContainer:a}),a}updateLeafletElement(e,t){t.url!==e.url&&this.leafletElement.setUrl(t.url)}}var ze=Object(Le.d)(Je),je=a(52),Pe=a(195);a(659);!function(){var e,t=window.console||{error:function(){},warn:function(){}};(e=C.a).Control.Loading=e.Control.extend({options:{delayIndicator:null,position:"topleft",separate:!1,zoomControl:null,spinjs:!1,spin:{lines:7,length:3,width:3,radius:5,rotate:13,top:"83%"}},initialize:function(t){e.setOptions(this,t),this._dataLoaders={},null!==this.options.zoomControl&&(this.zoomControl=this.options.zoomControl)},onAdd:function(a){if(this.options.spinjs&&"function"!==typeof Pe.a)return t.error("Leaflet.loading cannot load because you didn't load spin.js (http://fgnass.github.io/spin.js/), even though you set it in options.");this._addLayerListeners(a),this._addMapListeners(a),this.options.separate||this.zoomControl||(a.zoomControl?this.zoomControl=a.zoomControl:a.zoomsliderControl&&(this.zoomControl=a.zoomsliderControl));var i,s="leaflet-control-loading";return this.zoomControl&&!this.options.separate?(i=this.zoomControl._container,s+=" leaflet-bar-part-bottom leaflet-bar-part last",e.DomUtil.addClass(this._getLastControlButton(),"leaflet-bar-part-bottom")):i=e.DomUtil.create("div","leaflet-control-zoom leaflet-control-layer-container leaflet-bar"),this._indicatorContainer=i,this._indicator=e.DomUtil.create("a",s,i),this.options.spinjs&&(this._spinner=new Pe.a(this.options.spin).spin(),this._indicator.appendChild(this._spinner.el)),i},onRemove:function(e){this._removeLayerListeners(e),this._removeMapListeners(e)},removeFrom:function(t){return this.zoomControl&&!this.options.separate?(this._container.removeChild(this._indicator),this._map=null,this.onRemove(t),this):e.Control.prototype.removeFrom.call(this,t)},addLoader:function(e){if(this._dataLoaders[e]=!0,this.options.delayIndicator&&!this.delayIndicatorTimeout){var a=this;this.delayIndicatorTimeout=setTimeout((function(){t.log("delayed."),a.updateIndicator(),a.delayIndicatorTimeout=null}),this.options.delayIndicator)}else this.updateIndicator()},removeLoader:function(e){delete this._dataLoaders[e],this.updateIndicator(),this.options.delayIndicator&&this.delayIndicatorTimeout&&!this.isLoading()&&(clearTimeout(this.delayIndicatorTimeout),this.delayIndicatorTimeout=null)},updateIndicator:function(){this.isLoading()?this._showIndicator():this._hideIndicator()},isLoading:function(){return this._countLoaders()>0},_countLoaders:function(){var e,t=0;for(e in this._dataLoaders)this._dataLoaders.hasOwnProperty(e)&&t++;return t},_showIndicator:function(){e.DomUtil.addClass(this._indicator,"is-loading"),e.DomUtil.addClass(this._indicatorContainer,"is-loading"),this.options.separate||(this.zoomControl instanceof e.Control.Zoom?e.DomUtil.removeClass(this._getLastControlButton(),"leaflet-bar-part-bottom"):"function"===typeof e.Control.Zoomslider&&this.zoomControl instanceof e.Control.Zoomslider&&e.DomUtil.removeClass(this.zoomControl._ui.zoomOut,"leaflet-bar-part-bottom"))},_hideIndicator:function(){e.DomUtil.removeClass(this._indicator,"is-loading"),e.DomUtil.removeClass(this._indicatorContainer,"is-loading"),this.options.separate||(this.zoomControl instanceof e.Control.Zoom?e.DomUtil.addClass(this._getLastControlButton(),"leaflet-bar-part-bottom"):"function"===typeof e.Control.Zoomslider&&this.zoomControl instanceof e.Control.Zoomslider&&e.DomUtil.addClass(this.zoomControl._ui.zoomOut,"leaflet-bar-part-bottom"))},_getLastControlButton:function(){for(var e=this.zoomControl._container,t=e.children.length-1;t>0;){var a=e.children[t];if(this._indicator!==a&&0!==a.offsetWidth&&0!==a.offsetHeight)break;t--}return e.children[t]},_handleLoading:function(e){this.addLoader(this.getEventId(e))},_handleBaseLayerChange:function(t){var a=this;t.layer&&t.layer.eachLayer&&"function"===typeof t.layer.eachLayer?t.layer.eachLayer((function(e){a._handleBaseLayerChange({layer:e})})):e.TileLayer.Canvas&&t.layer instanceof e.TileLayer.Canvas||a._handleLoading(t)},_handleLoad:function(e){this.removeLoader(this.getEventId(e))},getEventId:function(e){return e.id?e.id:e.layer?e.layer._leaflet_id:e.target._leaflet_id},_layerAdd:function(e){if(e.layer&&e.layer.on)try{e.layer.on({loading:this._handleLoading,load:this._handleLoad},this)}catch(a){t.warn("L.Control.Loading: Tried and failed to add  event handlers to layer",e.layer),t.warn("L.Control.Loading: Full details",a)}},_layerRemove:function(e){if(e.layer&&e.layer.off)try{e.layer.off({loading:this._handleLoading,load:this._handleLoad},this)}catch(a){t.warn("L.Control.Loading: Tried and failed to remove event handlers from layer",e.layer),t.warn("L.Control.Loading: Full details",a)}},_addLayerListeners:function(e){e.eachLayer((function(e){e.on&&e.on({loading:this._handleLoading,load:this._handleLoad},this)}),this),e.on("layeradd",this._layerAdd,this),e.on("layerremove",this._layerRemove,this)},_removeLayerListeners:function(e){e.eachLayer((function(e){e.off&&e.off({loading:this._handleLoading,load:this._handleLoad},this)}),this),e.off("layeradd",this._layerAdd,this),e.off("layerremove",this._layerRemove,this)},_addMapListeners:function(e){e.on({baselayerchange:this._handleBaseLayerChange,dataloading:this._handleLoading,dataload:this._handleLoad,layerremove:this._handleLoad},this)},_removeMapListeners:function(e){e.off({baselayerchange:this._handleBaseLayerChange,dataloading:this._handleLoading,dataload:this._handleLoad,layerremove:this._handleLoad},this)}}),e.Map.addInitHook((function(){this.options.loadingControl&&(this.loadingControl=new e.Control.Loading,this.addControl(this.loadingControl))})),e.Control.loading=function(t){return new e.Control.Loading(t)}}();a(660),a(661);class We extends je.a{createLeafletElement(e){let t=e.opts;return new C.a.Control.Loading(t)}}var Ye=Object(Le.d)(We);a(662),a(663),a(664);f.b.add(E.j);class Ve extends s.a.Component{render(){const e=this.props,t=e.provided,a=e.display_name;return s.a.createElement("div",{className:"Handle map-title"},s.a.createElement("span",Object.assign({className:"Handle-span"},t.dragHandleProps),s.a.createElement(M.a,{className:"Handle-drag-icon",icon:"grip-vertical",size:"1x"})),"\xa0",a.length>20?a.slice(0,20)+"...":a)}}class Ze extends i.Component{constructor(e,t){super(e),this.Config=window.sideby.Config,this.mapboxToken=this.Config.mapboxToken,this.labelLayerUrl=this.Config.labelLayerUrl+this.mapboxToken;const a={center:this.Config.mapDefaultCenter,zoom:this.Config.mapDefaultZoom};this.viewport=a,this.invalidateMapSizes=this.invalidateMapSizes.bind(this),this.syncMaps=this.syncMaps.bind(this),this.unsyncMaps=this.unsyncMaps.bind(this),this.moveend=this.moveend.bind(this),this.onViewportChanged=this.onViewportChanged.bind(this),this.passUpRef=this.passUpRef.bind(this),this.onResize=this.onResize.bind(this),this.onGeocodeClick=this.onGeocodeClick.bind(this),this.bboxStringToLatLngBoundsArray=this.bboxStringToLatLngBoundsArray.bind(this),this.checkLayerBounds=this.checkLayerBounds.bind(this),this.layerOptionBlacklist=["minZoom","maxZoom","isToggledOn","visibleIndex","id","start_bounds","thumbnail_path","display_name","numberOfLayersOn","deleteLayer","closeModal","openModal","rebuildTooltip","leaflet","layer_type","row"]}componentWillUnmount(){this.passUpRef(this.props.layer.id,this.props.mapRef,!0)}componentDidMount(e,t){this.passUpRef(this.props.layer.id,this.props.mapRef)}componentDidUpdate(e,t){e.layer.visibleIndex,this.props.layer.visibleIndex}onResize(e){}moveend(e){}invalidateMapSizes(){this.props.invalidateMapSizes()}unsyncMaps(e){this.props.unsyncMaps(e)}syncMaps(){this.props.syncMaps()}passUpRef(e,t,a=!1){this.setState({mapRef:t}),this.props.passUpRef(e,t,a)}bboxStringToLatLngBoundsArray(){var e=this.props.layer.start_bounds.split(",");return[[e[1],e[0]],[e[3],e[2]]]}checkLayerBounds(){return this.props.layer.start_bounds?this.bboxStringToLatLngBoundsArray():null}clearGeocode(){this.props.clearGeocode()}onGeocodeClick(){this.clearGeocode()}onViewportChanged(e){this.viewport=e}render(){const e={EsriFeatureLayer:Be,EsriTiledMapLayer:De,EsriImageLayer:ze,EsriDynamicMapLayer:Qe,TileLayer:ge.a,VectorGrid:Fe,WMSTileLayer:be.a,WMTSTileLayer:Ce.a,WFSLayer:Oe},t=this.props.overlays,a=()=>s.a.createElement(s.a.Fragment,null,t.map(t=>{let a=e[t.layer_type];return s.a.createElement(a,Object.assign({format:"image/png8",transparent:"true",url:t.url,key:t.id,zIndex:t.is_basemap?1:1e5,pane:t.is_basemap?"tilePane":"overlayPane"},y(Object(p.cloneDeep)(t),this.layerOptionBlacklist)))})),i=Object(p.cloneDeep)(this.props.layer);let o=e[i.layer_type];const l=this.props.provided;return s.a.createElement("div",Object.assign({},l.draggableProps,{ref:l.innerRef}),s.a.createElement(Ve,{provided:l,display_name:i.display_name}),s.a.createElement(fe.a,{ref:this.props.mapRef,minZoom:this.Config.mapMinZoom,bounds:this.checkLayerBounds(),onResize:this.onResize,maxZoom:i.maxZoom,onViewportChanged:this.onViewportChanged,className:"map"+this.props.numberLayers+(this.props.isDragging?"dragging":"nope"),id:i.id,key:i.id,viewport:this.viewport,zoomControlAdded:!0,loadingControl:!0,preferCanvas:!0},s.a.createElement(Ye,{opts:{position:"bottomleft",spinjs:!0,separate:!0,spin:{lines:15,length:10,width:3,radius:15,color:"#ffffff",left:"100%",top:"-25%",fadeColor:"black",shadow:"0 0 5px black"}}}),this.props.geocodeResult&&s.a.createElement(Ee.a,{position:this.props.geocodeResult,onClick:this.onGeocodeClick}),this.props.labelLayerOn&&s.a.createElement(ge.a,{key:"labels-"+i.id,url:this.labelLayerUrl,pane:"shadowPane",zIndex:1e6}),this.props.overlays.length>0&&s.a.createElement(a,null),s.a.createElement(o,Object.assign({key:i.id,zIndex:1e6},y(i,this.layerOptionBlacklist)))))}}var He=s.a.forwardRef((e,t)=>s.a.createElement(Ze,Object.assign({mapRef:t},e)));a(665);class Ke extends s.a.Component{render(){const e=this.props,t=e.provided,a=e.layers;let i=a.map((e,t)=>s.a.createElement(Ae.b,{draggableId:"draggable-"+e.id,key:"draggable-"+e.id,index:t},(i,o)=>s.a.createElement(He,{layer:e,overlays:this.props.overlays,numberLayers:a.length,innerRef:i.innerRef,key:e.id,layerIndex:t,provided:i,isDragging:o.isDragging,passUpRef:this.props.passUpRef,mapRef:this.props.mapRef,syncMaps:this.props.syncMaps,geocodeResult:this.props.geocodeResult,clearGeocode:this.props.clearGeocode,unsyncMaps:this.props.unsyncMaps,labelLayerOn:this.props.labelLayerOn,invalidateMapSizes:this.props.invalidateMapSizes})));return s.a.createElement("div",Object.assign({className:this.props.className,ref:t.innerRef},t.droppableProps),i,t.placeholder)}}var qe=s.a.forwardRef((e,t)=>s.a.createElement(Ke,Object.assign({mapRef:t},e)));class Xe extends i.Component{constructor(e){super(e),this.onDragEnd=this.onDragEnd.bind(this),this.setMapRef=this.setMapRef.bind(this),this.syncMaps=this.syncMaps.bind(this),this.unsyncMaps=this.unsyncMaps.bind(this),this.invalidateMapSizes=this.invalidateMapSizes.bind(this),this.handleGeocode=this.handleGeocode.bind(this),this.clearGeocode=this.clearGeocode.bind(this),this.state={mapRefs:{}},this.passUpRef=this.passUpRef.bind(this)}passUpRef(e,t,a){let i={mapRefs:this.state.mapRefs};a?(this.unsyncMaps(e),delete i.mapRefs[e],this.setState(i)):(this.manageZoomControls(),this.syncMaps()),this.invalidateMapSizes()}setMapRef(e){let t={mapRefs:this.state.mapRefs};e&&(t.mapRefs[e.container.id]=e,this.setState(t))}onDragEnd(e){if(null===e.destination)return;let t,a,i=this.props.layers,s=e.source.droppableId,o=e.destination.droppableId;t="row2"===s?i.filter(e=>"row1"===e.row).length+e.source.index:"row3"===s?i.filter(e=>"row1"===e.row).length+i.filter(e=>"row2"===e.row).length+e.source.index:e.source.index,a="row2"===o?i.filter(e=>"row1"===e.row).length+e.destination.index:"row3"===o?i.filter(e=>"row1"===e.row).length+i.filter(e=>"row2"===e.row).length+e.destination.index:e.destination.index;let l=i.filter(e=>e.isToggledOn);A(l,t,a),this.props.updateLayerDisplayIndexesAndRows(l)}manageZoomControls(){let e=this.state.mapRefs,t=this.props.layers;var a;for(let i in e)a=e[i].leafletElement,0===t[u(t,"id",i)].visibleIndex?(a.removeControl(a.zoomControl),a.addControl(a.zoomControl)):a.removeControl(a.zoomControl)}invalidateMapSizes(){let e=this.state.mapRefs;for(let t in e)e[t].leafletElement.invalidateSize()}unsyncMaps(e){let t=this.state.mapRefs;for(var a in t)a!==e&&t[e]&&(t[e].leafletElement.unsync(t[a].leafletElement),t[a].leafletElement.unsync(t[e].leafletElement))}syncMaps(){let e=this.state.mapRefs;for(var t in e)for(var a in e)t===a||e[t].leafletElement.isSynced(e[a].leafletElement)||e[t].leafletElement.sync(e[a].leafletElement,{syncCursor:!0})}clearGeocode(){this.setState({geocodeResult:!1})}handleGeocode(e){let t=Object.entries(this.state.mapRefs)[0][1],a=this.props.geocodeResult.geocode.bbox,i=this.props.geocodeResult.geocode.center;a._northEast.lat!==a._southWest.lat?t.leafletElement.fitBounds(a):t.leafletElement.setView(i,15),this.setState({geocodeResult:i}),setTimeout(this.clearGeocode,2e3)}componentDidUpdate(e,t){let a=e.layers,i=this.props.layers;a.filter(e=>e.isToggledOn).length!==i.filter(e=>e.isToggledOn).length?this.invalidateMapSizes():function(e,t){for(var a=!0,i=e.length;i--;)e[i]!==t[i]&&(a=!1);return a}(a,i)||setTimeout(this.invalidateMapSizes,400),a.length!==i.length||Object(p.isEqual)(a.map(e=>e.display_name+e.visibleIndex.toString()),i.map(e=>e.display_name+e.visibleIndex.toString()))||this.manageZoomControls(),e.geocodeResult!==this.props.geocodeResult&&this.handleGeocode(this.props.geocodeResult),this.props.invalidateMapSizes&&(this.invalidateMapSizes(),this.props.toggleInvalidateMapSizes(!1))}render(){let e=this.props.layers.filter(e=>e.isToggledOn),t=[];e.forEach(e=>{t.push(e.row)}),t=new Set(t),t=[...t];let a=e.filter(e=>"row1"===e.row);a.sort((e,t)=>e.visibleIndex-t.visibleIndex);let i=e.filter(e=>"row2"===e.row);i.sort((e,t)=>e.visibleIndex-t.visibleIndex);let o=e.filter(e=>"row3"===e.row);i.sort((e,t)=>e.visibleIndex-t.visibleIndex);let l=t.map((e,l)=>s.a.createElement(Ae.c,{droppableId:e,key:e,direction:"horizontal"},(l,r)=>s.a.createElement(qe,{className:"Row "+e+(2===t.length?" two-rows":3===t.length?" three-rows":""),provided:l,snapshot:r,passUpRef:this.passUpRef,geocodeResult:this.state.geocodeResult,clearGeocode:this.clearGeocode,mapRef:this.setMapRef,innerRef:l.innerRef,syncMaps:this.syncMaps,labelLayerOn:this.props.labelLayerOn,unsyncMaps:this.unsyncMaps,invalidateMapSizes:this.invalidateMapSizes,overlays:this.props.overlays,layers:"row1"===e?a:"row2"===e?i:o})));return s.a.createElement("div",{id:"maps"},s.a.createElement(Ae.a,{onDragEnd:this.onDragEnd},l))}}var $e=s.a.forwardRef((e,t)=>s.a.createElement(Xe,Object.assign({mapRef:t},e)));const et=[{layer_type:"TileLayer",display_name:"1924",url:"https://maps.nyc.gov/xyz/1.0.0/photo/1924/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc1924.jpg"},{layer_type:"TileLayer",display_name:"1951",url:"https://maps.nyc.gov/xyz/1.0.0/photo/1951/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc1951.jpg"},{layer_type:"TileLayer",display_name:"1996",url:"https://maps.nyc.gov/xyz/1.0.0/photo/1996/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc1996.jpg"},{layer_type:"TileLayer",display_name:"2001-2",url:"https://maps.nyc.gov/xyz/1.0.0/photo/2001-2/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc2001-2.jpg"},{layer_type:"TileLayer",display_name:"2004",url:"https://maps.nyc.gov/xyz/1.0.0/photo/2004/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc2004.jpg"},{layer_type:"TileLayer",display_name:"2006",url:"https://maps.nyc.gov/xyz/1.0.0/photo/2006/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc2006.jpg"},{layer_type:"TileLayer",display_name:"2008",url:"https://maps.nyc.gov/xyz/1.0.0/photo/2008/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc2008.jpg"},{layer_type:"TileLayer",display_name:"2010",url:"https://maps.nyc.gov/xyz/1.0.0/photo/2010/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc2010.jpg"},{layer_type:"TileLayer",display_name:"2012",url:"https://maps.nyc.gov/xyz/1.0.0/photo/2012/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc2012.jpg"},{layer_type:"TileLayer",display_name:"2014",url:"https://maps.nyc.gov/xyz/1.0.0/photo/2014/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc2014.jpg"},{layer_type:"TileLayer",display_name:"2016",url:"https://maps.nyc.gov/xyz/1.0.0/photo/2016/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc2016.jpg"},{layer_type:"TileLayer",display_name:"2018",url:"https://maps.nyc.gov/tms/1.0.0/photo/2018/{z}/{x}/{y}.png8",start_bounds:"-74.271671,40.485882,-73.652316,40.949064",thumbnail_path:"demo/nyc2018.jpg",tms:!0}],tt=[{layer_type:"EsriTiledMapLayer",id:"stw_1923map",display_name:"1923",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw_1923map/MapServer",thumbnail_path:"demo/thumb_stw_1923map.JPG",maxZoom:20},{layer_type:"EsriTiledMapLayer",id:"oksm_WPA_PAY_017",display_name:"1936",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/oksm_WPA_PAY_017/MapServer",thumbnail_path:"demo/thumb_oksm_WPA_PAY_017.JPG",maxZoom:20},{layer_type:"EsriTiledMapLayer",id:"stw1938",display_name:"1938",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1938/MapServer",thumbnail_path:"demo/thumb_stw1938.JPG",maxZoom:19},{layer_type:"EsriTiledMapLayer",id:"stw1949",display_name:"1949",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1949/MapServer",thumbnail_path:"demo/thumb_stw1949.JPG",maxZoom:19},{layer_type:"EsriTiledMapLayer",id:"stw1956_tiles",display_name:"1956",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1956_tiles/MapServer",thumbnail_path:"demo/thumb_stw1956_tiles.JPG",maxZoom:19},{layer_type:"EsriTiledMapLayer",id:"Map_Stillwater_1959",display_name:"1959",thumbnail_path:"demo/thumb_Map_Stillwater_1959.JPG",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/Map_Stillwater_1959/MapServer"},{layer_type:"EsriTiledMapLayer",id:"stw1963",display_name:"1963",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1963/MapServer",thumbnail_path:"demo/thumb_stw1963.JPG",maxZoom:19},{layer_type:"EsriTiledMapLayer",id:"stw1969_3",display_name:"1969",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1969_3/MapServer",thumbnail_path:"demo/thumb_stw1969_3.JPG",maxZoom:19},{layer_type:"EsriTiledMapLayer",id:"stw1969_3k",footprint_layer:"stw1969_3k_fp",display_name:"1969 (OSU)",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1969_3k/MapServer",thumbnail_path:"demo/thumb_stw1969_3k.JPG",maxZoom:20},{layer_type:"EsriTiledMapLayer",id:"OSU_1978",display_name:"1978 (OSU)",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/OSU_1978/MapServer",thumbnail_path:"demo/thumb_OSU_1978.JPG",maxZoom:20},{layer_type:"EsriTiledMapLayer",id:"stw1979",display_name:"1979",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1979/MapServer",thumbnail_path:"demo/thumb_stw1979.JPG",maxZoom:19},{layer_type:"EsriTiledMapLayer",id:"osu1986_2",display_name:"1986 (OSU)",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/osu1986_2/MapServer",thumbnail_path:"demo/thumb_osu1986_2.JPG",maxZoom:20},{layer_type:"EsriTiledMapLayer",id:"stw1991",display_name:"1991",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1991/MapServer",thumbnail_path:"demo/thumb_stw1991.JPG",maxZoom:21},{layer_type:"EsriTiledMapLayer",id:"stw1995_2",display_name:"1995",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1995_2/MapServer",thumbnail_path:"demo/thumb_stw1995_2.JPG",maxZoom:18},{layer_type:"EsriTiledMapLayer",id:"osu1996",display_name:"1996 (OSU)",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/osu1996/MapServer",thumbnail_path:"demo/thumb_osu1996.JPG",maxZoom:20},{layer_type:"EsriTiledMapLayer",id:"stw1999_2",display_name:"1999",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/stw1999_2/MapServer",thumbnail_path:"demo/thumb_stw1999_2.JPG",maxZoom:20},{layer_type:"EsriTiledMapLayer",id:"payne_2003",display_name:"2003",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/payne_2003/MapServer",thumbnail_path:"demo/thumb_payne_2003.JPG",maxZoom:19},{layer_type:"EsriTiledMapLayer",id:"Payne_2006_sid",display_name:"2006",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/Payne_2006_sid/MapServer",thumbnail_path:"demo/thumb_Payne_2006_sid.JPG",maxZoom:19},{layer_type:"EsriTiledMapLayer",id:"payne_2010",display_name:"2010",url:"https://tiles.arcgis.com/tiles/jWQlP64OuwDh6GGX/arcgis/rest/services/payne_2010/MapServer",thumbnail_path:"demo/thumb_payne_2010.JPG",maxZoom:19},{layer_type:"EsriTiledMapLayer",id:"esri_imagery",display_name:"2018",thumbnail_path:"demo/thumb_naip2017.JPG",url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",maxZoom:19}];a(700);class at extends i.Component{constructor(e){super(e),this.Config=window.sideby.Config,this.addLayer=this.addLayer.bind(this),this.addOverlay=this.addOverlay.bind(this),this.calculateDisplayIndexes=this.calculateDisplayIndexes.bind(this),this.calculateRowLayers=this.calculateRowLayers.bind(this),this.closeModal=this.closeModal.bind(this),this.deleteLayer=this.deleteLayer.bind(this),this.deleteOverlay=this.deleteOverlay.bind(this),this.handleItemClick=this.handleItemClick.bind(this),this.openModal=this.openModal.bind(this),this.rebuildTooltip=this.rebuildTooltip.bind(this),this.transmitGeocode=this.transmitGeocode.bind(this),this.toggleDeleteMode=this.toggleDeleteMode.bind(this),this.toggleFullscreen=this.toggleFullscreen.bind(this),this.toggleInvalidateMapSizes=this.toggleInvalidateMapSizes.bind(this),this.toggleLabels=this.toggleLabels.bind(this),this.toggleModal=this.toggleModal.bind(this),this.toggleViewbarVisibility=this.toggleViewbarVisibility.bind(this),this.updateLayerDisplayIndexesAndRows=this.updateLayerDisplayIndexesAndRows.bind(this),this.state={layers:[],overlays:window.sideby.OverlaysInfo||[],numberOfLayersOn:0,geocodeResult:{},labelLayerOn:!0,rebuildTooltip:!1,modalIsOpen:!1,modalContent:"",viewbarVisible:!0,deleteModeActive:!1,invalidateMapSizes:!1},"#builder"===window.location.hash&&(window.sideby.LayersInfo=[]),"#stw"===window.location.hash&&(this.Config.siteTitle="Stillwater from the Air",this.Config.welcomeText="It's Stillwater!",this.Config.themeBackgroundColor="#f60",window.sideby.LayersInfo=tt),"#nyc"===window.location.hash&&(this.Config.siteTitle="New York City through the years",this.Config.welcomeText="Using aerial photos from NYC Then & Now, click the buttons below to see how the city has changed over the last 100 years.",window.sideby.LayersInfo=et,this.state.overlays=[{layer_type:"TileLayer",url:"https://maps.nyc.gov/xyz/1.0.0/carto/basemap/{z}/{x}/{y}.jpg",id:"asfasdfasfadfadf",thumbnail_path:"nyc.jpg",display_name:"basemap",start_bounds:"-74.447928,40.442617,-73.512717,40.988043",format:"image/jpeg",is_basemap:!0}]),document.title=this.Config.siteTitle;let t=document.documentElement.style;t.setProperty("--header-color",this.Config.themeHeaderColor),t.setProperty("--header-font-family",this.Config.themeHeaderFontFamily),t.setProperty("--label-color",this.Config.themeLabelColor),t.setProperty("--text-primary-color",this.Config.themeTextPrimaryColor),t.setProperty("--text-tertiary-color",this.Config.themeTextTertiaryColor),t.setProperty("--background-color",this.Config.themeBackgroundColor);let a=window.sideby.LayersInfo.map(e=>Object(r.a)({},e,{isToggledOn:!1,id:h.a.generate()}));this.state.viewbarLayers=a.sort((e,t)=>t.sortVal-e.sortVal)}addLayer(e){let t=e,a=h.a.generate();t.id=a,t.maxZoom=20;let i={viewbarLayers:this.state.viewbarLayers};i.viewbarLayers.push(t),this.setState(i)}addOverlay(e){let t=Object(p.cloneDeep)(this.state.overlays);var a=e;a.isOverlay=!0,a.id=h.a.generate(),a.interactive=!1,t.push(a),this.setState({overlays:t})}calculateDisplayIndexes(e){var t=0;return e.map((function(e){return e.isToggledOn&&(e.visibleIndex=t,t++),e}))}calculateRowLayers(e){let t=e.filter(e=>e.isToggledOn),a=t.length;switch(t.sort((function(e,t){return e.visibleIndex-t.visibleIndex})),a){case 1:case 2:case 3:t.forEach(e=>e.row="row1");break;case 4:t.slice(0,2).forEach(e=>e.row="row1"),t.slice(2).forEach(e=>e.row="row2");break;case 5:case 6:t.slice(0,3).forEach(e=>e.row="row1"),t.slice(3).forEach(e=>e.row="row2");break;case 7:t.slice(0,4).forEach(e=>e.row="row1"),t.slice(4).forEach(e=>e.row="row2");break;case 8:case 9:t.slice(0,3).forEach(e=>e.row="row1"),t.slice(3,6).forEach(e=>e.row="row2"),t.slice(6).forEach(e=>e.row="row3")}return t}closeModal(){this.toggleModal(!1),m.a.hide()}deleteOverlay(e){let t=e.currentTarget.dataset.overlayId;document.getElementById(t).style.display="none";let a=Object(p.cloneDeep)(this.state.overlays),i=u(a,"id",t);a.splice(i,1),this.setState({overlays:a})}deleteLayer(e){let t=Object(p.cloneDeep)(this.state.viewbarLayers),a=u(t,"id",e);t.splice(a,1),this.setState({viewbarLayers:t})}handleItemClick(e){let t,a=!1,i=Object(p.cloneDeep)(this.state.layers),s=Object(p.cloneDeep)(this.state.viewbarLayers);i.forEach((i,s)=>{e.id===i.id&&(a=!0,t=s)}),a?(i[t].isToggledOn=!this.state.layers[t].isToggledOn,A(i,t,i.length-1)):i=i.concat([e]),s.forEach((t,a)=>{e.id===t.id&&(s[a].isToggledOn=!this.state.viewbarLayers[a].isToggledOn)}),i=this.calculateDisplayIndexes(i),i=this.calculateRowLayers(i);let o=i.filter(e=>e.isToggledOn).length,l={layers:i,numberOfLayersOn:o,viewbarLayers:s};this.setState(l)}openModal(e,t,a){this.setState({modalType:e,modalContent:t,modalOptions:a}),this.toggleModal(!0)}rebuildTooltip(e){this.setState({rebuildTooltip:e})}toggleDeleteMode(e){this.setState({deleteModeActive:e}),this.forceUpdate()}toggleFullscreen(){let e=this.state.isFullscreenEnabled;this.setState({isFullscreenEnabled:!e})}toggleInvalidateMapSizes(e){this.setState({invalidateMapSizes:e})}toggleLabels(){let e=this.state.labelLayerOn;this.setState({labelLayerOn:!e})}toggleModal(e){this.setState({modalIsOpen:e})}toggleViewbarVisibility(){let e=this.state.viewbarVisible;this.setState({viewbarVisible:!e}),this.toggleInvalidateMapSizes(!0)}transmitGeocode(e){this.setState({geocode:e})}updateLayerDisplayIndexesAndRows(e){let t=Object(p.cloneDeep)(this.state.layers);e.forEach((e,a)=>{var i=u(t,"id",e.id);t[i].visibleIndex=a}),t=this.calculateRowLayers(t),this.setState({layers:t})}render(){return s.a.createElement(d.a,{enabled:this.state.isFullscreenEnabled,onChange:e=>this.setState({isFullscreenEnabled:e})},s.a.createElement("div",{id:"modalRoot"}),s.a.createElement("div",{className:"App"},s.a.createElement(me,{closeModal:this.closeModal,isOpen:this.state.modalIsOpen,modalContent:this.state.modalContent,modalOptions:this.state.modalOptions,modalSubmit:this.modalSubmit,modalType:this.state.modalType,openModal:this.openModal,rebuildTooltip:this.rebuildTooltip}),s.a.createElement("header",{className:"App-header"},this.Config.siteTitle),s.a.createElement(ye,{rebuildTooltip:this.state.rebuildTooltip,resetRebuildTooltip:this.rebuildTooltip}),0===this.state.numberOfLayersOn&&s.a.createElement("div",{className:"no-maps"},s.a.createElement("p",null,this.Config.welcomeText)),this.state.numberOfLayersOn>0&&s.a.createElement($e,{geocodeResult:this.state.geocode,invalidateMapSizes:this.state.invalidateMapSizes,labelLayerOn:this.state.labelLayerOn,layers:this.state.layers,mapCenter:this.mapCenter,numberOfLayersOn:this.state.numberOfLayersOn,overlays:this.state.overlays,toggleInvalidateMapSizes:this.toggleInvalidateMapSizes,updateLayerDisplayIndexesAndRows:this.updateLayerDisplayIndexesAndRows}),this.state.numberOfLayersOn>0&&s.a.createElement(ee,{addOverlay:this.addOverlay,closeModal:this.closeModal,deleteOverlay:this.deleteOverlay,isFullscreenEnabled:this.state.isFullscreenEnabled,labelLayerOn:this.state.labelLayerOn,openModal:this.openModal,overlays:this.state.overlays,toggleFullscreen:this.toggleFullscreen,toggleLabels:this.toggleLabels,toggleViewbarVisibility:this.toggleViewbarVisibility,transmitGeocode:this.transmitGeocode,viewbarLayers:this.state.viewbarLayers,viewbarVisible:this.state.viewbarVisible}),this.state.viewbarVisible&&s.a.createElement(de,{addLayer:this.addLayer,closeModal:this.closeModal,deleteLayer:this.deleteLayer,deleteModeActive:this.state.deleteModeActive,newLayer:this.state.newLayer,numberOfLayersOn:this.state.numberOfLayersOn,onItemClick:this.handleItemClick,openModal:this.openModal,rebuildTooltip:this.rebuildTooltip,toggleDeleteMode:this.toggleDeleteMode,toggleModal:this.toggleModal,viewbarLayers:this.state.viewbarLayers})))}}var it=at;const st=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ot(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(e=>{console.error("Error during service worker registration:",e)})}var lt=a(331);Object(lt.a)({}),l.a.render(s.a.createElement(it,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/sideby",window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("/sideby","/service-worker.js");st?(!function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):ot(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):ot(e)})}}()}},[[333,1,2]]]);
//# sourceMappingURL=main.86698edd.chunk.js.map